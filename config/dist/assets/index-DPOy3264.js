import{i as iw,a as Qi,g as ma,r as Si,b as rw,c as cg,d as ug,e as sw,f as Ns,h as uf,j as ow,k as lw,l as aw,m as Ki,L as ff,M as Pl,n as fg,o as hg,t as Kr,S as Ml,p as cw,q as dg,s as pg,u as Li,v as uw,w as fw,x as hw,y as mg,z as ae,A as M,B as $t,C as re,D as pt,E as ga,F as ui,G as En,H as w,I as fl,J as j,K as Nn,N as Nh,O as dw,P as pw,Q as mw,R as gw,T as ke,U as Re,V as Zt,W as hf,X as Ut,Y as Pn,Z,_ as tr,$ as Ie,a0 as Rr,a1 as fn,a2 as Xr,a3 as df,a4 as B,a5 as ee,a6 as se,a7 as W,a8 as Te,a9 as Ue,aa as Fs,ab as ya,ac as pf,ad as Vn,ae as he,af as fi,ag as yt,ah as yw,ai as fo,aj as bw,ak as _s,al as Qa,am as Y,an as ne,ao as zt,ap as lt,aq as jn,ar as Le,as as ie,at as ce,au as vw,av as jt,aw as ho,ax as Ic,ay as Bi,az as Xt,aA as po,aB as mf,aC as nr,aD as ww,aE as zn,aF as Nc,aG as xw,aH as Sw,aI as Ow,aJ as gg,aK as Or,aL as Fh,aM as Vi,aN as gf,aO as kw,aP as Cw,aQ as Fc,aR as Aw,aS as Tw,aT as Ew,aU as Pw,aV as ba,aW as tt,aX as pi,aY as _h,aZ as yf,a_ as Mw,a$ as yg,b0 as bg,b1 as je,b2 as va,b3 as bf,b4 as $h,b5 as on,b6 as as,b7 as Hi,b8 as vg,b9 as si,ba as On,bb as wg,bc as Rw,bd as Dw,be as Lw,bf as Bw,bg as xg,bh as Sg,bi as Iw,bj as Nw,bk as Fw,bl as _w,bm as Vh,bn as $w,bo as Ka,bp as Vw,bq as yr,br as Hw,bs as Ww,bt as Ti,bu as jw,bv as Cs,bw as zw,bx as qw,by as Uw,bz as Qw,bA as Kw,bB as Hh,bC as Ze,bD as Xa,bE as Xw,bF as Gw,bG as Yw,bH as Jw}from"./index-DeqQuErR.js";const $n=(t,e,{checkForDefaultPrevented:n=!0}={})=>r=>{const s=t==null?void 0:t(r);if(n===!1||!s)return e==null?void 0:e(r)};var Zw=/\s/;function ex(t){for(var e=t.length;e--&&Zw.test(t.charAt(e)););return e}var tx=/^\s+/;function nx(t){return t&&t.slice(0,ex(t)+1).replace(tx,"")}var Wh=NaN,ix=/^[-+]0x[0-9a-f]+$/i,rx=/^0b[01]+$/i,sx=/^0o[0-7]+$/i,ox=parseInt;function jh(t){if(typeof t=="number")return t;if(iw(t))return Wh;if(Qi(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Qi(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=nx(t);var n=rx.test(t);return n||sx.test(t)?ox(t.slice(2),n?2:8):ix.test(t)?Wh:+t}var _c=ma(Si,"WeakMap"),zh=Object.create,lx=function(){function t(){}return function(e){if(!Qi(e))return{};if(zh)return zh(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function ax(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}function cx(t,e){for(var n=-1,i=t==null?0:t.length;++n<i&&e(t[n],n,t)!==!1;);return t}function ux(t,e,n,i){t.length;for(var r=n+1;r--;)if(e(t[r],r,t))return r;return-1}function wa(t,e,n,i){var r=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var l=e[s],a=void 0;a===void 0&&(a=t[l]),r?rw(n,l,a):cg(n,l,a)}return n}function Og(t){return t!=null&&ug(t.length)&&!sw(t)}var fx=Object.prototype;function vf(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||fx;return t===n}function hx(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function dx(){return!1}var kg=typeof exports=="object"&&exports&&!exports.nodeType&&exports,qh=kg&&typeof module=="object"&&module&&!module.nodeType&&module,px=qh&&qh.exports===kg,Uh=px?Si.Buffer:void 0,mx=Uh?Uh.isBuffer:void 0,Rl=mx||dx,gx="[object Arguments]",yx="[object Array]",bx="[object Boolean]",vx="[object Date]",wx="[object Error]",xx="[object Function]",Sx="[object Map]",Ox="[object Number]",kx="[object Object]",Cx="[object RegExp]",Ax="[object Set]",Tx="[object String]",Ex="[object WeakMap]",Px="[object ArrayBuffer]",Mx="[object DataView]",Rx="[object Float32Array]",Dx="[object Float64Array]",Lx="[object Int8Array]",Bx="[object Int16Array]",Ix="[object Int32Array]",Nx="[object Uint8Array]",Fx="[object Uint8ClampedArray]",_x="[object Uint16Array]",$x="[object Uint32Array]",Pe={};Pe[Rx]=Pe[Dx]=Pe[Lx]=Pe[Bx]=Pe[Ix]=Pe[Nx]=Pe[Fx]=Pe[_x]=Pe[$x]=!0;Pe[gx]=Pe[yx]=Pe[Px]=Pe[bx]=Pe[Mx]=Pe[vx]=Pe[wx]=Pe[xx]=Pe[Sx]=Pe[Ox]=Pe[kx]=Pe[Cx]=Pe[Ax]=Pe[Tx]=Pe[Ex]=!1;function Vx(t){return Ns(t)&&ug(t.length)&&!!Pe[uf(t)]}function wf(t){return function(e){return t(e)}}var Cg=typeof exports=="object"&&exports&&!exports.nodeType&&exports,As=Cg&&typeof module=="object"&&module&&!module.nodeType&&module,Hx=As&&As.exports===Cg,Ga=Hx&&ow.process,Dr=function(){try{var t=As&&As.require&&As.require("util").types;return t||Ga&&Ga.binding&&Ga.binding("util")}catch{}}(),Qh=Dr&&Dr.isTypedArray,Ag=Qh?wf(Qh):Vx,Wx=Object.prototype,jx=Wx.hasOwnProperty;function Tg(t,e){var n=Ki(t),i=!n&&lw(t),r=!n&&!i&&Rl(t),s=!n&&!i&&!r&&Ag(t),o=n||i||r||s,l=o?hx(t.length,String):[],a=l.length;for(var c in t)(e||jx.call(t,c))&&!(o&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||aw(c,a)))&&l.push(c);return l}function Eg(t,e){return function(n){return t(e(n))}}var zx=Eg(Object.keys,Object),qx=Object.prototype,Ux=qx.hasOwnProperty;function Qx(t){if(!vf(t))return zx(t);var e=[];for(var n in Object(t))Ux.call(t,n)&&n!="constructor"&&e.push(n);return e}function xa(t){return Og(t)?Tg(t):Qx(t)}function Kx(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var Xx=Object.prototype,Gx=Xx.hasOwnProperty;function Yx(t){if(!Qi(t))return Kx(t);var e=vf(t),n=[];for(var i in t)i=="constructor"&&(e||!Gx.call(t,i))||n.push(i);return n}function xf(t){return Og(t)?Tg(t,!0):Yx(t)}var Pg=Eg(Object.getPrototypeOf,Object);function an(){if(!arguments.length)return[];var t=arguments[0];return Ki(t)?t:[t]}function Jx(){this.__data__=new ff,this.size=0}function Zx(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function eS(t){return this.__data__.get(t)}function tS(t){return this.__data__.has(t)}var nS=200;function iS(t,e){var n=this.__data__;if(n instanceof ff){var i=n.__data__;if(!Pl||i.length<nS-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new fg(i)}return n.set(t,e),this.size=n.size,this}function Mn(t){var e=this.__data__=new ff(t);this.size=e.size}Mn.prototype.clear=Jx;Mn.prototype.delete=Zx;Mn.prototype.get=eS;Mn.prototype.has=tS;Mn.prototype.set=iS;function rS(t,e){return t&&wa(e,xa(e),t)}function sS(t,e){return t&&wa(e,xf(e),t)}var Mg=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Kh=Mg&&typeof module=="object"&&module&&!module.nodeType&&module,oS=Kh&&Kh.exports===Mg,Xh=oS?Si.Buffer:void 0,Gh=Xh?Xh.allocUnsafe:void 0;function lS(t,e){if(e)return t.slice();var n=t.length,i=Gh?Gh(n):new t.constructor(n);return t.copy(i),i}function aS(t,e){for(var n=-1,i=t==null?0:t.length,r=0,s=[];++n<i;){var o=t[n];e(o,n,t)&&(s[r++]=o)}return s}function Rg(){return[]}var cS=Object.prototype,uS=cS.propertyIsEnumerable,Yh=Object.getOwnPropertySymbols,Sf=Yh?function(t){return t==null?[]:(t=Object(t),aS(Yh(t),function(e){return uS.call(t,e)}))}:Rg;function fS(t,e){return wa(t,Sf(t),e)}var hS=Object.getOwnPropertySymbols,Dg=hS?function(t){for(var e=[];t;)hg(e,Sf(t)),t=Pg(t);return e}:Rg;function dS(t,e){return wa(t,Dg(t),e)}function Lg(t,e,n){var i=e(t);return Ki(t)?i:hg(i,n(t))}function $c(t){return Lg(t,xa,Sf)}function pS(t){return Lg(t,xf,Dg)}var Vc=ma(Si,"DataView"),Hc=ma(Si,"Promise"),Wc=ma(Si,"Set"),Jh="[object Map]",mS="[object Object]",Zh="[object Promise]",ed="[object Set]",td="[object WeakMap]",nd="[object DataView]",gS=Kr(Vc),yS=Kr(Pl),bS=Kr(Hc),vS=Kr(Wc),wS=Kr(_c),ln=uf;(Vc&&ln(new Vc(new ArrayBuffer(1)))!=nd||Pl&&ln(new Pl)!=Jh||Hc&&ln(Hc.resolve())!=Zh||Wc&&ln(new Wc)!=ed||_c&&ln(new _c)!=td)&&(ln=function(t){var e=uf(t),n=e==mS?t.constructor:void 0,i=n?Kr(n):"";if(i)switch(i){case gS:return nd;case yS:return Jh;case bS:return Zh;case vS:return ed;case wS:return td}return e});var xS=Object.prototype,SS=xS.hasOwnProperty;function OS(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&SS.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var Dl=Si.Uint8Array;function Of(t){var e=new t.constructor(t.byteLength);return new Dl(e).set(new Dl(t)),e}function kS(t,e){var n=e?Of(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var CS=/\w*$/;function AS(t){var e=new t.constructor(t.source,CS.exec(t));return e.lastIndex=t.lastIndex,e}var id=Ml?Ml.prototype:void 0,rd=id?id.valueOf:void 0;function TS(t){return rd?Object(rd.call(t)):{}}function ES(t,e){var n=e?Of(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var PS="[object Boolean]",MS="[object Date]",RS="[object Map]",DS="[object Number]",LS="[object RegExp]",BS="[object Set]",IS="[object String]",NS="[object Symbol]",FS="[object ArrayBuffer]",_S="[object DataView]",$S="[object Float32Array]",VS="[object Float64Array]",HS="[object Int8Array]",WS="[object Int16Array]",jS="[object Int32Array]",zS="[object Uint8Array]",qS="[object Uint8ClampedArray]",US="[object Uint16Array]",QS="[object Uint32Array]";function KS(t,e,n){var i=t.constructor;switch(e){case FS:return Of(t);case PS:case MS:return new i(+t);case _S:return kS(t,n);case $S:case VS:case HS:case WS:case jS:case zS:case qS:case US:case QS:return ES(t,n);case RS:return new i;case DS:case IS:return new i(t);case LS:return AS(t);case BS:return new i;case NS:return TS(t)}}function XS(t){return typeof t.constructor=="function"&&!vf(t)?lx(Pg(t)):{}}var GS="[object Map]";function YS(t){return Ns(t)&&ln(t)==GS}var sd=Dr&&Dr.isMap,JS=sd?wf(sd):YS,ZS="[object Set]";function eO(t){return Ns(t)&&ln(t)==ZS}var od=Dr&&Dr.isSet,tO=od?wf(od):eO,nO=1,iO=2,rO=4,Bg="[object Arguments]",sO="[object Array]",oO="[object Boolean]",lO="[object Date]",aO="[object Error]",Ig="[object Function]",cO="[object GeneratorFunction]",uO="[object Map]",fO="[object Number]",Ng="[object Object]",hO="[object RegExp]",dO="[object Set]",pO="[object String]",mO="[object Symbol]",gO="[object WeakMap]",yO="[object ArrayBuffer]",bO="[object DataView]",vO="[object Float32Array]",wO="[object Float64Array]",xO="[object Int8Array]",SO="[object Int16Array]",OO="[object Int32Array]",kO="[object Uint8Array]",CO="[object Uint8ClampedArray]",AO="[object Uint16Array]",TO="[object Uint32Array]",Ce={};Ce[Bg]=Ce[sO]=Ce[yO]=Ce[bO]=Ce[oO]=Ce[lO]=Ce[vO]=Ce[wO]=Ce[xO]=Ce[SO]=Ce[OO]=Ce[uO]=Ce[fO]=Ce[Ng]=Ce[hO]=Ce[dO]=Ce[pO]=Ce[mO]=Ce[kO]=Ce[CO]=Ce[AO]=Ce[TO]=!0;Ce[aO]=Ce[Ig]=Ce[gO]=!1;function hl(t,e,n,i,r,s){var o,l=e&nO,a=e&iO,c=e&rO;if(o!==void 0)return o;if(!Qi(t))return t;var u=Ki(t);if(u){if(o=OS(t),!l)return ax(t,o)}else{var f=ln(t),h=f==Ig||f==cO;if(Rl(t))return lS(t,l);if(f==Ng||f==Bg||h&&!r){if(o=a||h?{}:XS(t),!l)return a?dS(t,sS(o,t)):fS(t,rS(o,t))}else{if(!Ce[f])return r?t:{};o=KS(t,f,l)}}s||(s=new Mn);var d=s.get(t);if(d)return d;s.set(t,o),tO(t)?t.forEach(function(y){o.add(hl(y,e,n,y,t,s))}):JS(t)&&t.forEach(function(y,g){o.set(g,hl(y,e,n,g,t,s))});var p=c?a?pS:$c:a?xf:xa,m=u?void 0:p(t);return cx(m||t,function(y,g){m&&(g=y,y=t[g]),cg(o,g,hl(y,e,n,g,t,s))}),o}var EO=4;function ld(t){return hl(t,EO)}var PO="__lodash_hash_undefined__";function MO(t){return this.__data__.set(t,PO),this}function RO(t){return this.__data__.has(t)}function Ll(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new fg;++e<n;)this.add(t[e])}Ll.prototype.add=Ll.prototype.push=MO;Ll.prototype.has=RO;function DO(t,e){for(var n=-1,i=t==null?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function LO(t,e){return t.has(e)}var BO=1,IO=2;function Fg(t,e,n,i,r,s){var o=n&BO,l=t.length,a=e.length;if(l!=a&&!(o&&a>l))return!1;var c=s.get(t),u=s.get(e);if(c&&u)return c==e&&u==t;var f=-1,h=!0,d=n&IO?new Ll:void 0;for(s.set(t,e),s.set(e,t);++f<l;){var p=t[f],m=e[f];if(i)var y=o?i(m,p,f,e,t,s):i(p,m,f,t,e,s);if(y!==void 0){if(y)continue;h=!1;break}if(d){if(!DO(e,function(g,v){if(!LO(d,v)&&(p===g||r(p,g,n,i,s)))return d.push(v)})){h=!1;break}}else if(!(p===m||r(p,m,n,i,s))){h=!1;break}}return s.delete(t),s.delete(e),h}function NO(t){var e=-1,n=Array(t.size);return t.forEach(function(i,r){n[++e]=[r,i]}),n}function FO(t){var e=-1,n=Array(t.size);return t.forEach(function(i){n[++e]=i}),n}var _O=1,$O=2,VO="[object Boolean]",HO="[object Date]",WO="[object Error]",jO="[object Map]",zO="[object Number]",qO="[object RegExp]",UO="[object Set]",QO="[object String]",KO="[object Symbol]",XO="[object ArrayBuffer]",GO="[object DataView]",ad=Ml?Ml.prototype:void 0,Ya=ad?ad.valueOf:void 0;function YO(t,e,n,i,r,s,o){switch(n){case GO:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case XO:return!(t.byteLength!=e.byteLength||!s(new Dl(t),new Dl(e)));case VO:case HO:case zO:return cw(+t,+e);case WO:return t.name==e.name&&t.message==e.message;case qO:case QO:return t==e+"";case jO:var l=NO;case UO:var a=i&_O;if(l||(l=FO),t.size!=e.size&&!a)return!1;var c=o.get(t);if(c)return c==e;i|=$O,o.set(t,e);var u=Fg(l(t),l(e),i,r,s,o);return o.delete(t),u;case KO:if(Ya)return Ya.call(t)==Ya.call(e)}return!1}var JO=1,ZO=Object.prototype,ek=ZO.hasOwnProperty;function tk(t,e,n,i,r,s){var o=n&JO,l=$c(t),a=l.length,c=$c(e),u=c.length;if(a!=u&&!o)return!1;for(var f=a;f--;){var h=l[f];if(!(o?h in e:ek.call(e,h)))return!1}var d=s.get(t),p=s.get(e);if(d&&p)return d==e&&p==t;var m=!0;s.set(t,e),s.set(e,t);for(var y=o;++f<a;){h=l[f];var g=t[h],v=e[h];if(i)var x=o?i(v,g,h,e,t,s):i(g,v,h,t,e,s);if(!(x===void 0?g===v||r(g,v,n,i,s):x)){m=!1;break}y||(y=h=="constructor")}if(m&&!y){var S=t.constructor,b=e.constructor;S!=b&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof b=="function"&&b instanceof b)&&(m=!1)}return s.delete(t),s.delete(e),m}var nk=1,cd="[object Arguments]",ud="[object Array]",Fo="[object Object]",ik=Object.prototype,fd=ik.hasOwnProperty;function rk(t,e,n,i,r,s){var o=Ki(t),l=Ki(e),a=o?ud:ln(t),c=l?ud:ln(e);a=a==cd?Fo:a,c=c==cd?Fo:c;var u=a==Fo,f=c==Fo,h=a==c;if(h&&Rl(t)){if(!Rl(e))return!1;o=!0,u=!1}if(h&&!u)return s||(s=new Mn),o||Ag(t)?Fg(t,e,n,i,r,s):YO(t,e,a,n,i,r,s);if(!(n&nk)){var d=u&&fd.call(t,"__wrapped__"),p=f&&fd.call(e,"__wrapped__");if(d||p){var m=d?t.value():t,y=p?e.value():e;return s||(s=new Mn),r(m,y,n,i,s)}}return h?(s||(s=new Mn),tk(t,e,n,i,r,s)):!1}function Sa(t,e,n,i,r){return t===e?!0:t==null||e==null||!Ns(t)&&!Ns(e)?t!==t&&e!==e:rk(t,e,n,i,Sa,r)}var sk=1,ok=2;function lk(t,e,n,i){var r=n.length,s=r;if(t==null)return!s;for(t=Object(t);r--;){var o=n[r];if(o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++r<s;){o=n[r];var l=o[0],a=t[l],c=o[1];if(o[2]){if(a===void 0&&!(l in t))return!1}else{var u=new Mn,f;if(!(f===void 0?Sa(c,a,sk|ok,i,u):f))return!1}}return!0}function _g(t){return t===t&&!Qi(t)}function ak(t){for(var e=xa(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,_g(r)]}return e}function $g(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function ck(t){var e=ak(t);return e.length==1&&e[0][2]?$g(e[0][0],e[0][1]):function(n){return n===t||lk(n,t,e)}}var uk=1,fk=2;function hk(t,e){return dg(t)&&_g(e)?$g(pg(t),e):function(n){var i=Li(n,t);return i===void 0&&i===e?uw(n,t):Sa(e,i,uk|fk)}}function dk(t){return function(e){return e==null?void 0:e[t]}}function pk(t){return function(e){return fw(e,t)}}function mk(t){return dg(t)?dk(pg(t)):pk(t)}function gk(t){return typeof t=="function"?t:t==null?hw:typeof t=="object"?Ki(t)?hk(t[0],t[1]):ck(t):mk(t)}var Ja=function(){return Si.Date.now()},yk="Expected a function",bk=Math.max,vk=Math.min;function wk(t,e,n){var i,r,s,o,l,a,c=0,u=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(yk);e=jh(e)||0,Qi(n)&&(u=!!n.leading,f="maxWait"in n,s=f?bk(jh(n.maxWait)||0,e):s,h="trailing"in n?!!n.trailing:h);function d(O){var k=i,R=r;return i=r=void 0,c=O,o=t.apply(R,k),o}function p(O){return c=O,l=setTimeout(g,e),u?d(O):o}function m(O){var k=O-a,R=O-c,N=e-k;return f?vk(N,s-R):N}function y(O){var k=O-a,R=O-c;return a===void 0||k>=e||k<0||f&&R>=s}function g(){var O=Ja();if(y(O))return v(O);l=setTimeout(g,m(O))}function v(O){return l=void 0,h&&i?d(O):(i=r=void 0,o)}function x(){l!==void 0&&clearTimeout(l),c=0,i=a=r=l=void 0}function S(){return l===void 0?o:v(Ja())}function b(){var O=Ja(),k=y(O);if(i=arguments,r=this,a=O,k){if(l===void 0)return p(a);if(f)return clearTimeout(l),l=setTimeout(g,e),d(a)}return l===void 0&&(l=setTimeout(g,e)),o}return b.cancel=x,b.flush=S,b}function xk(t,e,n){var i=t==null?0:t.length;if(!i)return-1;var r=i-1;return ux(t,gk(e),r)}function dl(t,e){return Sa(t,e)}function Sk(t){return t===void 0}const Ok=(t="")=>t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),kk=mg({type:ae(Boolean),default:null}),Ck=mg({type:ae(Function)}),Vg=t=>{const e=`update:${t}`,n=`onUpdate:${t}`,i=[e],r={[t]:kk,[n]:Ck};return{useModelToggle:({indicator:o,toggleReason:l,shouldHideWhenRouteChanges:a,shouldProceed:c,onShow:u,onHide:f})=>{const h=ga(),{emit:d}=h,p=h.props,m=M(()=>$t(p[n])),y=M(()=>p[t]===null),g=k=>{o.value!==!0&&(o.value=!0,l&&(l.value=k),$t(u)&&u(k))},v=k=>{o.value!==!1&&(o.value=!1,l&&(l.value=k),$t(f)&&f(k))},x=k=>{if(p.disabled===!0||$t(c)&&!c())return;const R=m.value&&ui;R&&d(e,!0),(y.value||!R)&&g(k)},S=k=>{if(p.disabled===!0||!ui)return;const R=m.value&&ui;R&&d(e,!1),(y.value||!R)&&v(k)},b=k=>{En(k)&&(p.disabled&&k?m.value&&d(e,!1):o.value!==k&&(k?g():v()))},O=()=>{o.value?S():x()};return re(()=>p[t],b),a&&h.appContext.config.globalProperties.$route!==void 0&&re(()=>({...h.proxy.$route}),()=>{a.value&&o.value&&S()}),pt(()=>{b(p[t])}),{hide:S,show:x,toggle:O,hasUpdateHandler:m}},useModelToggleProps:r,useModelToggleEmits:i}};Vg("modelValue");var Dt="top",en="bottom",tn="right",Lt="left",kf="auto",mo=[Dt,en,tn,Lt],Lr="start",$s="end",Ak="clippingParents",Hg="viewport",cs="popper",Tk="reference",hd=mo.reduce(function(t,e){return t.concat([e+"-"+Lr,e+"-"+$s])},[]),Oa=[].concat(mo,[kf]).reduce(function(t,e){return t.concat([e,e+"-"+Lr,e+"-"+$s])},[]),Ek="beforeRead",Pk="read",Mk="afterRead",Rk="beforeMain",Dk="main",Lk="afterMain",Bk="beforeWrite",Ik="write",Nk="afterWrite",Fk=[Ek,Pk,Mk,Rk,Dk,Lk,Bk,Ik,Nk];function Bn(t){return t?(t.nodeName||"").toLowerCase():null}function pn(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Br(t){var e=pn(t).Element;return t instanceof e||t instanceof Element}function Gt(t){var e=pn(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Cf(t){if(typeof ShadowRoot>"u")return!1;var e=pn(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function _k(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},r=e.attributes[n]||{},s=e.elements[n];!Gt(s)||!Bn(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(o){var l=r[o];l===!1?s.removeAttribute(o):s.setAttribute(o,l===!0?"":l)}))})}function $k(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],s=e.attributes[i]||{},o=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]),l=o.reduce(function(a,c){return a[c]="",a},{});!Gt(r)||!Bn(r)||(Object.assign(r.style,l),Object.keys(s).forEach(function(a){r.removeAttribute(a)}))})}}var Wg={name:"applyStyles",enabled:!0,phase:"write",fn:_k,effect:$k,requires:["computeStyles"]};function Rn(t){return t.split("-")[0]}var Wi=Math.max,Bl=Math.min,Ir=Math.round;function Nr(t,e){e===void 0&&(e=!1);var n=t.getBoundingClientRect(),i=1,r=1;if(Gt(t)&&e){var s=t.offsetHeight,o=t.offsetWidth;o>0&&(i=Ir(n.width)/o||1),s>0&&(r=Ir(n.height)/s||1)}return{width:n.width/i,height:n.height/r,top:n.top/r,right:n.right/i,bottom:n.bottom/r,left:n.left/i,x:n.left/i,y:n.top/r}}function Af(t){var e=Nr(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function jg(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Cf(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Un(t){return pn(t).getComputedStyle(t)}function Vk(t){return["table","td","th"].indexOf(Bn(t))>=0}function Oi(t){return((Br(t)?t.ownerDocument:t.document)||window.document).documentElement}function ka(t){return Bn(t)==="html"?t:t.assignedSlot||t.parentNode||(Cf(t)?t.host:null)||Oi(t)}function dd(t){return!Gt(t)||Un(t).position==="fixed"?null:t.offsetParent}function Hk(t){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,n=navigator.userAgent.indexOf("Trident")!==-1;if(n&&Gt(t)){var i=Un(t);if(i.position==="fixed")return null}var r=ka(t);for(Cf(r)&&(r=r.host);Gt(r)&&["html","body"].indexOf(Bn(r))<0;){var s=Un(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function go(t){for(var e=pn(t),n=dd(t);n&&Vk(n)&&Un(n).position==="static";)n=dd(n);return n&&(Bn(n)==="html"||Bn(n)==="body"&&Un(n).position==="static")?e:n||Hk(t)||e}function Tf(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Ts(t,e,n){return Wi(t,Bl(e,n))}function Wk(t,e,n){var i=Ts(t,e,n);return i>n?n:i}function zg(){return{top:0,right:0,bottom:0,left:0}}function qg(t){return Object.assign({},zg(),t)}function Ug(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var jk=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,qg(typeof t!="number"?t:Ug(t,mo))};function zk(t){var e,n=t.state,i=t.name,r=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,l=Rn(n.placement),a=Tf(l),c=[Lt,tn].indexOf(l)>=0,u=c?"height":"width";if(!(!s||!o)){var f=jk(r.padding,n),h=Af(s),d=a==="y"?Dt:Lt,p=a==="y"?en:tn,m=n.rects.reference[u]+n.rects.reference[a]-o[a]-n.rects.popper[u],y=o[a]-n.rects.reference[a],g=go(s),v=g?a==="y"?g.clientHeight||0:g.clientWidth||0:0,x=m/2-y/2,S=f[d],b=v-h[u]-f[p],O=v/2-h[u]/2+x,k=Ts(S,O,b),R=a;n.modifiersData[i]=(e={},e[R]=k,e.centerOffset=k-O,e)}}function qk(t){var e=t.state,n=t.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||!jg(e.elements.popper,r)||(e.elements.arrow=r))}var Uk={name:"arrow",enabled:!0,phase:"main",fn:zk,effect:qk,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Fr(t){return t.split("-")[1]}var Qk={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Kk(t){var e=t.x,n=t.y,i=window,r=i.devicePixelRatio||1;return{x:Ir(e*r)/r||0,y:Ir(n*r)/r||0}}function pd(t){var e,n=t.popper,i=t.popperRect,r=t.placement,s=t.variation,o=t.offsets,l=t.position,a=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,f=t.isFixed,h=o.x,d=h===void 0?0:h,p=o.y,m=p===void 0?0:p,y=typeof u=="function"?u({x:d,y:m}):{x:d,y:m};d=y.x,m=y.y;var g=o.hasOwnProperty("x"),v=o.hasOwnProperty("y"),x=Lt,S=Dt,b=window;if(c){var O=go(n),k="clientHeight",R="clientWidth";if(O===pn(n)&&(O=Oi(n),Un(O).position!=="static"&&l==="absolute"&&(k="scrollHeight",R="scrollWidth")),O=O,r===Dt||(r===Lt||r===tn)&&s===$s){S=en;var N=f&&O===b&&b.visualViewport?b.visualViewport.height:O[k];m-=N-i.height,m*=a?1:-1}if(r===Lt||(r===Dt||r===en)&&s===$s){x=tn;var I=f&&O===b&&b.visualViewport?b.visualViewport.width:O[R];d-=I-i.width,d*=a?1:-1}}var $=Object.assign({position:l},c&&Qk),L=u===!0?Kk({x:d,y:m}):{x:d,y:m};if(d=L.x,m=L.y,a){var V;return Object.assign({},$,(V={},V[S]=v?"0":"",V[x]=g?"0":"",V.transform=(b.devicePixelRatio||1)<=1?"translate("+d+"px, "+m+"px)":"translate3d("+d+"px, "+m+"px, 0)",V))}return Object.assign({},$,(e={},e[S]=v?m+"px":"",e[x]=g?d+"px":"",e.transform="",e))}function Xk(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=i===void 0?!0:i,s=n.adaptive,o=s===void 0?!0:s,l=n.roundOffsets,a=l===void 0?!0:l,c={placement:Rn(e.placement),variation:Fr(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,pd(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:a})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,pd(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var Qg={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Xk,data:{}},_o={passive:!0};function Gk(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,s=r===void 0?!0:r,o=i.resize,l=o===void 0?!0:o,a=pn(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,_o)}),l&&a.addEventListener("resize",n.update,_o),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,_o)}),l&&a.removeEventListener("resize",n.update,_o)}}var Kg={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Gk,data:{}},Yk={left:"right",right:"left",bottom:"top",top:"bottom"};function pl(t){return t.replace(/left|right|bottom|top/g,function(e){return Yk[e]})}var Jk={start:"end",end:"start"};function md(t){return t.replace(/start|end/g,function(e){return Jk[e]})}function Ef(t){var e=pn(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function Pf(t){return Nr(Oi(t)).left+Ef(t).scrollLeft}function Zk(t){var e=pn(t),n=Oi(t),i=e.visualViewport,r=n.clientWidth,s=n.clientHeight,o=0,l=0;return i&&(r=i.width,s=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=i.offsetLeft,l=i.offsetTop)),{width:r,height:s,x:o+Pf(t),y:l}}function eC(t){var e,n=Oi(t),i=Ef(t),r=(e=t.ownerDocument)==null?void 0:e.body,s=Wi(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=Wi(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),l=-i.scrollLeft+Pf(t),a=-i.scrollTop;return Un(r||n).direction==="rtl"&&(l+=Wi(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:l,y:a}}function Mf(t){var e=Un(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function Xg(t){return["html","body","#document"].indexOf(Bn(t))>=0?t.ownerDocument.body:Gt(t)&&Mf(t)?t:Xg(ka(t))}function Es(t,e){var n;e===void 0&&(e=[]);var i=Xg(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),s=pn(i),o=r?[s].concat(s.visualViewport||[],Mf(i)?i:[]):i,l=e.concat(o);return r?l:l.concat(Es(ka(o)))}function jc(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function tC(t){var e=Nr(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}function gd(t,e){return e===Hg?jc(Zk(t)):Br(e)?tC(e):jc(eC(Oi(t)))}function nC(t){var e=Es(ka(t)),n=["absolute","fixed"].indexOf(Un(t).position)>=0,i=n&&Gt(t)?go(t):t;return Br(i)?e.filter(function(r){return Br(r)&&jg(r,i)&&Bn(r)!=="body"}):[]}function iC(t,e,n){var i=e==="clippingParents"?nC(t):[].concat(e),r=[].concat(i,[n]),s=r[0],o=r.reduce(function(l,a){var c=gd(t,a);return l.top=Wi(c.top,l.top),l.right=Bl(c.right,l.right),l.bottom=Bl(c.bottom,l.bottom),l.left=Wi(c.left,l.left),l},gd(t,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Gg(t){var e=t.reference,n=t.element,i=t.placement,r=i?Rn(i):null,s=i?Fr(i):null,o=e.x+e.width/2-n.width/2,l=e.y+e.height/2-n.height/2,a;switch(r){case Dt:a={x:o,y:e.y-n.height};break;case en:a={x:o,y:e.y+e.height};break;case tn:a={x:e.x+e.width,y:l};break;case Lt:a={x:e.x-n.width,y:l};break;default:a={x:e.x,y:e.y}}var c=r?Tf(r):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case Lr:a[c]=a[c]-(e[u]/2-n[u]/2);break;case $s:a[c]=a[c]+(e[u]/2-n[u]/2);break}}return a}function Vs(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=i===void 0?t.placement:i,s=n.boundary,o=s===void 0?Ak:s,l=n.rootBoundary,a=l===void 0?Hg:l,c=n.elementContext,u=c===void 0?cs:c,f=n.altBoundary,h=f===void 0?!1:f,d=n.padding,p=d===void 0?0:d,m=qg(typeof p!="number"?p:Ug(p,mo)),y=u===cs?Tk:cs,g=t.rects.popper,v=t.elements[h?y:u],x=iC(Br(v)?v:v.contextElement||Oi(t.elements.popper),o,a),S=Nr(t.elements.reference),b=Gg({reference:S,element:g,strategy:"absolute",placement:r}),O=jc(Object.assign({},g,b)),k=u===cs?O:S,R={top:x.top-k.top+m.top,bottom:k.bottom-x.bottom+m.bottom,left:x.left-k.left+m.left,right:k.right-x.right+m.right},N=t.modifiersData.offset;if(u===cs&&N){var I=N[r];Object.keys(R).forEach(function($){var L=[tn,en].indexOf($)>=0?1:-1,V=[Dt,en].indexOf($)>=0?"y":"x";R[$]+=I[V]*L})}return R}function rC(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=n.boundary,s=n.rootBoundary,o=n.padding,l=n.flipVariations,a=n.allowedAutoPlacements,c=a===void 0?Oa:a,u=Fr(i),f=u?l?hd:hd.filter(function(p){return Fr(p)===u}):mo,h=f.filter(function(p){return c.indexOf(p)>=0});h.length===0&&(h=f);var d=h.reduce(function(p,m){return p[m]=Vs(t,{placement:m,boundary:r,rootBoundary:s,padding:o})[Rn(m)],p},{});return Object.keys(d).sort(function(p,m){return d[p]-d[m]})}function sC(t){if(Rn(t)===kf)return[];var e=pl(t);return[md(t),e,md(e)]}function oC(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,s=r===void 0?!0:r,o=n.altAxis,l=o===void 0?!0:o,a=n.fallbackPlacements,c=n.padding,u=n.boundary,f=n.rootBoundary,h=n.altBoundary,d=n.flipVariations,p=d===void 0?!0:d,m=n.allowedAutoPlacements,y=e.options.placement,g=Rn(y),v=g===y,x=a||(v||!p?[pl(y)]:sC(y)),S=[y].concat(x).reduce(function(He,_e){return He.concat(Rn(_e)===kf?rC(e,{placement:_e,boundary:u,rootBoundary:f,padding:c,flipVariations:p,allowedAutoPlacements:m}):_e)},[]),b=e.rects.reference,O=e.rects.popper,k=new Map,R=!0,N=S[0],I=0;I<S.length;I++){var $=S[I],L=Rn($),V=Fr($)===Lr,q=[Dt,en].indexOf(L)>=0,P=q?"width":"height",E=Vs(e,{placement:$,boundary:u,rootBoundary:f,altBoundary:h,padding:c}),H=q?V?tn:Lt:V?en:Dt;b[P]>O[P]&&(H=pl(H));var te=pl(H),J=[];if(s&&J.push(E[L]<=0),l&&J.push(E[H]<=0,E[te]<=0),J.every(function(He){return He})){N=$,R=!1;break}k.set($,J)}if(R)for(var ye=p?3:1,Ne=function(He){var _e=S.find(function(ut){var xe=k.get(ut);if(xe)return xe.slice(0,He).every(function(K){return K})});if(_e)return N=_e,"break"},we=ye;we>0;we--){var fe=Ne(we);if(fe==="break")break}e.placement!==N&&(e.modifiersData[i]._skip=!0,e.placement=N,e.reset=!0)}}var lC={name:"flip",enabled:!0,phase:"main",fn:oC,requiresIfExists:["offset"],data:{_skip:!1}};function yd(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function bd(t){return[Dt,tn,en,Lt].some(function(e){return t[e]>=0})}function aC(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,s=e.modifiersData.preventOverflow,o=Vs(e,{elementContext:"reference"}),l=Vs(e,{altBoundary:!0}),a=yd(o,i),c=yd(l,r,s),u=bd(a),f=bd(c);e.modifiersData[n]={referenceClippingOffsets:a,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}var cC={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:aC};function uC(t,e,n){var i=Rn(t),r=[Lt,Dt].indexOf(i)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],l=s[1];return o=o||0,l=(l||0)*r,[Lt,tn].indexOf(i)>=0?{x:l,y:o}:{x:o,y:l}}function fC(t){var e=t.state,n=t.options,i=t.name,r=n.offset,s=r===void 0?[0,0]:r,o=Oa.reduce(function(u,f){return u[f]=uC(f,e.rects,s),u},{}),l=o[e.placement],a=l.x,c=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=a,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=o}var hC={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:fC};function dC(t){var e=t.state,n=t.name;e.modifiersData[n]=Gg({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var Yg={name:"popperOffsets",enabled:!0,phase:"read",fn:dC,data:{}};function pC(t){return t==="x"?"y":"x"}function mC(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,s=r===void 0?!0:r,o=n.altAxis,l=o===void 0?!1:o,a=n.boundary,c=n.rootBoundary,u=n.altBoundary,f=n.padding,h=n.tether,d=h===void 0?!0:h,p=n.tetherOffset,m=p===void 0?0:p,y=Vs(e,{boundary:a,rootBoundary:c,padding:f,altBoundary:u}),g=Rn(e.placement),v=Fr(e.placement),x=!v,S=Tf(g),b=pC(S),O=e.modifiersData.popperOffsets,k=e.rects.reference,R=e.rects.popper,N=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,I=typeof N=="number"?{mainAxis:N,altAxis:N}:Object.assign({mainAxis:0,altAxis:0},N),$=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,L={x:0,y:0};if(O){if(s){var V,q=S==="y"?Dt:Lt,P=S==="y"?en:tn,E=S==="y"?"height":"width",H=O[S],te=H+y[q],J=H-y[P],ye=d?-R[E]/2:0,Ne=v===Lr?k[E]:R[E],we=v===Lr?-R[E]:-k[E],fe=e.elements.arrow,He=d&&fe?Af(fe):{width:0,height:0},_e=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:zg(),ut=_e[q],xe=_e[P],K=Ts(0,k[E],He[E]),be=x?k[E]/2-ye-K-ut-I.mainAxis:Ne-K-ut-I.mainAxis,Fe=x?-k[E]/2+ye+K+xe+I.mainAxis:we+K+xe+I.mainAxis,Ee=e.elements.arrow&&go(e.elements.arrow),Ot=Ee?S==="y"?Ee.clientTop||0:Ee.clientLeft||0:0,sn=(V=$==null?void 0:$[S])!=null?V:0,qa=H+be-sn-Ot,Ua=H+Fe-sn,Po=Ts(d?Bl(te,qa):te,H,d?Wi(J,Ua):J);O[S]=Po,L[S]=Po-H}if(l){var Ci,Mo=S==="x"?Dt:Lt,rr=S==="x"?en:tn,yn=O[b],sr=b==="y"?"height":"width",Ro=yn+y[Mo],ns=yn-y[rr],is=[Dt,Lt].indexOf(g)!==-1,or=(Ci=$==null?void 0:$[b])!=null?Ci:0,rs=is?Ro:yn-k[sr]-R[sr]-or+I.altAxis,ss=is?yn+k[sr]+R[sr]-or-I.altAxis:ns,os=d&&is?Wk(rs,yn,ss):Ts(d?rs:Ro,yn,d?ss:ns);O[b]=os,L[b]=os-yn}e.modifiersData[i]=L}}var gC={name:"preventOverflow",enabled:!0,phase:"main",fn:mC,requiresIfExists:["offset"]};function yC(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function bC(t){return t===pn(t)||!Gt(t)?Ef(t):yC(t)}function vC(t){var e=t.getBoundingClientRect(),n=Ir(e.width)/t.offsetWidth||1,i=Ir(e.height)/t.offsetHeight||1;return n!==1||i!==1}function wC(t,e,n){n===void 0&&(n=!1);var i=Gt(e),r=Gt(e)&&vC(e),s=Oi(e),o=Nr(t,r),l={scrollLeft:0,scrollTop:0},a={x:0,y:0};return(i||!i&&!n)&&((Bn(e)!=="body"||Mf(s))&&(l=bC(e)),Gt(e)?(a=Nr(e,!0),a.x+=e.clientLeft,a.y+=e.clientTop):s&&(a.x=Pf(s))),{x:o.left+l.scrollLeft-a.x,y:o.top+l.scrollTop-a.y,width:o.width,height:o.height}}function xC(t){var e=new Map,n=new Set,i=[];t.forEach(function(s){e.set(s.name,s)});function r(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(l){if(!n.has(l)){var a=e.get(l);a&&r(a)}}),i.push(s)}return t.forEach(function(s){n.has(s.name)||r(s)}),i}function SC(t){var e=xC(t);return Fk.reduce(function(n,i){return n.concat(e.filter(function(r){return r.phase===i}))},[])}function OC(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function kC(t){var e=t.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var vd={placement:"bottom",modifiers:[],strategy:"absolute"};function wd(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Rf(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,r=e.defaultOptions,s=r===void 0?vd:r;return function(o,l,a){a===void 0&&(a=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},vd,s),modifiersData:{},elements:{reference:o,popper:l},attributes:{},styles:{}},u=[],f=!1,h={state:c,setOptions:function(m){var y=typeof m=="function"?m(c.options):m;p(),c.options=Object.assign({},s,c.options,y),c.scrollParents={reference:Br(o)?Es(o):o.contextElement?Es(o.contextElement):[],popper:Es(l)};var g=SC(kC([].concat(i,c.options.modifiers)));return c.orderedModifiers=g.filter(function(v){return v.enabled}),d(),h.update()},forceUpdate:function(){if(!f){var m=c.elements,y=m.reference,g=m.popper;if(wd(y,g)){c.rects={reference:wC(y,go(g),c.options.strategy==="fixed"),popper:Af(g)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(R){return c.modifiersData[R.name]=Object.assign({},R.data)});for(var v=0;v<c.orderedModifiers.length;v++){if(c.reset===!0){c.reset=!1,v=-1;continue}var x=c.orderedModifiers[v],S=x.fn,b=x.options,O=b===void 0?{}:b,k=x.name;typeof S=="function"&&(c=S({state:c,options:O,name:k,instance:h})||c)}}}},update:OC(function(){return new Promise(function(m){h.forceUpdate(),m(c)})}),destroy:function(){p(),f=!0}};if(!wd(o,l))return h;h.setOptions(a).then(function(m){!f&&a.onFirstUpdate&&a.onFirstUpdate(m)});function d(){c.orderedModifiers.forEach(function(m){var y=m.name,g=m.options,v=g===void 0?{}:g,x=m.effect;if(typeof x=="function"){var S=x({state:c,name:y,instance:h,options:v}),b=function(){};u.push(S||b)}})}function p(){u.forEach(function(m){return m()}),u=[]}return h}}Rf();var CC=[Kg,Yg,Qg,Wg];Rf({defaultModifiers:CC});var AC=[Kg,Yg,Qg,Wg,hC,lC,gC,Uk,cC],TC=Rf({defaultModifiers:AC});const EC=(t,e,n={})=>{const i={name:"updateState",enabled:!0,phase:"write",fn:({state:a})=>{const c=PC(a);Object.assign(o.value,c)},requires:["computeStyles"]},r=M(()=>{const{onFirstUpdate:a,placement:c,strategy:u,modifiers:f}=w(n);return{onFirstUpdate:a,placement:c||"bottom",strategy:u||"absolute",modifiers:[...f||[],i,{name:"applyStyles",enabled:!1}]}}),s=fl(),o=j({styles:{popper:{position:w(r).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),l=()=>{s.value&&(s.value.destroy(),s.value=void 0)};return re(r,a=>{const c=w(s);c&&c.setOptions(a)},{deep:!0}),re([t,e],([a,c])=>{l(),!(!a||!c)&&(s.value=TC(a,c,w(r)))}),Nn(()=>{l()}),{state:M(()=>{var a;return{...((a=w(s))==null?void 0:a.state)||{}}}),styles:M(()=>w(o).styles),attributes:M(()=>w(o).attributes),update:()=>{var a;return(a=w(s))==null?void 0:a.update()},forceUpdate:()=>{var a;return(a=w(s))==null?void 0:a.forceUpdate()},instanceRef:M(()=>w(s))}};function PC(t){const e=Object.keys(t.elements),n=Nh(e.map(r=>[r,t.styles[r]||{}])),i=Nh(e.map(r=>[r,t.attributes[r]]));return{styles:n,attributes:i}}function xd(){let t;const e=(i,r)=>{n(),t=window.setTimeout(i,r)},n=()=>window.clearTimeout(t);return dw(()=>n()),{registerTimeout:e,cancelTimeout:n}}const Jg=()=>{const t=mw(),e=gw(),n=M(()=>`${t.value}-popper-container-${e.prefix}`),i=M(()=>`#${n.value}`);return{id:n,selector:i}},MC=t=>{const e=document.createElement("div");return e.id=t,document.body.appendChild(e),e},RC=()=>{const{id:t,selector:e}=Jg();return pw(()=>{ui&&(document.body.querySelector(e.value)||MC(t.value))}),{id:t,selector:e}},DC=ke({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),LC=({showAfter:t,hideAfter:e,autoClose:n,open:i,close:r})=>{const{registerTimeout:s}=xd(),{registerTimeout:o,cancelTimeout:l}=xd();return{onOpen:u=>{s(()=>{i(u);const f=w(n);Re(f)&&f>0&&o(()=>{r(u)},f)},w(t))},onClose:u=>{l(),s(()=>{r(u)},w(e))}}},Zg=Symbol("elForwardRef"),BC=t=>{Zt(Zg,{setForwardRef:n=>{t.value=n}})},IC=t=>({mounted(e){t(e)},updated(e){t(e)},unmounted(){t(null)}}),NC=ke({size:{type:String,values:hf},disabled:Boolean}),FC=ke({...NC,model:Object,rules:{type:ae(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),_C={validate:(t,e,n)=>(Ut(t)||Pn(t))&&En(e)&&Pn(n)};function $C(){const t=j([]),e=M(()=>{if(!t.value.length)return"0";const s=Math.max(...t.value);return s?`${s}px`:""});function n(s){const o=t.value.indexOf(s);return o===-1&&e.value,o}function i(s,o){if(s&&o){const l=n(o);t.value.splice(l,1,s)}else s&&t.value.push(s)}function r(s){const o=n(s);o>-1&&t.value.splice(o,1)}return{autoLabelWidth:e,registerLabelWidth:i,deregisterLabelWidth:r}}const $o=(t,e)=>{const n=an(e);return n.length>0?t.filter(i=>i.prop&&n.includes(i.prop)):t},VC="ElForm",HC=Z({name:VC}),WC=Z({...HC,props:FC,emits:_C,setup(t,{expose:e,emit:n}){const i=t,r=[],s=tr(),o=Ie("form"),l=M(()=>{const{labelPosition:x,inline:S}=i;return[o.b(),o.m(s.value||"default"),{[o.m(`label-${x}`)]:x,[o.m("inline")]:S}]}),a=x=>r.find(S=>S.prop===x),c=x=>{r.push(x)},u=x=>{x.prop&&r.splice(r.indexOf(x),1)},f=(x=[])=>{i.model&&$o(r,x).forEach(S=>S.resetField())},h=(x=[])=>{$o(r,x).forEach(S=>S.clearValidate())},d=M(()=>!!i.model),p=x=>{if(r.length===0)return[];const S=$o(r,x);return S.length?S:[]},m=async x=>g(void 0,x),y=async(x=[])=>{if(!d.value)return!1;const S=p(x);if(S.length===0)return!0;let b={};for(const O of S)try{await O.validate("")}catch(k){b={...b,...k}}return Object.keys(b).length===0?!0:Promise.reject(b)},g=async(x=[],S)=>{const b=!$t(S);try{const O=await y(x);return O===!0&&await(S==null?void 0:S(O)),O}catch(O){if(O instanceof Error)throw O;const k=O;return i.scrollToError&&v(Object.keys(k)[0]),await(S==null?void 0:S(!1,k)),b&&Promise.reject(k)}},v=x=>{var S;const b=$o(r,x)[0];b&&((S=b.$el)==null||S.scrollIntoView(i.scrollIntoViewOptions))};return re(()=>i.rules,()=>{i.validateOnRuleChange&&m().catch(x=>Rr())},{deep:!0}),Zt(df,fn({...Xr(i),emit:n,resetFields:f,clearValidate:h,validateField:g,getField:a,addField:c,removeField:u,...$C()})),e({validate:m,validateField:g,resetFields:f,clearValidate:h,scrollToField:v,fields:r}),(x,S)=>(B(),ee("form",{class:W(w(l))},[se(x.$slots,"default")],2))}});var jC=Te(WC,[["__file","form.vue"]]);function Ii(){return Ii=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ii.apply(this,arguments)}function zC(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Hs(t,e)}function zc(t){return zc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zc(t)}function Hs(t,e){return Hs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},Hs(t,e)}function qC(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ml(t,e,n){return qC()?ml=Reflect.construct.bind():ml=function(r,s,o){var l=[null];l.push.apply(l,s);var a=Function.bind.apply(r,l),c=new a;return o&&Hs(c,o.prototype),c},ml.apply(null,arguments)}function UC(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function qc(t){var e=typeof Map=="function"?new Map:void 0;return qc=function(i){if(i===null||!UC(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(i))return e.get(i);e.set(i,r)}function r(){return ml(i,arguments,zc(this).constructor)}return r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Hs(r,i)},qc(t)}var QC=/%[sdj%]/g,KC=function(){};function Uc(t){if(!t||!t.length)return null;var e={};return t.forEach(function(n){var i=n.field;e[i]=e[i]||[],e[i].push(n)}),e}function Vt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=0,s=n.length;if(typeof t=="function")return t.apply(null,n);if(typeof t=="string"){var o=t.replace(QC,function(l){if(l==="%%")return"%";if(r>=s)return l;switch(l){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch{return"[Circular]"}break;default:return l}});return o}return t}function XC(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function Je(t,e){return!!(t==null||e==="array"&&Array.isArray(t)&&!t.length||XC(e)&&typeof t=="string"&&!t)}function GC(t,e,n){var i=[],r=0,s=t.length;function o(l){i.push.apply(i,l||[]),r++,r===s&&n(i)}t.forEach(function(l){e(l,o)})}function Sd(t,e,n){var i=0,r=t.length;function s(o){if(o&&o.length){n(o);return}var l=i;i=i+1,l<r?e(t[l],s):n([])}s([])}function YC(t){var e=[];return Object.keys(t).forEach(function(n){e.push.apply(e,t[n]||[])}),e}var Od=function(t){zC(e,t);function e(n,i){var r;return r=t.call(this,"Async Validation Error")||this,r.errors=n,r.fields=i,r}return e}(qc(Error));function JC(t,e,n,i,r){if(e.first){var s=new Promise(function(h,d){var p=function(g){return i(g),g.length?d(new Od(g,Uc(g))):h(r)},m=YC(t);Sd(m,n,p)});return s.catch(function(h){return h}),s}var o=e.firstFields===!0?Object.keys(t):e.firstFields||[],l=Object.keys(t),a=l.length,c=0,u=[],f=new Promise(function(h,d){var p=function(y){if(u.push.apply(u,y),c++,c===a)return i(u),u.length?d(new Od(u,Uc(u))):h(r)};l.length||(i(u),h(r)),l.forEach(function(m){var y=t[m];o.indexOf(m)!==-1?Sd(y,n,p):GC(y,n,p)})});return f.catch(function(h){return h}),f}function ZC(t){return!!(t&&t.message!==void 0)}function eA(t,e){for(var n=t,i=0;i<e.length;i++){if(n==null)return n;n=n[e[i]]}return n}function kd(t,e){return function(n){var i;return t.fullFields?i=eA(e,t.fullFields):i=e[n.field||t.fullField],ZC(n)?(n.field=n.field||t.fullField,n.fieldValue=i,n):{message:typeof n=="function"?n():n,fieldValue:i,field:n.field||t.fullField}}}function Cd(t,e){if(e){for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];typeof i=="object"&&typeof t[n]=="object"?t[n]=Ii({},t[n],i):t[n]=i}}return t}var e0=function(e,n,i,r,s,o){e.required&&(!i.hasOwnProperty(e.field)||Je(n,o||e.type))&&r.push(Vt(s.messages.required,e.fullField))},tA=function(e,n,i,r,s){(/^\s+$/.test(n)||n==="")&&r.push(Vt(s.messages.whitespace,e.fullField))},Vo,nA=function(){if(Vo)return Vo;var t="[a-fA-F\\d:]",e=function(S){return S&&S.includeBoundaries?"(?:(?<=\\s|^)(?="+t+")|(?<="+t+")(?=\\s|$))":""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",r=(`
(?:
(?:`+i+":){7}(?:"+i+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+i+":){6}(?:"+n+"|:"+i+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+i+":){5}(?::"+n+"|(?::"+i+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+i+":){4}(?:(?::"+i+"){0,1}:"+n+"|(?::"+i+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+i+":){3}(?:(?::"+i+"){0,2}:"+n+"|(?::"+i+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+i+":){2}(?:(?::"+i+"){0,3}:"+n+"|(?::"+i+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+i+":){1}(?:(?::"+i+"){0,4}:"+n+"|(?::"+i+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+i+"){0,5}:"+n+"|(?::"+i+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),s=new RegExp("(?:^"+n+"$)|(?:^"+r+"$)"),o=new RegExp("^"+n+"$"),l=new RegExp("^"+r+"$"),a=function(S){return S&&S.exact?s:new RegExp("(?:"+e(S)+n+e(S)+")|(?:"+e(S)+r+e(S)+")","g")};a.v4=function(x){return x&&x.exact?o:new RegExp(""+e(x)+n+e(x),"g")},a.v6=function(x){return x&&x.exact?l:new RegExp(""+e(x)+r+e(x),"g")};var c="(?:(?:[a-z]+:)?//)",u="(?:\\S+(?::\\S*)?@)?",f=a.v4().source,h=a.v6().source,d="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",p="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",m="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",y="(?::\\d{2,5})?",g='(?:[/?#][^\\s"]*)?',v="(?:"+c+"|www\\.)"+u+"(?:localhost|"+f+"|"+h+"|"+d+p+m+")"+y+g;return Vo=new RegExp("(?:^"+v+"$)","i"),Vo},Ad={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},ys={integer:function(e){return ys.number(e)&&parseInt(e,10)===e},float:function(e){return ys.number(e)&&!ys.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!ys.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(Ad.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(nA())},hex:function(e){return typeof e=="string"&&!!e.match(Ad.hex)}},iA=function(e,n,i,r,s){if(e.required&&n===void 0){e0(e,n,i,r,s);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],l=e.type;o.indexOf(l)>-1?ys[l](n)||r.push(Vt(s.messages.types[l],e.fullField,e.type)):l&&typeof n!==e.type&&r.push(Vt(s.messages.types[l],e.fullField,e.type))},rA=function(e,n,i,r,s){var o=typeof e.len=="number",l=typeof e.min=="number",a=typeof e.max=="number",c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=n,f=null,h=typeof n=="number",d=typeof n=="string",p=Array.isArray(n);if(h?f="number":d?f="string":p&&(f="array"),!f)return!1;p&&(u=n.length),d&&(u=n.replace(c,"_").length),o?u!==e.len&&r.push(Vt(s.messages[f].len,e.fullField,e.len)):l&&!a&&u<e.min?r.push(Vt(s.messages[f].min,e.fullField,e.min)):a&&!l&&u>e.max?r.push(Vt(s.messages[f].max,e.fullField,e.max)):l&&a&&(u<e.min||u>e.max)&&r.push(Vt(s.messages[f].range,e.fullField,e.min,e.max))},lr="enum",sA=function(e,n,i,r,s){e[lr]=Array.isArray(e[lr])?e[lr]:[],e[lr].indexOf(n)===-1&&r.push(Vt(s.messages[lr],e.fullField,e[lr].join(", ")))},oA=function(e,n,i,r,s){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(n)||r.push(Vt(s.messages.pattern.mismatch,e.fullField,n,e.pattern));else if(typeof e.pattern=="string"){var o=new RegExp(e.pattern);o.test(n)||r.push(Vt(s.messages.pattern.mismatch,e.fullField,n,e.pattern))}}},pe={required:e0,whitespace:tA,type:iA,range:rA,enum:sA,pattern:oA},lA=function(e,n,i,r,s){var o=[],l=e.required||!e.required&&r.hasOwnProperty(e.field);if(l){if(Je(n,"string")&&!e.required)return i();pe.required(e,n,r,o,s,"string"),Je(n,"string")||(pe.type(e,n,r,o,s),pe.range(e,n,r,o,s),pe.pattern(e,n,r,o,s),e.whitespace===!0&&pe.whitespace(e,n,r,o,s))}i(o)},aA=function(e,n,i,r,s){var o=[],l=e.required||!e.required&&r.hasOwnProperty(e.field);if(l){if(Je(n)&&!e.required)return i();pe.required(e,n,r,o,s),n!==void 0&&pe.type(e,n,r,o,s)}i(o)},cA=function(e,n,i,r,s){var o=[],l=e.required||!e.required&&r.hasOwnProperty(e.field);if(l){if(n===""&&(n=void 0),Je(n)&&!e.required)return i();pe.required(e,n,r,o,s),n!==void 0&&(pe.type(e,n,r,o,s),pe.range(e,n,r,o,s))}i(o)},uA=function(e,n,i,r,s){var o=[],l=e.required||!e.required&&r.hasOwnProperty(e.field);if(l){if(Je(n)&&!e.required)return i();pe.required(e,n,r,o,s),n!==void 0&&pe.type(e,n,r,o,s)}i(o)},fA=function(e,n,i,r,s){var o=[],l=e.required||!e.required&&r.hasOwnProperty(e.field);if(l){if(Je(n)&&!e.required)return i();pe.required(e,n,r,o,s),Je(n)||pe.type(e,n,r,o,s)}i(o)},hA=function(e,n,i,r,s){var o=[],l=e.required||!e.required&&r.hasOwnProperty(e.field);if(l){if(Je(n)&&!e.required)return i();pe.required(e,n,r,o,s),n!==void 0&&(pe.type(e,n,r,o,s),pe.range(e,n,r,o,s))}i(o)},dA=function(e,n,i,r,s){var o=[],l=e.required||!e.required&&r.hasOwnProperty(e.field);if(l){if(Je(n)&&!e.required)return i();pe.required(e,n,r,o,s),n!==void 0&&(pe.type(e,n,r,o,s),pe.range(e,n,r,o,s))}i(o)},pA=function(e,n,i,r,s){var o=[],l=e.required||!e.required&&r.hasOwnProperty(e.field);if(l){if(n==null&&!e.required)return i();pe.required(e,n,r,o,s,"array"),n!=null&&(pe.type(e,n,r,o,s),pe.range(e,n,r,o,s))}i(o)},mA=function(e,n,i,r,s){var o=[],l=e.required||!e.required&&r.hasOwnProperty(e.field);if(l){if(Je(n)&&!e.required)return i();pe.required(e,n,r,o,s),n!==void 0&&pe.type(e,n,r,o,s)}i(o)},gA="enum",yA=function(e,n,i,r,s){var o=[],l=e.required||!e.required&&r.hasOwnProperty(e.field);if(l){if(Je(n)&&!e.required)return i();pe.required(e,n,r,o,s),n!==void 0&&pe[gA](e,n,r,o,s)}i(o)},bA=function(e,n,i,r,s){var o=[],l=e.required||!e.required&&r.hasOwnProperty(e.field);if(l){if(Je(n,"string")&&!e.required)return i();pe.required(e,n,r,o,s),Je(n,"string")||pe.pattern(e,n,r,o,s)}i(o)},vA=function(e,n,i,r,s){var o=[],l=e.required||!e.required&&r.hasOwnProperty(e.field);if(l){if(Je(n,"date")&&!e.required)return i();if(pe.required(e,n,r,o,s),!Je(n,"date")){var a;n instanceof Date?a=n:a=new Date(n),pe.type(e,a,r,o,s),a&&pe.range(e,a.getTime(),r,o,s)}}i(o)},wA=function(e,n,i,r,s){var o=[],l=Array.isArray(n)?"array":typeof n;pe.required(e,n,r,o,s,l),i(o)},Za=function(e,n,i,r,s){var o=e.type,l=[],a=e.required||!e.required&&r.hasOwnProperty(e.field);if(a){if(Je(n,o)&&!e.required)return i();pe.required(e,n,r,l,s,o),Je(n,o)||pe.type(e,n,r,l,s)}i(l)},xA=function(e,n,i,r,s){var o=[],l=e.required||!e.required&&r.hasOwnProperty(e.field);if(l){if(Je(n)&&!e.required)return i();pe.required(e,n,r,o,s)}i(o)},Ps={string:lA,method:aA,number:cA,boolean:uA,regexp:fA,integer:hA,float:dA,array:pA,object:mA,enum:yA,pattern:bA,date:vA,url:Za,hex:Za,email:Za,required:wA,any:xA};function Qc(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var Kc=Qc(),yo=function(){function t(n){this.rules=null,this._messages=Kc,this.define(n)}var e=t.prototype;return e.define=function(i){var r=this;if(!i)throw new Error("Cannot configure a schema with no rules");if(typeof i!="object"||Array.isArray(i))throw new Error("Rules must be an object");this.rules={},Object.keys(i).forEach(function(s){var o=i[s];r.rules[s]=Array.isArray(o)?o:[o]})},e.messages=function(i){return i&&(this._messages=Cd(Qc(),i)),this._messages},e.validate=function(i,r,s){var o=this;r===void 0&&(r={}),s===void 0&&(s=function(){});var l=i,a=r,c=s;if(typeof a=="function"&&(c=a,a={}),!this.rules||Object.keys(this.rules).length===0)return c&&c(null,l),Promise.resolve(l);function u(m){var y=[],g={};function v(S){if(Array.isArray(S)){var b;y=(b=y).concat.apply(b,S)}else y.push(S)}for(var x=0;x<m.length;x++)v(m[x]);y.length?(g=Uc(y),c(y,g)):c(null,l)}if(a.messages){var f=this.messages();f===Kc&&(f=Qc()),Cd(f,a.messages),a.messages=f}else a.messages=this.messages();var h={},d=a.keys||Object.keys(this.rules);d.forEach(function(m){var y=o.rules[m],g=l[m];y.forEach(function(v){var x=v;typeof x.transform=="function"&&(l===i&&(l=Ii({},l)),g=l[m]=x.transform(g)),typeof x=="function"?x={validator:x}:x=Ii({},x),x.validator=o.getValidationMethod(x),x.validator&&(x.field=m,x.fullField=x.fullField||m,x.type=o.getType(x),h[m]=h[m]||[],h[m].push({rule:x,value:g,source:l,field:m}))})});var p={};return JC(h,a,function(m,y){var g=m.rule,v=(g.type==="object"||g.type==="array")&&(typeof g.fields=="object"||typeof g.defaultField=="object");v=v&&(g.required||!g.required&&m.value),g.field=m.field;function x(O,k){return Ii({},k,{fullField:g.fullField+"."+O,fullFields:g.fullFields?[].concat(g.fullFields,[O]):[O]})}function S(O){O===void 0&&(O=[]);var k=Array.isArray(O)?O:[O];!a.suppressWarning&&k.length&&t.warning("async-validator:",k),k.length&&g.message!==void 0&&(k=[].concat(g.message));var R=k.map(kd(g,l));if(a.first&&R.length)return p[g.field]=1,y(R);if(!v)y(R);else{if(g.required&&!m.value)return g.message!==void 0?R=[].concat(g.message).map(kd(g,l)):a.error&&(R=[a.error(g,Vt(a.messages.required,g.field))]),y(R);var N={};g.defaultField&&Object.keys(m.value).map(function(L){N[L]=g.defaultField}),N=Ii({},N,m.rule.fields);var I={};Object.keys(N).forEach(function(L){var V=N[L],q=Array.isArray(V)?V:[V];I[L]=q.map(x.bind(null,L))});var $=new t(I);$.messages(a.messages),m.rule.options&&(m.rule.options.messages=a.messages,m.rule.options.error=a.error),$.validate(m.value,m.rule.options||a,function(L){var V=[];R&&R.length&&V.push.apply(V,R),L&&L.length&&V.push.apply(V,L),y(V.length?V:null)})}}var b;if(g.asyncValidator)b=g.asyncValidator(g,m.value,S,m.source,a);else if(g.validator){try{b=g.validator(g,m.value,S,m.source,a)}catch(O){console.error==null||console.error(O),a.suppressValidatorError||setTimeout(function(){throw O},0),S(O.message)}b===!0?S():b===!1?S(typeof g.message=="function"?g.message(g.fullField||g.field):g.message||(g.fullField||g.field)+" fails"):b instanceof Array?S(b):b instanceof Error&&S(b.message)}b&&b.then&&b.then(function(){return S()},function(O){return S(O)})},function(m){u(m)},l)},e.getType=function(i){if(i.type===void 0&&i.pattern instanceof RegExp&&(i.type="pattern"),typeof i.validator!="function"&&i.type&&!Ps.hasOwnProperty(i.type))throw new Error(Vt("Unknown rule type %s",i.type));return i.type||"string"},e.getValidationMethod=function(i){if(typeof i.validator=="function")return i.validator;var r=Object.keys(i),s=r.indexOf("message");return s!==-1&&r.splice(s,1),r.length===1&&r[0]==="required"?Ps.required:Ps[this.getType(i)]||void 0},t}();yo.register=function(e,n){if(typeof n!="function")throw new Error("Cannot register a validator by type, validator is not a function");Ps[e]=n};yo.warning=KC;yo.messages=Kc;yo.validators=Ps;const SA=["","error","validating","success"],OA=ke({label:String,labelWidth:{type:[String,Number],default:""},labelPosition:{type:String,values:["left","right","top",""],default:""},prop:{type:ae([String,Array])},required:{type:Boolean,default:void 0},rules:{type:ae([Object,Array])},error:String,validateStatus:{type:String,values:SA},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:hf}}),Td="ElLabelWrap";var kA=Z({name:Td,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(t,{slots:e}){const n=Ue(df,void 0),i=Ue(Fs);i||ya(Td,"usage: <el-form-item><label-wrap /></el-form-item>");const r=Ie("form"),s=j(),o=j(0),l=()=>{var u;if((u=s.value)!=null&&u.firstElementChild){const f=window.getComputedStyle(s.value.firstElementChild).width;return Math.ceil(Number.parseFloat(f))}else return 0},a=(u="update")=>{yt(()=>{e.default&&t.isAutoWidth&&(u==="update"?o.value=l():u==="remove"&&(n==null||n.deregisterLabelWidth(o.value)))})},c=()=>a("update");return pt(()=>{c()}),Nn(()=>{a("remove")}),pf(()=>c()),re(o,(u,f)=>{t.updateAll&&(n==null||n.registerLabelWidth(u,f))}),Vn(M(()=>{var u,f;return(f=(u=s.value)==null?void 0:u.firstElementChild)!=null?f:null}),c),()=>{var u,f;if(!e)return null;const{isAutoWidth:h}=t;if(h){const d=n==null?void 0:n.autoLabelWidth,p=i==null?void 0:i.hasLabel,m={};if(p&&d&&d!=="auto"){const y=Math.max(0,Number.parseInt(d,10)-o.value),v=(i.labelPosition||n.labelPosition)==="left"?"marginRight":"marginLeft";y&&(m[v]=`${y}px`)}return he("div",{ref:s,class:[r.be("item","label-wrap")],style:m},[(u=e.default)==null?void 0:u.call(e)])}else return he(fi,{ref:s},[(f=e.default)==null?void 0:f.call(e)])}}});const CA=Z({name:"ElFormItem"}),AA=Z({...CA,props:OA,setup(t,{expose:e}){const n=t,i=yw(),r=Ue(df,void 0),s=Ue(Fs,void 0),o=tr(void 0,{formItem:!1}),l=Ie("form-item"),a=fo().value,c=j([]),u=j(""),f=bw(u,100),h=j(""),d=j();let p,m=!1;const y=M(()=>n.labelPosition||(r==null?void 0:r.labelPosition)),g=M(()=>{if(y.value==="top")return{};const K=_s(n.labelWidth||(r==null?void 0:r.labelWidth)||"");return K?{width:K}:{}}),v=M(()=>{if(y.value==="top"||r!=null&&r.inline)return{};if(!n.label&&!n.labelWidth&&I)return{};const K=_s(n.labelWidth||(r==null?void 0:r.labelWidth)||"");return!n.label&&!i.label?{marginLeft:K}:{}}),x=M(()=>[l.b(),l.m(o.value),l.is("error",u.value==="error"),l.is("validating",u.value==="validating"),l.is("success",u.value==="success"),l.is("required",P.value||n.required),l.is("no-asterisk",r==null?void 0:r.hideRequiredAsterisk),(r==null?void 0:r.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[l.m("feedback")]:r==null?void 0:r.statusIcon,[l.m(`label-${y.value}`)]:y.value}]),S=M(()=>En(n.inlineMessage)?n.inlineMessage:(r==null?void 0:r.inlineMessage)||!1),b=M(()=>[l.e("error"),{[l.em("error","inline")]:S.value}]),O=M(()=>n.prop?Pn(n.prop)?n.prop:n.prop.join("."):""),k=M(()=>!!(n.label||i.label)),R=M(()=>n.for||(c.value.length===1?c.value[0]:void 0)),N=M(()=>!R.value&&k.value),I=!!s,$=M(()=>{const K=r==null?void 0:r.model;if(!(!K||!n.prop))return Qa(K,n.prop).value}),L=M(()=>{const{required:K}=n,be=[];n.rules&&be.push(...an(n.rules));const Fe=r==null?void 0:r.rules;if(Fe&&n.prop){const Ee=Qa(Fe,n.prop).value;Ee&&be.push(...an(Ee))}if(K!==void 0){const Ee=be.map((Ot,sn)=>[Ot,sn]).filter(([Ot])=>Object.keys(Ot).includes("required"));if(Ee.length>0)for(const[Ot,sn]of Ee)Ot.required!==K&&(be[sn]={...Ot,required:K});else be.push({required:K})}return be}),V=M(()=>L.value.length>0),q=K=>L.value.filter(Fe=>!Fe.trigger||!K?!0:Ut(Fe.trigger)?Fe.trigger.includes(K):Fe.trigger===K).map(({trigger:Fe,...Ee})=>Ee),P=M(()=>L.value.some(K=>K.required)),E=M(()=>{var K;return f.value==="error"&&n.showMessage&&((K=r==null?void 0:r.showMessage)!=null?K:!0)}),H=M(()=>`${n.label||""}${(r==null?void 0:r.labelSuffix)||""}`),te=K=>{u.value=K},J=K=>{var be,Fe;const{errors:Ee,fields:Ot}=K;(!Ee||!Ot)&&console.error(K),te("error"),h.value=Ee?(Fe=(be=Ee==null?void 0:Ee[0])==null?void 0:be.message)!=null?Fe:`${n.prop} is required`:"",r==null||r.emit("validate",n.prop,!1,h.value)},ye=()=>{te("success"),r==null||r.emit("validate",n.prop,!0,"")},Ne=async K=>{const be=O.value;return new yo({[be]:K}).validate({[be]:$.value},{firstFields:!0}).then(()=>(ye(),!0)).catch(Ee=>(J(Ee),Promise.reject(Ee)))},we=async(K,be)=>{if(m||!n.prop)return!1;const Fe=$t(be);if(!V.value)return be==null||be(!1),!1;const Ee=q(K);return Ee.length===0?(be==null||be(!0),!0):(te("validating"),Ne(Ee).then(()=>(be==null||be(!0),!0)).catch(Ot=>{const{fields:sn}=Ot;return be==null||be(!1,sn),Fe?!1:Promise.reject(sn)}))},fe=()=>{te(""),h.value="",m=!1},He=async()=>{const K=r==null?void 0:r.model;if(!K||!n.prop)return;const be=Qa(K,n.prop);m=!0,be.value=ld(p),await yt(),fe(),m=!1},_e=K=>{c.value.includes(K)||c.value.push(K)},ut=K=>{c.value=c.value.filter(be=>be!==K)};re(()=>n.error,K=>{h.value=K||"",te(K?"error":"")},{immediate:!0}),re(()=>n.validateStatus,K=>te(K||""));const xe=fn({...Xr(n),$el:d,size:o,validateState:u,labelId:a,inputIds:c,isGroup:N,hasLabel:k,fieldValue:$,addInputId:_e,removeInputId:ut,resetField:He,clearValidate:fe,validate:we});return Zt(Fs,xe),pt(()=>{n.prop&&(r==null||r.addField(xe),p=ld($.value))}),Nn(()=>{r==null||r.removeField(xe)}),e({size:o,validateMessage:h,validateState:u,validate:we,clearValidate:fe,resetField:He}),(K,be)=>{var Fe;return B(),ee("div",{ref_key:"formItemRef",ref:d,class:W(w(x)),role:w(N)?"group":void 0,"aria-labelledby":w(N)?w(a):void 0},[he(w(kA),{"is-auto-width":w(g).width==="auto","update-all":((Fe=w(r))==null?void 0:Fe.labelWidth)==="auto"},{default:Y(()=>[w(k)?(B(),ne(zt(w(R)?"label":"div"),{key:0,id:w(a),for:w(R),class:W(w(l).e("label")),style:lt(w(g))},{default:Y(()=>[se(K.$slots,"label",{label:w(H)},()=>[jn(Le(w(H)),1)])]),_:3},8,["id","for","class","style"])):ie("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),ce("div",{class:W(w(l).e("content")),style:lt(w(v))},[se(K.$slots,"default"),he(vw,{name:`${w(l).namespace.value}-zoom-in-top`},{default:Y(()=>[w(E)?se(K.$slots,"error",{key:0,error:h.value},()=>[ce("div",{class:W(w(b))},Le(h.value),3)]):ie("v-if",!0)]),_:3},8,["name"])],6)],10,["role","aria-labelledby"])}}});var t0=Te(AA,[["__file","form-item.vue"]]);const TA=jt(jC,{FormItem:t0}),EA=ho(t0),ar=4,PA={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},MA=({move:t,size:e,bar:n})=>({[n.size]:e,transform:`translate${n.axis}(${t}%)`}),Df=Symbol("scrollbarContextKey"),RA=ke({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),DA="Thumb",LA=Z({__name:"thumb",props:RA,setup(t){const e=t,n=Ue(Df),i=Ie("scrollbar");n||ya(DA,"can not inject scrollbar context");const r=j(),s=j(),o=j({}),l=j(!1);let a=!1,c=!1,u=ui?document.onselectstart:null;const f=M(()=>PA[e.vertical?"vertical":"horizontal"]),h=M(()=>MA({size:e.size,move:e.move,bar:f.value})),d=M(()=>r.value[f.value.offset]**2/n.wrapElement[f.value.scrollSize]/e.ratio/s.value[f.value.offset]),p=O=>{var k;if(O.stopPropagation(),O.ctrlKey||[1,2].includes(O.button))return;(k=window.getSelection())==null||k.removeAllRanges(),y(O);const R=O.currentTarget;R&&(o.value[f.value.axis]=R[f.value.offset]-(O[f.value.client]-R.getBoundingClientRect()[f.value.direction]))},m=O=>{if(!s.value||!r.value||!n.wrapElement)return;const k=Math.abs(O.target.getBoundingClientRect()[f.value.direction]-O[f.value.client]),R=s.value[f.value.offset]/2,N=(k-R)*100*d.value/r.value[f.value.offset];n.wrapElement[f.value.scroll]=N*n.wrapElement[f.value.scrollSize]/100},y=O=>{O.stopImmediatePropagation(),a=!0,document.addEventListener("mousemove",g),document.addEventListener("mouseup",v),u=document.onselectstart,document.onselectstart=()=>!1},g=O=>{if(!r.value||!s.value||a===!1)return;const k=o.value[f.value.axis];if(!k)return;const R=(r.value.getBoundingClientRect()[f.value.direction]-O[f.value.client])*-1,N=s.value[f.value.offset]-k,I=(R-N)*100*d.value/r.value[f.value.offset];n.wrapElement[f.value.scroll]=I*n.wrapElement[f.value.scrollSize]/100},v=()=>{a=!1,o.value[f.value.axis]=0,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",v),b(),c&&(l.value=!1)},x=()=>{c=!1,l.value=!!e.size},S=()=>{c=!0,l.value=a};Nn(()=>{b(),document.removeEventListener("mouseup",v)});const b=()=>{document.onselectstart!==u&&(document.onselectstart=u)};return Ic(Bi(n,"scrollbarElement"),"mousemove",x),Ic(Bi(n,"scrollbarElement"),"mouseleave",S),(O,k)=>(B(),ne(mf,{name:w(i).b("fade"),persisted:""},{default:Y(()=>[Xt(ce("div",{ref_key:"instance",ref:r,class:W([w(i).e("bar"),w(i).is(w(f).key)]),onMousedown:m},[ce("div",{ref_key:"thumb",ref:s,class:W(w(i).e("thumb")),style:lt(w(h)),onMousedown:p},null,38)],34),[[po,O.always||l.value]])]),_:1},8,["name"]))}});var Ed=Te(LA,[["__file","thumb.vue"]]);const BA=ke({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),IA=Z({__name:"bar",props:BA,setup(t,{expose:e}){const n=t,i=Ue(Df),r=j(0),s=j(0),o=j(""),l=j(""),a=j(1),c=j(1);return e({handleScroll:h=>{if(h){const d=h.offsetHeight-ar,p=h.offsetWidth-ar;s.value=h.scrollTop*100/d*a.value,r.value=h.scrollLeft*100/p*c.value}},update:()=>{const h=i==null?void 0:i.wrapElement;if(!h)return;const d=h.offsetHeight-ar,p=h.offsetWidth-ar,m=d**2/h.scrollHeight,y=p**2/h.scrollWidth,g=Math.max(m,n.minSize),v=Math.max(y,n.minSize);a.value=m/(d-m)/(g/(d-g)),c.value=y/(p-y)/(v/(p-v)),l.value=g+ar<d?`${g}px`:"",o.value=v+ar<p?`${v}px`:""}}),(h,d)=>(B(),ee(fi,null,[he(Ed,{move:r.value,ratio:c.value,size:o.value,always:h.always},null,8,["move","ratio","size","always"]),he(Ed,{move:s.value,ratio:a.value,size:l.value,vertical:"",always:h.always},null,8,["move","ratio","size","always"])],64))}});var NA=Te(IA,[["__file","bar.vue"]]);const FA=ke({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:ae([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},tabindex:{type:[String,Number],default:void 0},id:String,role:String,...nr(["ariaLabel","ariaOrientation"])}),_A={scroll:({scrollTop:t,scrollLeft:e})=>[t,e].every(Re)},$A="ElScrollbar",VA=Z({name:$A}),HA=Z({...VA,props:FA,emits:_A,setup(t,{expose:e,emit:n}){const i=t,r=Ie("scrollbar");let s,o,l=0,a=0;const c=j(),u=j(),f=j(),h=j(),d=M(()=>{const b={};return i.height&&(b.height=_s(i.height)),i.maxHeight&&(b.maxHeight=_s(i.maxHeight)),[i.wrapStyle,b]}),p=M(()=>[i.wrapClass,r.e("wrap"),{[r.em("wrap","hidden-default")]:!i.native}]),m=M(()=>[r.e("view"),i.viewClass]),y=()=>{var b;u.value&&((b=h.value)==null||b.handleScroll(u.value),l=u.value.scrollTop,a=u.value.scrollLeft,n("scroll",{scrollTop:u.value.scrollTop,scrollLeft:u.value.scrollLeft}))};function g(b,O){zn(b)?u.value.scrollTo(b):Re(b)&&Re(O)&&u.value.scrollTo(b,O)}const v=b=>{Re(b)&&(u.value.scrollTop=b)},x=b=>{Re(b)&&(u.value.scrollLeft=b)},S=()=>{var b;(b=h.value)==null||b.update()};return re(()=>i.noresize,b=>{b?(s==null||s(),o==null||o()):({stop:s}=Vn(f,S),o=Ic("resize",S))},{immediate:!0}),re(()=>[i.maxHeight,i.height],()=>{i.native||yt(()=>{var b;S(),u.value&&((b=h.value)==null||b.handleScroll(u.value))})}),Zt(Df,fn({scrollbarElement:c,wrapElement:u})),ww(()=>{u.value&&(u.value.scrollTop=l,u.value.scrollLeft=a)}),pt(()=>{i.native||yt(()=>{S()})}),pf(()=>S()),e({wrapRef:u,update:S,scrollTo:g,setScrollTop:v,setScrollLeft:x,handleScroll:y}),(b,O)=>(B(),ee("div",{ref_key:"scrollbarRef",ref:c,class:W(w(r).b())},[ce("div",{ref_key:"wrapRef",ref:u,class:W(w(p)),style:lt(w(d)),tabindex:b.tabindex,onScroll:y},[(B(),ne(zt(b.tag),{id:b.id,ref_key:"resizeRef",ref:f,class:W(w(m)),style:lt(b.viewStyle),role:b.role,"aria-label":b.ariaLabel,"aria-orientation":b.ariaOrientation},{default:Y(()=>[se(b.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],46,["tabindex"]),b.native?ie("v-if",!0):(B(),ne(NA,{key:0,ref_key:"barRef",ref:h,always:b.always,"min-size":b.minSize},null,8,["always","min-size"]))],2))}});var WA=Te(HA,[["__file","scrollbar.vue"]]);const jA=jt(WA),Lf=Symbol("popper"),n0=Symbol("popperContent"),zA=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],i0=ke({role:{type:String,values:zA,default:"tooltip"}}),qA=Z({name:"ElPopper",inheritAttrs:!1}),UA=Z({...qA,props:i0,setup(t,{expose:e}){const n=t,i=j(),r=j(),s=j(),o=j(),l=M(()=>n.role),a={triggerRef:i,popperInstanceRef:r,contentRef:s,referenceRef:o,role:l};return e(a),Zt(Lf,a),(c,u)=>se(c.$slots,"default")}});var QA=Te(UA,[["__file","popper.vue"]]);const r0=ke({arrowOffset:{type:Number,default:5}}),KA=Z({name:"ElPopperArrow",inheritAttrs:!1}),XA=Z({...KA,props:r0,setup(t,{expose:e}){const n=t,i=Ie("popper"),{arrowOffset:r,arrowRef:s,arrowStyle:o}=Ue(n0,void 0);return re(()=>n.arrowOffset,l=>{r.value=l}),Nn(()=>{s.value=void 0}),e({arrowRef:s}),(l,a)=>(B(),ee("span",{ref_key:"arrowRef",ref:s,class:W(w(i).e("arrow")),style:lt(w(o)),"data-popper-arrow":""},null,6))}});var GA=Te(XA,[["__file","arrow.vue"]]);const YA="ElOnlyChild",JA=Z({name:YA,setup(t,{slots:e,attrs:n}){var i;const r=Ue(Zg),s=IC((i=r==null?void 0:r.setForwardRef)!=null?i:Nc);return()=>{var o;const l=(o=e.default)==null?void 0:o.call(e,n);if(!l||l.length>1)return null;const a=s0(l);return a?Xt(xw(a,n),[[s]]):null}}});function s0(t){if(!t)return null;const e=t;for(const n of e){if(zn(n))switch(n.type){case Ow:continue;case Sw:case"svg":return Pd(n);case fi:return s0(n.children);default:return n}return Pd(n)}return null}function Pd(t){const e=Ie("only-child");return he("span",{class:e.e("content")},[t])}const o0=ke({virtualRef:{type:ae(Object)},virtualTriggering:Boolean,onMouseenter:{type:ae(Function)},onMouseleave:{type:ae(Function)},onClick:{type:ae(Function)},onKeydown:{type:ae(Function)},onFocus:{type:ae(Function)},onBlur:{type:ae(Function)},onContextmenu:{type:ae(Function)},id:String,open:Boolean}),ZA=Z({name:"ElPopperTrigger",inheritAttrs:!1}),eT=Z({...ZA,props:o0,setup(t,{expose:e}){const n=t,{role:i,triggerRef:r}=Ue(Lf,void 0);BC(r);const s=M(()=>l.value?n.id:void 0),o=M(()=>{if(i&&i.value==="tooltip")return n.open&&n.id?n.id:void 0}),l=M(()=>{if(i&&i.value!=="tooltip")return i.value}),a=M(()=>l.value?`${n.open}`:void 0);let c;const u=["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"];return pt(()=>{re(()=>n.virtualRef,f=>{f&&(r.value=gg(f))},{immediate:!0}),re(r,(f,h)=>{c==null||c(),c=void 0,Or(f)&&(u.forEach(d=>{var p;const m=n[d];m&&(f.addEventListener(d.slice(2).toLowerCase(),m),(p=h==null?void 0:h.removeEventListener)==null||p.call(h,d.slice(2).toLowerCase(),m))}),Fh(f)&&(c=re([s,o,l,a],d=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((p,m)=>{Vi(d[m])?f.removeAttribute(p):f.setAttribute(p,d[m])})},{immediate:!0}))),Or(h)&&Fh(h)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(d=>h.removeAttribute(d))},{immediate:!0})}),Nn(()=>{if(c==null||c(),c=void 0,r.value&&Or(r.value)){const f=r.value;u.forEach(h=>{const d=n[h];d&&f.removeEventListener(h.slice(2).toLowerCase(),d)}),r.value=void 0}}),e({triggerRef:r}),(f,h)=>f.virtualTriggering?ie("v-if",!0):(B(),ne(w(JA),gf({key:0},f.$attrs,{"aria-controls":w(s),"aria-describedby":w(o),"aria-expanded":w(a),"aria-haspopup":w(l)}),{default:Y(()=>[se(f.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var tT=Te(eT,[["__file","trigger.vue"]]);const nT=["fixed","absolute"],iT=ke({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:ae(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:Oa,default:"bottom"},popperOptions:{type:ae(Object),default:()=>({})},strategy:{type:String,values:nT,default:"absolute"}}),l0=ke({...iT,id:String,style:{type:ae([String,Array,Object])},className:{type:ae([String,Array,Object])},effect:{type:ae(String),default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:ae([String,Array,Object])},popperStyle:{type:ae([String,Array,Object])},referenceEl:{type:ae(Object)},triggerTargetEl:{type:ae(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},virtualTriggering:Boolean,zIndex:Number,...nr(["ariaLabel"])}),rT={mouseenter:t=>t instanceof MouseEvent,mouseleave:t=>t instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},sT=(t,e=[])=>{const{placement:n,strategy:i,popperOptions:r}=t,s={placement:n,strategy:i,...r,modifiers:[...lT(t),...e]};return aT(s,r==null?void 0:r.modifiers),s},oT=t=>{if(ui)return gg(t)};function lT(t){const{offset:e,gpuAcceleration:n,fallbackPlacements:i}=t;return[{name:"offset",options:{offset:[0,e??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:i}},{name:"computeStyles",options:{gpuAcceleration:n}}]}function aT(t,e){e&&(t.modifiers=[...t.modifiers,...e??[]])}const cT=0,uT=t=>{const{popperInstanceRef:e,contentRef:n,triggerRef:i,role:r}=Ue(Lf,void 0),s=j(),o=j(),l=M(()=>({name:"eventListeners",enabled:!!t.visible})),a=M(()=>{var g;const v=w(s),x=(g=w(o))!=null?g:cT;return{name:"arrow",enabled:!Sk(v),options:{element:v,padding:x}}}),c=M(()=>({onFirstUpdate:()=>{p()},...sT(t,[w(a),w(l)])})),u=M(()=>oT(t.referenceEl)||w(i)),{attributes:f,state:h,styles:d,update:p,forceUpdate:m,instanceRef:y}=EC(u,n,c);return re(y,g=>e.value=g),pt(()=>{re(()=>{var g;return(g=w(u))==null?void 0:g.getBoundingClientRect()},()=>{p()})}),{attributes:f,arrowRef:s,contentRef:n,instanceRef:y,state:h,styles:d,role:r,forceUpdate:m,update:p}},fT=(t,{attributes:e,styles:n,role:i})=>{const{nextZIndex:r}=kw(),s=Ie("popper"),o=M(()=>w(e).popper),l=j(Re(t.zIndex)?t.zIndex:r()),a=M(()=>[s.b(),s.is("pure",t.pure),s.is(t.effect),t.popperClass]),c=M(()=>[{zIndex:w(l)},w(n).popper,t.popperStyle||{}]),u=M(()=>i.value==="dialog"?"false":void 0),f=M(()=>w(n).arrow||{});return{ariaModal:u,arrowStyle:f,contentAttrs:o,contentClass:a,contentStyle:c,contentZIndex:l,updateZIndex:()=>{l.value=Re(t.zIndex)?t.zIndex:r()}}},hT=(t,e)=>{const n=j(!1),i=j();return{focusStartRef:i,trapped:n,onFocusAfterReleased:c=>{var u;((u=c.detail)==null?void 0:u.focusReason)!=="pointer"&&(i.value="first",e("blur"))},onFocusAfterTrapped:()=>{e("focus")},onFocusInTrap:c=>{t.visible&&!n.value&&(c.target&&(i.value=c.target),n.value=!0)},onFocusoutPrevented:c=>{t.trapping||(c.detail.focusReason==="pointer"&&c.preventDefault(),n.value=!1)},onReleaseRequested:()=>{n.value=!1,e("close")}}},dT=Z({name:"ElPopperContent"}),pT=Z({...dT,props:l0,emits:rT,setup(t,{expose:e,emit:n}){const i=t,{focusStartRef:r,trapped:s,onFocusAfterReleased:o,onFocusAfterTrapped:l,onFocusInTrap:a,onFocusoutPrevented:c,onReleaseRequested:u}=hT(i,n),{attributes:f,arrowRef:h,contentRef:d,styles:p,instanceRef:m,role:y,update:g}=uT(i),{ariaModal:v,arrowStyle:x,contentAttrs:S,contentClass:b,contentStyle:O,updateZIndex:k}=fT(i,{styles:p,attributes:f,role:y}),R=Ue(Fs,void 0),N=j();Zt(n0,{arrowStyle:x,arrowRef:h,arrowOffset:N}),R&&Zt(Fs,{...R,addInputId:Nc,removeInputId:Nc});let I;const $=(V=!0)=>{g(),V&&k()},L=()=>{$(!1),i.visible&&i.focusOnShow?s.value=!0:i.visible===!1&&(s.value=!1)};return pt(()=>{re(()=>i.triggerTargetEl,(V,q)=>{I==null||I(),I=void 0;const P=w(V||d.value),E=w(q||d.value);Or(P)&&(I=re([y,()=>i.ariaLabel,v,()=>i.id],H=>{["role","aria-label","aria-modal","id"].forEach((te,J)=>{Vi(H[J])?P.removeAttribute(te):P.setAttribute(te,H[J])})},{immediate:!0})),E!==P&&Or(E)&&["role","aria-label","aria-modal","id"].forEach(H=>{E.removeAttribute(H)})},{immediate:!0}),re(()=>i.visible,L,{immediate:!0})}),Nn(()=>{I==null||I(),I=void 0}),e({popperContentRef:d,popperInstanceRef:m,updatePopper:$,contentStyle:O}),(V,q)=>(B(),ee("div",gf({ref_key:"contentRef",ref:d},w(S),{style:w(O),class:w(b),tabindex:"-1",onMouseenter:P=>V.$emit("mouseenter",P),onMouseleave:P=>V.$emit("mouseleave",P)}),[he(w(Cw),{trapped:w(s),"trap-on-focus-in":!0,"focus-trap-el":w(d),"focus-start-el":w(r),onFocusAfterTrapped:w(l),onFocusAfterReleased:w(o),onFocusin:w(a),onFocusoutPrevented:w(c),onReleaseRequested:w(u)},{default:Y(()=>[se(V.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16,["onMouseenter","onMouseleave"]))}});var mT=Te(pT,[["__file","content.vue"]]);const gT=jt(QA),Bf=Symbol("elTooltip"),If=ke({...DC,...l0,appendTo:{type:ae([String,Object])},content:{type:String,default:""},rawContent:Boolean,persistent:Boolean,visible:{type:ae(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean,...nr(["ariaLabel"])}),a0=ke({...o0,disabled:Boolean,trigger:{type:ae([String,Array]),default:"hover"},triggerKeys:{type:ae(Array),default:()=>[Fc.enter,Fc.space]}}),{useModelToggleProps:yT,useModelToggleEmits:bT,useModelToggle:vT}=Vg("visible"),wT=ke({...i0,...yT,...If,...a0,...r0,showArrow:{type:Boolean,default:!0}}),xT=[...bT,"before-show","before-hide","show","hide","open","close"],ST=(t,e)=>Ut(t)?t.includes(e):t===e,cr=(t,e,n)=>i=>{ST(w(t),e)&&n(i)},OT=Z({name:"ElTooltipTrigger"}),kT=Z({...OT,props:a0,setup(t,{expose:e}){const n=t,i=Ie("tooltip"),{controlled:r,id:s,open:o,onOpen:l,onClose:a,onToggle:c}=Ue(Bf,void 0),u=j(null),f=()=>{if(w(r)||n.disabled)return!0},h=Bi(n,"trigger"),d=$n(f,cr(h,"hover",l)),p=$n(f,cr(h,"hover",a)),m=$n(f,cr(h,"click",S=>{S.button===0&&c(S)})),y=$n(f,cr(h,"focus",l)),g=$n(f,cr(h,"focus",a)),v=$n(f,cr(h,"contextmenu",S=>{S.preventDefault(),c(S)})),x=$n(f,S=>{const{code:b}=S;n.triggerKeys.includes(b)&&(S.preventDefault(),c(S))});return e({triggerRef:u}),(S,b)=>(B(),ne(w(tT),{id:w(s),"virtual-ref":S.virtualRef,open:w(o),"virtual-triggering":S.virtualTriggering,class:W(w(i).e("trigger")),onBlur:w(g),onClick:w(m),onContextmenu:w(v),onFocus:w(y),onMouseenter:w(d),onMouseleave:w(p),onKeydown:w(x)},{default:Y(()=>[se(S.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var CT=Te(kT,[["__file","trigger.vue"]]);const AT=ke({to:{type:ae([String,Object]),required:!0},disabled:Boolean}),TT=Z({__name:"teleport",props:AT,setup(t){return(e,n)=>e.disabled?se(e.$slots,"default",{key:0}):(B(),ne(Aw,{key:1,to:e.to},[se(e.$slots,"default")],8,["to"]))}});var ET=Te(TT,[["__file","teleport.vue"]]);const PT=jt(ET),MT=Z({name:"ElTooltipContent",inheritAttrs:!1}),RT=Z({...MT,props:If,setup(t,{expose:e}){const n=t,{selector:i}=Jg(),r=Ie("tooltip"),s=j(null);let o;const{controlled:l,id:a,open:c,trigger:u,onClose:f,onOpen:h,onShow:d,onHide:p,onBeforeShow:m,onBeforeHide:y}=Ue(Bf,void 0),g=M(()=>n.transition||`${r.namespace.value}-fade-in-linear`),v=M(()=>n.persistent);Nn(()=>{o==null||o()});const x=M(()=>w(v)?!0:w(c)),S=M(()=>n.disabled?!1:w(c)),b=M(()=>n.appendTo||i.value),O=M(()=>{var E;return(E=n.style)!=null?E:{}}),k=j(!0),R=()=>{p(),k.value=!0},N=()=>{if(w(l))return!0},I=$n(N,()=>{n.enterable&&w(u)==="hover"&&h()}),$=$n(N,()=>{w(u)==="hover"&&f()}),L=()=>{var E,H;(H=(E=s.value)==null?void 0:E.updatePopper)==null||H.call(E),m==null||m()},V=()=>{y==null||y()},q=()=>{d(),o=Tw(M(()=>{var E;return(E=s.value)==null?void 0:E.popperContentRef}),()=>{if(w(l))return;w(u)!=="hover"&&f()})},P=()=>{n.virtualTriggering||f()};return re(()=>w(c),E=>{E?k.value=!1:o==null||o()},{flush:"post"}),re(()=>n.content,()=>{var E,H;(H=(E=s.value)==null?void 0:E.updatePopper)==null||H.call(E)}),e({contentRef:s}),(E,H)=>(B(),ne(w(PT),{disabled:!E.teleported,to:w(b)},{default:Y(()=>[he(mf,{name:w(g),onAfterLeave:R,onBeforeEnter:L,onAfterEnter:q,onBeforeLeave:V},{default:Y(()=>[w(x)?Xt((B(),ne(w(mT),gf({key:0,id:w(a),ref_key:"contentRef",ref:s},E.$attrs,{"aria-label":E.ariaLabel,"aria-hidden":k.value,"boundaries-padding":E.boundariesPadding,"fallback-placements":E.fallbackPlacements,"gpu-acceleration":E.gpuAcceleration,offset:E.offset,placement:E.placement,"popper-options":E.popperOptions,strategy:E.strategy,effect:E.effect,enterable:E.enterable,pure:E.pure,"popper-class":E.popperClass,"popper-style":[E.popperStyle,w(O)],"reference-el":E.referenceEl,"trigger-target-el":E.triggerTargetEl,visible:w(S),"z-index":E.zIndex,onMouseenter:w(I),onMouseleave:w($),onBlur:P,onClose:w(f)}),{default:Y(()=>[se(E.$slots,"default")]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[po,w(S)]]):ie("v-if",!0)]),_:3},8,["name"])]),_:3},8,["disabled","to"]))}});var DT=Te(RT,[["__file","content.vue"]]);const LT=Z({name:"ElTooltip"}),BT=Z({...LT,props:wT,emits:xT,setup(t,{expose:e,emit:n}){const i=t;RC();const r=fo(),s=j(),o=j(),l=()=>{var g;const v=w(s);v&&((g=v.popperInstanceRef)==null||g.update())},a=j(!1),c=j(),{show:u,hide:f,hasUpdateHandler:h}=vT({indicator:a,toggleReason:c}),{onOpen:d,onClose:p}=LC({showAfter:Bi(i,"showAfter"),hideAfter:Bi(i,"hideAfter"),autoClose:Bi(i,"autoClose"),open:u,close:f}),m=M(()=>En(i.visible)&&!h.value);Zt(Bf,{controlled:m,id:r,open:Ew(a),trigger:Bi(i,"trigger"),onOpen:g=>{d(g)},onClose:g=>{p(g)},onToggle:g=>{w(a)?p(g):d(g)},onShow:()=>{n("show",c.value)},onHide:()=>{n("hide",c.value)},onBeforeShow:()=>{n("before-show",c.value)},onBeforeHide:()=>{n("before-hide",c.value)},updatePopper:l}),re(()=>i.disabled,g=>{g&&a.value&&(a.value=!1)});const y=g=>{var v,x;const S=(x=(v=o.value)==null?void 0:v.contentRef)==null?void 0:x.popperContentRef,b=(g==null?void 0:g.relatedTarget)||document.activeElement;return S&&S.contains(b)};return Pw(()=>a.value&&f()),e({popperRef:s,contentRef:o,isFocusInsideContent:y,updatePopper:l,onOpen:d,onClose:p,hide:f}),(g,v)=>(B(),ne(w(gT),{ref_key:"popperRef",ref:s,role:g.role},{default:Y(()=>[he(CT,{disabled:g.disabled,trigger:g.trigger,"trigger-keys":g.triggerKeys,"virtual-ref":g.virtualRef,"virtual-triggering":g.virtualTriggering},{default:Y(()=>[g.$slots.default?se(g.$slots,"default",{key:0}):ie("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),he(DT,{ref_key:"contentRef",ref:o,"aria-label":g.ariaLabel,"boundaries-padding":g.boundariesPadding,content:g.content,disabled:g.disabled,effect:g.effect,enterable:g.enterable,"fallback-placements":g.fallbackPlacements,"hide-after":g.hideAfter,"gpu-acceleration":g.gpuAcceleration,offset:g.offset,persistent:g.persistent,"popper-class":g.popperClass,"popper-style":g.popperStyle,placement:g.placement,"popper-options":g.popperOptions,pure:g.pure,"raw-content":g.rawContent,"reference-el":g.referenceEl,"trigger-target-el":g.triggerTargetEl,"show-after":g.showAfter,strategy:g.strategy,teleported:g.teleported,transition:g.transition,"virtual-triggering":g.virtualTriggering,"z-index":g.zIndex,"append-to":g.appendTo},{default:Y(()=>[se(g.$slots,"content",{},()=>[g.rawContent?(B(),ee("span",{key:0,innerHTML:g.content},null,8,["innerHTML"])):(B(),ee("span",{key:1},Le(g.content),1))]),g.showArrow?(B(),ne(w(GA),{key:0,"arrow-offset":g.arrowOffset},null,8,["arrow-offset"])):ie("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var IT=Te(BT,[["__file","tooltip.vue"]]);const NT=jt(IT),ei=new Map;if(ui){let t;document.addEventListener("mousedown",e=>t=e),document.addEventListener("mouseup",e=>{if(t){for(const n of ei.values())for(const{documentHandler:i}of n)i(e,t);t=void 0}})}function Md(t,e){let n=[];return Ut(e.arg)?n=e.arg:Or(e.arg)&&n.push(e.arg),function(i,r){const s=e.instance.popperRef,o=i.target,l=r==null?void 0:r.target,a=!e||!e.instance,c=!o||!l,u=t.contains(o)||t.contains(l),f=t===o,h=n.length&&n.some(p=>p==null?void 0:p.contains(o))||n.length&&n.includes(l),d=s&&(s.contains(o)||s.contains(l));a||c||u||f||h||d||e.value(i,r)}}const FT={beforeMount(t,e){ei.has(t)||ei.set(t,[]),ei.get(t).push({documentHandler:Md(t,e),bindingFn:e.value})},updated(t,e){ei.has(t)||ei.set(t,[]);const n=ei.get(t),i=n.findIndex(s=>s.bindingFn===e.oldValue),r={documentHandler:Md(t,e),bindingFn:e.value};i>=0?n.splice(i,1,r):n.push(r)},unmounted(t){ei.delete(t)}},_T=100,$T=600,Rd={beforeMount(t,e){const n=e.value,{interval:i=_T,delay:r=$T}=$t(n)?{}:n;let s,o;const l=()=>$t(n)?n():n.handler(),a=()=>{o&&(clearTimeout(o),o=void 0),s&&(clearInterval(s),s=void 0)};t.addEventListener("mousedown",c=>{c.button===0&&(a(),l(),document.addEventListener("mouseup",()=>a(),{once:!0}),o=setTimeout(()=>{s=setInterval(()=>{l()},i)},r))})}},c0=ke({modelValue:{type:[String,Number,Boolean],default:void 0},size:ba,disabled:Boolean,label:{type:[String,Number,Boolean],default:void 0},value:{type:[String,Number,Boolean],default:void 0},name:{type:String,default:void 0}}),VT=ke({...c0,border:Boolean}),u0={[tt]:t=>Pn(t)||Re(t)||En(t),[pi]:t=>Pn(t)||Re(t)||En(t)},f0=Symbol("radioGroupKey"),h0=(t,e)=>{const n=j(),i=Ue(f0,void 0),r=M(()=>!!i),s=M(()=>_h(t.value)?t.label:t.value),o=M({get(){return r.value?i.modelValue:t.modelValue},set(f){r.value?i.changeEvent(f):e&&e(tt,f),n.value.checked=t.modelValue===s.value}}),l=tr(M(()=>i==null?void 0:i.size)),a=yf(M(()=>i==null?void 0:i.disabled)),c=j(!1),u=M(()=>a.value||r.value&&o.value!==s.value?-1:0);return Mw({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-radio",ref:"https://element-plus.org/en-US/component/radio.html"},M(()=>r.value&&_h(t.value))),{radioRef:n,isGroup:r,radioGroup:i,focus:c,size:l,disabled:a,tabIndex:u,modelValue:o,actualValue:s}},HT=Z({name:"ElRadio"}),WT=Z({...HT,props:VT,emits:u0,setup(t,{emit:e}){const n=t,i=Ie("radio"),{radioRef:r,radioGroup:s,focus:o,size:l,disabled:a,modelValue:c,actualValue:u}=h0(n,e);function f(){yt(()=>e("change",c.value))}return(h,d)=>{var p;return B(),ee("label",{class:W([w(i).b(),w(i).is("disabled",w(a)),w(i).is("focus",w(o)),w(i).is("bordered",h.border),w(i).is("checked",w(c)===w(u)),w(i).m(w(l))])},[ce("span",{class:W([w(i).e("input"),w(i).is("disabled",w(a)),w(i).is("checked",w(c)===w(u))])},[Xt(ce("input",{ref_key:"radioRef",ref:r,"onUpdate:modelValue":m=>bg(c)?c.value=m:null,class:W(w(i).e("original")),value:w(u),name:h.name||((p=w(s))==null?void 0:p.name),disabled:w(a),checked:w(c)===w(u),type:"radio",onFocus:m=>o.value=!0,onBlur:m=>o.value=!1,onChange:f,onClick:je(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","checked","onFocus","onBlur","onClick"]),[[yg,w(c)]]),ce("span",{class:W(w(i).e("inner"))},null,2)],2),ce("span",{class:W(w(i).e("label")),onKeydown:je(()=>{},["stop"])},[se(h.$slots,"default",{},()=>[jn(Le(h.label),1)])],42,["onKeydown"])],2)}}});var jT=Te(WT,[["__file","radio.vue"]]);const zT=ke({...c0}),qT=Z({name:"ElRadioButton"}),UT=Z({...qT,props:zT,setup(t){const e=t,n=Ie("radio"),{radioRef:i,focus:r,size:s,disabled:o,modelValue:l,radioGroup:a,actualValue:c}=h0(e),u=M(()=>({backgroundColor:(a==null?void 0:a.fill)||"",borderColor:(a==null?void 0:a.fill)||"",boxShadow:a!=null&&a.fill?`-1px 0 0 0 ${a.fill}`:"",color:(a==null?void 0:a.textColor)||""}));return(f,h)=>{var d;return B(),ee("label",{class:W([w(n).b("button"),w(n).is("active",w(l)===w(c)),w(n).is("disabled",w(o)),w(n).is("focus",w(r)),w(n).bm("button",w(s))])},[Xt(ce("input",{ref_key:"radioRef",ref:i,"onUpdate:modelValue":p=>bg(l)?l.value=p:null,class:W(w(n).be("button","original-radio")),value:w(c),type:"radio",name:f.name||((d=w(a))==null?void 0:d.name),disabled:w(o),onFocus:p=>r.value=!0,onBlur:p=>r.value=!1,onClick:je(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","onFocus","onBlur","onClick"]),[[yg,w(l)]]),ce("span",{class:W(w(n).be("button","inner")),style:lt(w(l)===w(c)?w(u):{}),onKeydown:je(()=>{},["stop"])},[se(f.$slots,"default",{},()=>[jn(Le(f.label),1)])],46,["onKeydown"])],2)}}});var d0=Te(UT,[["__file","radio-button.vue"]]);const QT=ke({id:{type:String,default:void 0},size:ba,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:void 0},fill:{type:String,default:""},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0},...nr(["ariaLabel"])}),KT=u0,XT=Z({name:"ElRadioGroup"}),GT=Z({...XT,props:QT,emits:KT,setup(t,{emit:e}){const n=t,i=Ie("radio"),r=fo(),s=j(),{formItem:o}=va(),{inputId:l,isLabeledByFormItem:a}=bf(n,{formItemContext:o}),c=f=>{e(tt,f),yt(()=>e("change",f))};pt(()=>{const f=s.value.querySelectorAll("[type=radio]"),h=f[0];!Array.from(f).some(d=>d.checked)&&h&&(h.tabIndex=0)});const u=M(()=>n.name||r.value);return Zt(f0,fn({...Xr(n),changeEvent:c,name:u})),re(()=>n.modelValue,()=>{n.validateEvent&&(o==null||o.validate("change").catch(f=>Rr()))}),(f,h)=>(B(),ee("div",{id:w(l),ref_key:"radioGroupRef",ref:s,class:W(w(i).b("group")),role:"radiogroup","aria-label":w(a)?void 0:f.ariaLabel||"radio-group","aria-labelledby":w(a)?w(o).labelId:void 0},[se(f.$slots,"default")],10,["id","aria-label","aria-labelledby"]))}});var p0=Te(GT,[["__file","radio-group.vue"]]);jt(jT,{RadioButton:d0,RadioGroup:p0});const YT=ho(p0),JT=ho(d0),Xc=ke({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:hf},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),ZT={close:t=>t instanceof MouseEvent,click:t=>t instanceof MouseEvent},e2=Z({name:"ElTag"}),t2=Z({...e2,props:Xc,emits:ZT,setup(t,{emit:e}){const n=t,i=tr(),r=Ie("tag"),s=M(()=>{const{type:c,hit:u,effect:f,closable:h,round:d}=n;return[r.b(),r.is("closable",h),r.m(c||"primary"),r.m(i.value),r.m(f),r.is("hit",u),r.is("round",d)]}),o=c=>{e("close",c)},l=c=>{e("click",c)},a=c=>{c.component.subTree.component.bum=null};return(c,u)=>c.disableTransitions?(B(),ee("span",{key:0,class:W(w(s)),style:lt({backgroundColor:c.color}),onClick:l},[ce("span",{class:W(w(r).e("content"))},[se(c.$slots,"default")],2),c.closable?(B(),ne(w(on),{key:0,class:W(w(r).e("close")),onClick:je(o,["stop"])},{default:Y(()=>[he(w($h))]),_:1},8,["class","onClick"])):ie("v-if",!0)],6)):(B(),ne(mf,{key:1,name:`${w(r).namespace.value}-zoom-in-center`,appear:"",onVnodeMounted:a},{default:Y(()=>[ce("span",{class:W(w(s)),style:lt({backgroundColor:c.color}),onClick:l},[ce("span",{class:W(w(r).e("content"))},[se(c.$slots,"default")],2),c.closable?(B(),ne(w(on),{key:0,class:W(w(r).e("close")),onClick:je(o,["stop"])},{default:Y(()=>[he(w($h))]),_:1},8,["class","onClick"])):ie("v-if",!0)],6)]),_:3},8,["name"]))}});var n2=Te(t2,[["__file","tag.vue"]]);const i2=jt(n2),m0=Symbol("rowContextKey"),r2=["start","center","end","space-around","space-between","space-evenly"],s2=["top","middle","bottom"],o2=ke({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:r2,default:"start"},align:{type:String,values:s2}}),l2=Z({name:"ElRow"}),a2=Z({...l2,props:o2,setup(t){const e=t,n=Ie("row"),i=M(()=>e.gutter);Zt(m0,{gutter:i});const r=M(()=>{const o={};return e.gutter&&(o.marginRight=o.marginLeft=`-${e.gutter/2}px`),o}),s=M(()=>[n.b(),n.is(`justify-${e.justify}`,e.justify!=="start"),n.is(`align-${e.align}`,!!e.align)]);return(o,l)=>(B(),ne(zt(o.tag),{class:W(w(s)),style:lt(w(r))},{default:Y(()=>[se(o.$slots,"default")]),_:3},8,["class","style"]))}});var c2=Te(a2,[["__file","row.vue"]]);const u2=jt(c2),f2=ke({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:ae([Number,Object]),default:()=>as({})},sm:{type:ae([Number,Object]),default:()=>as({})},md:{type:ae([Number,Object]),default:()=>as({})},lg:{type:ae([Number,Object]),default:()=>as({})},xl:{type:ae([Number,Object]),default:()=>as({})}}),h2=Z({name:"ElCol"}),d2=Z({...h2,props:f2,setup(t){const e=t,{gutter:n}=Ue(m0,{gutter:M(()=>0)}),i=Ie("col"),r=M(()=>{const o={};return n.value&&(o.paddingLeft=o.paddingRight=`${n.value/2}px`),o}),s=M(()=>{const o=[];return["span","offset","pull","push"].forEach(c=>{const u=e[c];Re(u)&&(c==="span"?o.push(i.b(`${e[c]}`)):u>0&&o.push(i.b(`${c}-${e[c]}`)))}),["xs","sm","md","lg","xl"].forEach(c=>{Re(e[c])?o.push(i.b(`${c}-${e[c]}`)):zn(e[c])&&Object.entries(e[c]).forEach(([u,f])=>{o.push(u!=="span"?i.b(`${c}-${u}-${f}`):i.b(`${c}-${f}`))})}),n.value&&o.push(i.is("guttered")),[i.b(),o]});return(o,l)=>(B(),ne(zt(o.tag),{class:W(w(s)),style:lt(w(r))},{default:Y(()=>[se(o.$slots,"default")]),_:3},8,["class","style"]))}});var p2=Te(d2,[["__file","col.vue"]]);const m2=jt(p2),g2=ke({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:ae(String),default:"solid"}}),y2=Z({name:"ElDivider"}),b2=Z({...y2,props:g2,setup(t){const e=t,n=Ie("divider"),i=M(()=>n.cssVar({"border-style":e.borderStyle}));return(r,s)=>(B(),ee("div",{class:W([w(n).b(),w(n).m(r.direction)]),style:lt(w(i)),role:"separator"},[r.$slots.default&&r.direction!=="vertical"?(B(),ee("div",{key:0,class:W([w(n).e("text"),w(n).is(r.contentPosition)])},[se(r.$slots,"default")],2)):ie("v-if",!0)],6))}});var v2=Te(b2,[["__file","divider.vue"]]);const w2=jt(v2),x2=ke({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:ba,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:t=>t===null||Re(t)||["min","max"].includes(t),default:null},name:String,placeholder:String,precision:{type:Number,validator:t=>t>=0&&t===Number.parseInt(`${t}`,10)},validateEvent:{type:Boolean,default:!0},...nr(["ariaLabel"])}),S2={[pi]:(t,e)=>e!==t,blur:t=>t instanceof FocusEvent,focus:t=>t instanceof FocusEvent,[Hi]:t=>Re(t)||Vi(t),[tt]:t=>Re(t)||Vi(t)},O2=Z({name:"ElInputNumber"}),k2=Z({...O2,props:x2,emits:S2,setup(t,{expose:e,emit:n}){const i=t,{t:r}=vg(),s=Ie("input-number"),o=j(),l=fn({currentValue:i.modelValue,userInput:null}),{formItem:a}=va(),c=M(()=>Re(i.modelValue)&&i.modelValue<=i.min),u=M(()=>Re(i.modelValue)&&i.modelValue>=i.max),f=M(()=>{const P=g(i.step);return si(i.precision)?Math.max(g(i.modelValue),P):(P>i.precision,i.precision)}),h=M(()=>i.controls&&i.controlsPosition==="right"),d=tr(),p=yf(),m=M(()=>{if(l.userInput!==null)return l.userInput;let P=l.currentValue;if(Vi(P))return"";if(Re(P)){if(Number.isNaN(P))return"";si(i.precision)||(P=P.toFixed(i.precision))}return P}),y=(P,E)=>{if(si(E)&&(E=f.value),E===0)return Math.round(P);let H=String(P);const te=H.indexOf(".");if(te===-1||!H.replace(".","").split("")[te+E])return P;const Ne=H.length;return H.charAt(Ne-1)==="5"&&(H=`${H.slice(0,Math.max(0,Ne-1))}6`),Number.parseFloat(Number(H).toFixed(E))},g=P=>{if(Vi(P))return 0;const E=P.toString(),H=E.indexOf(".");let te=0;return H!==-1&&(te=E.length-H-1),te},v=(P,E=1)=>Re(P)?y(P+i.step*E):l.currentValue,x=()=>{if(i.readonly||p.value||u.value)return;const P=Number(m.value)||0,E=v(P);O(E),n(Hi,l.currentValue),V()},S=()=>{if(i.readonly||p.value||c.value)return;const P=Number(m.value)||0,E=v(P,-1);O(E),n(Hi,l.currentValue),V()},b=(P,E)=>{const{max:H,min:te,step:J,precision:ye,stepStrictly:Ne,valueOnClear:we}=i;H<te&&ya("InputNumber","min should not be greater than max.");let fe=Number(P);if(Vi(P)||Number.isNaN(fe))return null;if(P===""){if(we===null)return null;fe=Pn(we)?{min:te,max:H}[we]:we}return Ne&&(fe=y(Math.round(fe/J)*J,ye),fe!==P&&E&&n(tt,fe)),si(ye)||(fe=y(fe,ye)),(fe>H||fe<te)&&(fe=fe>H?H:te,E&&n(tt,fe)),fe},O=(P,E=!0)=>{var H;const te=l.currentValue,J=b(P);if(!E){n(tt,J);return}te===J&&P||(l.userInput=null,n(tt,J),te!==J&&n(pi,J,te),i.validateEvent&&((H=a==null?void 0:a.validate)==null||H.call(a,"change").catch(ye=>Rr())),l.currentValue=J)},k=P=>{l.userInput=P;const E=P===""?null:Number(P);n(Hi,E),O(E,!1)},R=P=>{const E=P!==""?Number(P):"";(Re(E)&&!Number.isNaN(E)||P==="")&&O(E),V(),l.userInput=null},N=()=>{var P,E;(E=(P=o.value)==null?void 0:P.focus)==null||E.call(P)},I=()=>{var P,E;(E=(P=o.value)==null?void 0:P.blur)==null||E.call(P)},$=P=>{n("focus",P)},L=P=>{var E;l.userInput=null,n("blur",P),i.validateEvent&&((E=a==null?void 0:a.validate)==null||E.call(a,"blur").catch(H=>Rr()))},V=()=>{l.currentValue!==i.modelValue&&(l.currentValue=i.modelValue)},q=P=>{document.activeElement===P.target&&P.preventDefault()};return re(()=>i.modelValue,(P,E)=>{const H=b(P,!0);l.userInput===null&&H!==E&&(l.currentValue=H)},{immediate:!0}),pt(()=>{var P;const{min:E,max:H,modelValue:te}=i,J=(P=o.value)==null?void 0:P.input;if(J.setAttribute("role","spinbutton"),Number.isFinite(H)?J.setAttribute("aria-valuemax",String(H)):J.removeAttribute("aria-valuemax"),Number.isFinite(E)?J.setAttribute("aria-valuemin",String(E)):J.removeAttribute("aria-valuemin"),J.setAttribute("aria-valuenow",l.currentValue||l.currentValue===0?String(l.currentValue):""),J.setAttribute("aria-disabled",String(p.value)),!Re(te)&&te!=null){let ye=Number(te);Number.isNaN(ye)&&(ye=null),n(tt,ye)}J.addEventListener("wheel",q,{passive:!1})}),pf(()=>{var P,E;const H=(P=o.value)==null?void 0:P.input;H==null||H.setAttribute("aria-valuenow",`${(E=l.currentValue)!=null?E:""}`)}),e({focus:N,blur:I}),(P,E)=>(B(),ee("div",{class:W([w(s).b(),w(s).m(w(d)),w(s).is("disabled",w(p)),w(s).is("without-controls",!P.controls),w(s).is("controls-right",w(h))]),onDragstart:je(()=>{},["prevent"])},[P.controls?Xt((B(),ee("span",{key:0,role:"button","aria-label":w(r)("el.inputNumber.decrease"),class:W([w(s).e("decrease"),w(s).is("disabled",w(c))]),onKeydown:On(S,["enter"])},[se(P.$slots,"decrease-icon",{},()=>[he(w(on),null,{default:Y(()=>[w(h)?(B(),ne(w(wg),{key:0})):(B(),ne(w(Rw),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[w(Rd),S]]):ie("v-if",!0),P.controls?Xt((B(),ee("span",{key:1,role:"button","aria-label":w(r)("el.inputNumber.increase"),class:W([w(s).e("increase"),w(s).is("disabled",w(u))]),onKeydown:On(x,["enter"])},[se(P.$slots,"increase-icon",{},()=>[he(w(on),null,{default:Y(()=>[w(h)?(B(),ne(w(Dw),{key:0})):(B(),ne(w(Lw),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[w(Rd),x]]):ie("v-if",!0),he(w(xg),{id:P.id,ref_key:"input",ref:o,type:"number",step:P.step,"model-value":w(m),placeholder:P.placeholder,readonly:P.readonly,disabled:w(p),size:w(d),max:P.max,min:P.min,name:P.name,"aria-label":P.ariaLabel,"validate-event":!1,onKeydown:[On(je(x,["prevent"]),["up"]),On(je(S,["prevent"]),["down"])],onBlur:L,onFocus:$,onInput:k,onChange:R},Bw({_:2},[P.$slots.prefix?{name:"prefix",fn:Y(()=>[se(P.$slots,"prefix")])}:void 0,P.$slots.suffix?{name:"suffix",fn:Y(()=>[se(P.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],42,["onDragstart"]))}});var C2=Te(k2,[["__file","input-number.vue"]]);const A2=jt(C2),g0=Symbol("ElSelectGroup"),Ca=Symbol("ElSelect");function T2(t,e){const n=Ue(Ca),i=Ue(g0,{disabled:!1}),r=M(()=>u(an(n.props.modelValue),t.value)),s=M(()=>{var d;if(n.props.multiple){const p=an((d=n.props.modelValue)!=null?d:[]);return!r.value&&p.length>=n.props.multipleLimit&&n.props.multipleLimit>0}else return!1}),o=M(()=>t.label||(zn(t.value)?"":t.value)),l=M(()=>t.value||t.label||""),a=M(()=>t.disabled||e.groupDisabled||s.value),c=ga(),u=(d=[],p)=>{if(zn(t.value)){const m=n.props.valueKey;return d&&d.some(y=>Sg(Li(y,m))===Li(p,m))}else return d&&d.includes(p)},f=()=>{!t.disabled&&!i.disabled&&(n.states.hoveringIndex=n.optionsArray.indexOf(c.proxy))},h=d=>{const p=new RegExp(Ok(d),"i");e.visible=p.test(o.value)||t.created};return re(()=>o.value,()=>{!t.created&&!n.props.remote&&n.setSelected()}),re(()=>t.value,(d,p)=>{const{remote:m,valueKey:y}=n.props;if(d!==p&&(n.onOptionDestroy(p,c.proxy),n.onOptionCreate(c.proxy)),!t.created&&!m){if(y&&zn(d)&&zn(p)&&d[y]===p[y])return;n.setSelected()}}),re(()=>i.disabled,()=>{e.groupDisabled=i.disabled},{immediate:!0}),{select:n,currentLabel:o,currentValue:l,itemSelected:r,isDisabled:a,hoverItem:f,updateOption:h}}const E2=Z({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(t){const e=Ie("select"),n=fo(),i=M(()=>[e.be("dropdown","item"),e.is("disabled",w(l)),e.is("selected",w(o)),e.is("hovering",w(h))]),r=fn({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:s,itemSelected:o,isDisabled:l,select:a,hoverItem:c,updateOption:u}=T2(t,r),{visible:f,hover:h}=Xr(r),d=ga().proxy;a.onOptionCreate(d),Nn(()=>{const m=d.value,{selected:y}=a.states,v=(a.props.multiple?y:[y]).some(x=>x.value===d.value);yt(()=>{a.states.cachedOptions.get(m)===d&&!v&&a.states.cachedOptions.delete(m)}),a.onOptionDestroy(m,d)});function p(){l.value||a.handleOptionSelect(d)}return{ns:e,id:n,containerKls:i,currentLabel:s,itemSelected:o,isDisabled:l,select:a,hoverItem:c,updateOption:u,visible:f,hover:h,selectOptionClick:p,states:r}}});function P2(t,e,n,i,r,s){return Xt((B(),ee("li",{id:t.id,class:W(t.containerKls),role:"option","aria-disabled":t.isDisabled||void 0,"aria-selected":t.itemSelected,onMouseenter:t.hoverItem,onClick:je(t.selectOptionClick,["stop"])},[se(t.$slots,"default",{},()=>[ce("span",null,Le(t.currentLabel),1)])],42,["id","aria-disabled","aria-selected","onMouseenter","onClick"])),[[po,t.visible]])}var Nf=Te(E2,[["render",P2],["__file","option.vue"]]);const M2=Z({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const t=Ue(Ca),e=Ie("select"),n=M(()=>t.props.popperClass),i=M(()=>t.props.multiple),r=M(()=>t.props.fitInputWidth),s=j("");function o(){var l;s.value=`${(l=t.selectRef)==null?void 0:l.offsetWidth}px`}return pt(()=>{o(),Vn(t.selectRef,o)}),{ns:e,minWidth:s,popperClass:n,isMultiple:i,isFitInputWidth:r}}});function R2(t,e,n,i,r,s){return B(),ee("div",{class:W([t.ns.b("dropdown"),t.ns.is("multiple",t.isMultiple),t.popperClass]),style:lt({[t.isFitInputWidth?"width":"minWidth"]:t.minWidth})},[t.$slots.header?(B(),ee("div",{key:0,class:W(t.ns.be("dropdown","header"))},[se(t.$slots,"header")],2)):ie("v-if",!0),se(t.$slots,"default"),t.$slots.footer?(B(),ee("div",{key:1,class:W(t.ns.be("dropdown","footer"))},[se(t.$slots,"footer")],2)):ie("v-if",!0)],6)}var D2=Te(M2,[["render",R2],["__file","select-dropdown.vue"]]);const L2=11,B2=(t,e)=>{const{t:n}=vg(),i=fo(),r=Ie("select"),s=Ie("input"),o=fn({inputValue:"",options:new Map,cachedOptions:new Map,disabledOptions:new Map,optionValues:[],selected:[],selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),l=j(null),a=j(null),c=j(null),u=j(null),f=j(null),h=j(null),d=j(null),p=j(null),m=j(null),y=j(null),g=j(null),v=j(null),{isComposing:x,handleCompositionStart:S,handleCompositionUpdate:b,handleCompositionEnd:O}=Iw({afterComposition:A=>os(A)}),{wrapperRef:k,isFocused:R,handleBlur:N}=Nw(f,{beforeFocus(){return H.value},afterFocus(){t.automaticDropdown&&!I.value&&(I.value=!0,o.menuVisibleOnFocus=!0)},beforeBlur(A){var F,me;return((F=c.value)==null?void 0:F.isFocusInsideContent(A))||((me=u.value)==null?void 0:me.isFocusInsideContent(A))},afterBlur(){I.value=!1,o.menuVisibleOnFocus=!1}}),I=j(!1),$=j(),{form:L,formItem:V}=va(),{inputId:q}=bf(t,{formItemContext:V}),{valueOnClear:P,isEmptyValue:E}=Fw(t),H=M(()=>t.disabled||(L==null?void 0:L.disabled)),te=M(()=>Ut(t.modelValue)?t.modelValue.length>0:!E(t.modelValue)),J=M(()=>t.clearable&&!H.value&&o.inputHovering&&te.value),ye=M(()=>t.remote&&t.filterable&&!t.remoteShowSuffix?"":t.suffixIcon),Ne=M(()=>r.is("reverse",ye.value&&I.value)),we=M(()=>(V==null?void 0:V.validateState)||""),fe=M(()=>_w[we.value]),He=M(()=>t.remote?300:0),_e=M(()=>t.loading?t.loadingText||n("el.select.loading"):t.remote&&!o.inputValue&&o.options.size===0?!1:t.filterable&&o.inputValue&&o.options.size>0&&ut.value===0?t.noMatchText||n("el.select.noMatch"):o.options.size===0?t.noDataText||n("el.select.noData"):null),ut=M(()=>xe.value.filter(A=>A.visible).length),xe=M(()=>{const A=Array.from(o.options.values()),F=[];return o.optionValues.forEach(me=>{const Ke=A.findIndex(kt=>kt.value===me);Ke>-1&&F.push(A[Ke])}),F.length>=A.length?F:A}),K=M(()=>Array.from(o.cachedOptions.values())),be=M(()=>{const A=xe.value.filter(F=>!F.created).some(F=>F.currentLabel===o.inputValue);return t.filterable&&t.allowCreate&&o.inputValue!==""&&!A}),Fe=()=>{t.filterable&&$t(t.filterMethod)||t.filterable&&t.remote&&$t(t.remoteMethod)||xe.value.forEach(A=>{var F;(F=A.updateOption)==null||F.call(A,o.inputValue)})},Ee=tr(),Ot=M(()=>["small"].includes(Ee.value)?"small":"default"),sn=M({get(){return I.value&&_e.value!==!1},set(A){I.value=A}}),qa=M(()=>{if(t.multiple&&!si(t.modelValue))return an(t.modelValue).length===0&&!o.inputValue;const A=Ut(t.modelValue)?t.modelValue[0]:t.modelValue;return t.filterable||si(A)?!o.inputValue:!0}),Ua=M(()=>{var A;const F=(A=t.placeholder)!=null?A:n("el.select.placeholder");return t.multiple||!te.value?F:o.selectedLabel}),Po=M(()=>Vh?null:"mouseenter");re(()=>t.modelValue,(A,F)=>{t.multiple&&t.filterable&&!t.reserveKeyword&&(o.inputValue="",Ci("")),rr(),!dl(A,F)&&t.validateEvent&&(V==null||V.validate("change").catch(me=>Rr()))},{flush:"post",deep:!0}),re(()=>I.value,A=>{A?Ci(o.inputValue):(o.inputValue="",o.previousQuery=null,o.isBeforeHide=!0),e("visible-change",A)}),re(()=>o.options.entries(),()=>{var A;if(!ui)return;const F=((A=l.value)==null?void 0:A.querySelectorAll("input"))||[];(!t.filterable&&!t.defaultFirstOption&&!si(t.modelValue)||!Array.from(F).includes(document.activeElement))&&rr(),t.defaultFirstOption&&(t.filterable||t.remote)&&ut.value&&Mo()},{flush:"post"}),re(()=>o.hoveringIndex,A=>{Re(A)&&A>-1?$.value=xe.value[A]||{}:$.value={},xe.value.forEach(F=>{F.hover=$.value===F})}),$w(()=>{o.isBeforeHide||Fe()});const Ci=A=>{o.previousQuery===A||x.value||(o.previousQuery=A,t.filterable&&$t(t.filterMethod)?t.filterMethod(A):t.filterable&&t.remote&&$t(t.remoteMethod)&&t.remoteMethod(A),t.defaultFirstOption&&(t.filterable||t.remote)&&ut.value?yt(Mo):yt(sr))},Mo=()=>{const A=xe.value.filter(kt=>kt.visible&&!kt.disabled&&!kt.states.groupDisabled),F=A.find(kt=>kt.created),me=A[0],Ke=xe.value.map(kt=>kt.value);o.hoveringIndex=Dh(Ke,F||me)},rr=()=>{if(t.multiple)o.selectedLabel="";else{const F=Ut(t.modelValue)?t.modelValue[0]:t.modelValue,me=yn(F);o.selectedLabel=me.currentLabel,o.selected=[me];return}const A=[];si(t.modelValue)||an(t.modelValue).forEach(F=>{A.push(yn(F))}),o.selected=A},yn=A=>{let F;const me=Ka(A).toLowerCase()==="object",Ke=Ka(A).toLowerCase()==="null",kt=Ka(A).toLowerCase()==="undefined";for(let Ai=o.cachedOptions.size-1;Ai>=0;Ai--){const bn=K.value[Ai];if(me?Li(bn.value,t.valueKey)===Li(A,t.valueKey):bn.value===A){F={value:A,currentLabel:bn.currentLabel,get isDisabled(){return bn.isDisabled}};break}}if(F)return F;const Io=me?A.label:!Ke&&!kt?A:"";return{value:A,currentLabel:Io}},sr=()=>{o.hoveringIndex=xe.value.findIndex(A=>o.selected.some(F=>Bo(F)===Bo(A)))},Ro=()=>{o.selectionWidth=a.value.getBoundingClientRect().width},ns=()=>{o.calculatorWidth=h.value.getBoundingClientRect().width},is=()=>{o.collapseItemWidth=g.value.getBoundingClientRect().width},or=()=>{var A,F;(F=(A=c.value)==null?void 0:A.updatePopper)==null||F.call(A)},rs=()=>{var A,F;(F=(A=u.value)==null?void 0:A.updatePopper)==null||F.call(A)},ss=()=>{o.inputValue.length>0&&!I.value&&(I.value=!0),Ci(o.inputValue)},os=A=>{if(o.inputValue=A.target.value,t.remote)Ph();else return ss()},Ph=wk(()=>{ss()},He.value),ls=A=>{dl(t.modelValue,A)||e(pi,A)},_1=A=>xk(A,F=>!o.disabledOptions.has(F)),$1=A=>{if(t.multiple&&A.code!==Fc.delete&&A.target.value.length<=0){const F=an(t.modelValue).slice(),me=_1(F);if(me<0)return;const Ke=F[me];F.splice(me,1),e(tt,F),ls(F),e("remove-tag",Ke)}},V1=(A,F)=>{const me=o.selected.indexOf(F);if(me>-1&&!H.value){const Ke=an(t.modelValue).slice();Ke.splice(me,1),e(tt,Ke),ls(Ke),e("remove-tag",F.value)}A.stopPropagation(),Lo()},Mh=A=>{A.stopPropagation();const F=t.multiple?[]:P.value;if(t.multiple)for(const me of o.selected)me.isDisabled&&F.push(me.value);e(tt,F),ls(F),o.hoveringIndex=-1,I.value=!1,e("clear"),Lo()},Rh=A=>{var F;if(t.multiple){const me=an((F=t.modelValue)!=null?F:[]).slice(),Ke=Dh(me,A);Ke>-1?me.splice(Ke,1):(t.multipleLimit<=0||me.length<t.multipleLimit)&&me.push(A.value),e(tt,me),ls(me),A.created&&Ci(""),t.filterable&&!t.reserveKeyword&&(o.inputValue="")}else e(tt,A.value),ls(A.value),I.value=!1;Lo(),!I.value&&yt(()=>{Do(A)})},Dh=(A=[],F)=>zn(F==null?void 0:F.value)?A.findIndex(me=>dl(Li(me,t.valueKey),Bo(F))):A.indexOf(F.value),Do=A=>{var F,me,Ke,kt,Io;const No=Ut(A)?A[0]:A;let Ai=null;if(No!=null&&No.value){const bn=xe.value.filter(Ih=>Ih.value===No.value);bn.length>0&&(Ai=bn[0].$el)}if(c.value&&Ai){const bn=(kt=(Ke=(me=(F=c.value)==null?void 0:F.popperRef)==null?void 0:me.contentRef)==null?void 0:Ke.querySelector)==null?void 0:kt.call(Ke,`.${r.be("dropdown","wrap")}`);bn&&Vw(bn,Ai)}(Io=v.value)==null||Io.handleScroll()},H1=A=>{o.options.set(A.value,A),o.cachedOptions.set(A.value,A),A.disabled&&o.disabledOptions.set(A.value,A)},W1=(A,F)=>{o.options.get(A)===F&&o.options.delete(A)},j1=M(()=>{var A,F;return(F=(A=c.value)==null?void 0:A.popperRef)==null?void 0:F.contentRef}),z1=()=>{o.isBeforeHide=!1,yt(()=>Do(o.selected))},Lo=()=>{var A;(A=f.value)==null||A.focus()},q1=()=>{var A;if(I.value){I.value=!1,yt(()=>{var F;return(F=f.value)==null?void 0:F.blur()});return}(A=f.value)==null||A.blur()},U1=A=>{Mh(A)},Q1=A=>{if(I.value=!1,R.value){const F=new FocusEvent("focus",A);yt(()=>N(F))}},K1=()=>{o.inputValue.length>0?o.inputValue="":I.value=!1},Lh=()=>{H.value||(Vh&&(o.inputHovering=!0),o.menuVisibleOnFocus?o.menuVisibleOnFocus=!1:I.value=!I.value)},X1=()=>{I.value?xe.value[o.hoveringIndex]&&Rh(xe.value[o.hoveringIndex]):Lh()},Bo=A=>zn(A.value)?Li(A.value,t.valueKey):A.value,G1=M(()=>xe.value.filter(A=>A.visible).every(A=>A.disabled)),Y1=M(()=>t.multiple?t.collapseTags?o.selected.slice(0,t.maxCollapseTags):o.selected:[]),J1=M(()=>t.multiple?t.collapseTags?o.selected.slice(t.maxCollapseTags):[]:[]),Bh=A=>{if(!I.value){I.value=!0;return}if(!(o.options.size===0||o.filteredOptionsCount===0||x.value)&&!G1.value){A==="next"?(o.hoveringIndex++,o.hoveringIndex===o.options.size&&(o.hoveringIndex=0)):A==="prev"&&(o.hoveringIndex--,o.hoveringIndex<0&&(o.hoveringIndex=o.options.size-1));const F=xe.value[o.hoveringIndex];(F.disabled===!0||F.states.groupDisabled===!0||!F.visible)&&Bh(A),yt(()=>Do($.value))}},Z1=()=>{if(!a.value)return 0;const A=window.getComputedStyle(a.value);return Number.parseFloat(A.gap||"6px")},ew=M(()=>{const A=Z1();return{maxWidth:`${g.value&&t.maxCollapseTags===1?o.selectionWidth-o.collapseItemWidth-A:o.selectionWidth}px`}}),tw=M(()=>({maxWidth:`${o.selectionWidth}px`})),nw=M(()=>({width:`${Math.max(o.calculatorWidth,L2)}px`}));return Vn(a,Ro),Vn(h,ns),Vn(m,or),Vn(k,or),Vn(y,rs),Vn(g,is),pt(()=>{rr()}),{inputId:q,contentId:i,nsSelect:r,nsInput:s,states:o,isFocused:R,expanded:I,optionsArray:xe,hoverOption:$,selectSize:Ee,filteredOptionsCount:ut,resetCalculatorWidth:ns,updateTooltip:or,updateTagTooltip:rs,debouncedOnInputChange:Ph,onInput:os,deletePrevTag:$1,deleteTag:V1,deleteSelected:Mh,handleOptionSelect:Rh,scrollToOption:Do,hasModelValue:te,shouldShowPlaceholder:qa,currentPlaceholder:Ua,mouseEnterEventName:Po,showClose:J,iconComponent:ye,iconReverse:Ne,validateState:we,validateIcon:fe,showNewOption:be,updateOptions:Fe,collapseTagSize:Ot,setSelected:rr,selectDisabled:H,emptyText:_e,handleCompositionStart:S,handleCompositionUpdate:b,handleCompositionEnd:O,onOptionCreate:H1,onOptionDestroy:W1,handleMenuEnter:z1,focus:Lo,blur:q1,handleClearClick:U1,handleClickOutside:Q1,handleEsc:K1,toggleMenu:Lh,selectOption:X1,getValueKey:Bo,navigateOptions:Bh,dropdownMenuVisible:sn,showTagList:Y1,collapseTagList:J1,tagStyle:ew,collapseTagStyle:tw,inputStyle:nw,popperRef:j1,inputRef:f,tooltipRef:c,tagTooltipRef:u,calculatorRef:h,prefixRef:d,suffixRef:p,selectRef:l,wrapperRef:k,selectionRef:a,scrollbarRef:v,menuRef:m,tagMenuRef:y,collapseItemRef:g}};var I2=Z({name:"ElOptions",setup(t,{slots:e}){const n=Ue(Ca);let i=[];return()=>{var r,s;const o=(r=e.default)==null?void 0:r.call(e),l=[];function a(c){Ut(c)&&c.forEach(u=>{var f,h,d,p;const m=(f=(u==null?void 0:u.type)||{})==null?void 0:f.name;m==="ElOptionGroup"?a(!Pn(u.children)&&!Ut(u.children)&&$t((h=u.children)==null?void 0:h.default)?(d=u.children)==null?void 0:d.default():u.children):m==="ElOption"?l.push((p=u.props)==null?void 0:p.value):Ut(u.children)&&a(u.children)})}return o.length&&a((s=o[0])==null?void 0:s.children),dl(l,i)||(i=l,n&&(n.states.optionValues=l)),o}}});const N2=ke({name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:ba,effect:{type:ae(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:ae(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:If.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:yr,default:Hw},fitInputWidth:Boolean,suffixIcon:{type:yr,default:wg},tagType:{...Xc.type,default:"info"},tagEffect:{...Xc.effect,default:"light"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,placement:{type:ae(String),values:Oa,default:"bottom-start"},fallbackPlacements:{type:ae(Array),default:["bottom-start","top-start","right","left"]},appendTo:String,...Ww,...nr(["ariaLabel"])}),Dd="ElSelect",F2=Z({name:Dd,componentName:Dd,components:{ElSelectMenu:D2,ElOption:Nf,ElOptions:I2,ElTag:i2,ElScrollbar:jA,ElTooltip:NT,ElIcon:on},directives:{ClickOutside:FT},props:N2,emits:[tt,pi,"remove-tag","clear","visible-change","focus","blur"],setup(t,{emit:e}){const n=M(()=>{const{modelValue:o,multiple:l}=t,a=l?[]:void 0;return Ut(o)?l?o:a:l?a:o}),i=fn({...Xr(t),modelValue:n}),r=B2(i,e);Zt(Ca,fn({props:i,states:r.states,optionsArray:r.optionsArray,handleOptionSelect:r.handleOptionSelect,onOptionCreate:r.onOptionCreate,onOptionDestroy:r.onOptionDestroy,selectRef:r.selectRef,setSelected:r.setSelected}));const s=M(()=>t.multiple?r.states.selected.map(o=>o.currentLabel):r.states.selectedLabel);return{...r,modelValue:n,selectedLabel:s}}});function _2(t,e,n,i,r,s){const o=Ti("el-tag"),l=Ti("el-tooltip"),a=Ti("el-icon"),c=Ti("el-option"),u=Ti("el-options"),f=Ti("el-scrollbar"),h=Ti("el-select-menu"),d=jw("click-outside");return Xt((B(),ee("div",{ref:"selectRef",class:W([t.nsSelect.b(),t.nsSelect.m(t.selectSize)]),[qw(t.mouseEnterEventName)]:p=>t.states.inputHovering=!0,onMouseleave:p=>t.states.inputHovering=!1},[he(l,{ref:"tooltipRef",visible:t.dropdownMenuVisible,placement:t.placement,teleported:t.teleported,"popper-class":[t.nsSelect.e("popper"),t.popperClass],"popper-options":t.popperOptions,"fallback-placements":t.fallbackPlacements,effect:t.effect,pure:"",trigger:"click",transition:`${t.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:t.persistent,"append-to":t.appendTo,onBeforeShow:t.handleMenuEnter,onHide:p=>t.states.isBeforeHide=!1},{default:Y(()=>{var p;return[ce("div",{ref:"wrapperRef",class:W([t.nsSelect.e("wrapper"),t.nsSelect.is("focused",t.isFocused),t.nsSelect.is("hovering",t.states.inputHovering),t.nsSelect.is("filterable",t.filterable),t.nsSelect.is("disabled",t.selectDisabled)]),onClick:je(t.toggleMenu,["prevent"])},[t.$slots.prefix?(B(),ee("div",{key:0,ref:"prefixRef",class:W(t.nsSelect.e("prefix"))},[se(t.$slots,"prefix")],2)):ie("v-if",!0),ce("div",{ref:"selectionRef",class:W([t.nsSelect.e("selection"),t.nsSelect.is("near",t.multiple&&!t.$slots.prefix&&!!t.states.selected.length)])},[t.multiple?se(t.$slots,"tag",{key:0},()=>[(B(!0),ee(fi,null,Cs(t.showTagList,m=>(B(),ee("div",{key:t.getValueKey(m),class:W(t.nsSelect.e("selected-item"))},[he(o,{closable:!t.selectDisabled&&!m.isDisabled,size:t.collapseTagSize,type:t.tagType,effect:t.tagEffect,"disable-transitions":"",style:lt(t.tagStyle),onClose:y=>t.deleteTag(y,m)},{default:Y(()=>[ce("span",{class:W(t.nsSelect.e("tags-text"))},[se(t.$slots,"label",{label:m.currentLabel,value:m.value},()=>[jn(Le(m.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),t.collapseTags&&t.states.selected.length>t.maxCollapseTags?(B(),ne(l,{key:0,ref:"tagTooltipRef",disabled:t.dropdownMenuVisible||!t.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:t.effect,placement:"bottom",teleported:t.teleported},{default:Y(()=>[ce("div",{ref:"collapseItemRef",class:W(t.nsSelect.e("selected-item"))},[he(o,{closable:!1,size:t.collapseTagSize,type:t.tagType,effect:t.tagEffect,"disable-transitions":"",style:lt(t.collapseTagStyle)},{default:Y(()=>[ce("span",{class:W(t.nsSelect.e("tags-text"))}," + "+Le(t.states.selected.length-t.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:Y(()=>[ce("div",{ref:"tagMenuRef",class:W(t.nsSelect.e("selection"))},[(B(!0),ee(fi,null,Cs(t.collapseTagList,m=>(B(),ee("div",{key:t.getValueKey(m),class:W(t.nsSelect.e("selected-item"))},[he(o,{class:"in-tooltip",closable:!t.selectDisabled&&!m.isDisabled,size:t.collapseTagSize,type:t.tagType,effect:t.tagEffect,"disable-transitions":"",onClose:y=>t.deleteTag(y,m)},{default:Y(()=>[ce("span",{class:W(t.nsSelect.e("tags-text"))},[se(t.$slots,"label",{label:m.currentLabel,value:m.value},()=>[jn(Le(m.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):ie("v-if",!0)]):ie("v-if",!0),t.selectDisabled?ie("v-if",!0):(B(),ee("div",{key:1,class:W([t.nsSelect.e("selected-item"),t.nsSelect.e("input-wrapper"),t.nsSelect.is("hidden",!t.filterable)])},[Xt(ce("input",{id:t.inputId,ref:"inputRef","onUpdate:modelValue":m=>t.states.inputValue=m,type:"text",name:t.name,class:W([t.nsSelect.e("input"),t.nsSelect.is(t.selectSize)]),disabled:t.selectDisabled,autocomplete:t.autocomplete,style:lt(t.inputStyle),role:"combobox",readonly:!t.filterable,spellcheck:"false","aria-activedescendant":((p=t.hoverOption)==null?void 0:p.id)||"","aria-controls":t.contentId,"aria-expanded":t.dropdownMenuVisible,"aria-label":t.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onKeydown:[On(je(m=>t.navigateOptions("next"),["stop","prevent"]),["down"]),On(je(m=>t.navigateOptions("prev"),["stop","prevent"]),["up"]),On(je(t.handleEsc,["stop","prevent"]),["esc"]),On(je(t.selectOption,["stop","prevent"]),["enter"]),On(je(t.deletePrevTag,["stop"]),["delete"])],onCompositionstart:t.handleCompositionStart,onCompositionupdate:t.handleCompositionUpdate,onCompositionend:t.handleCompositionEnd,onInput:t.onInput,onClick:je(t.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","name","disabled","autocomplete","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onClick"]),[[zw,t.states.inputValue]]),t.filterable?(B(),ee("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:W(t.nsSelect.e("input-calculator")),textContent:Le(t.states.inputValue)},null,10,["textContent"])):ie("v-if",!0)],2)),t.shouldShowPlaceholder?(B(),ee("div",{key:2,class:W([t.nsSelect.e("selected-item"),t.nsSelect.e("placeholder"),t.nsSelect.is("transparent",!t.hasModelValue||t.expanded&&!t.states.inputValue)])},[t.hasModelValue?se(t.$slots,"label",{key:0,label:t.currentPlaceholder,value:t.modelValue},()=>[ce("span",null,Le(t.currentPlaceholder),1)]):(B(),ee("span",{key:1},Le(t.currentPlaceholder),1))],2)):ie("v-if",!0)],2),ce("div",{ref:"suffixRef",class:W(t.nsSelect.e("suffix"))},[t.iconComponent&&!t.showClose?(B(),ne(a,{key:0,class:W([t.nsSelect.e("caret"),t.nsSelect.e("icon"),t.iconReverse])},{default:Y(()=>[(B(),ne(zt(t.iconComponent)))]),_:1},8,["class"])):ie("v-if",!0),t.showClose&&t.clearIcon?(B(),ne(a,{key:1,class:W([t.nsSelect.e("caret"),t.nsSelect.e("icon"),t.nsSelect.e("clear")]),onClick:t.handleClearClick},{default:Y(()=>[(B(),ne(zt(t.clearIcon)))]),_:1},8,["class","onClick"])):ie("v-if",!0),t.validateState&&t.validateIcon?(B(),ne(a,{key:2,class:W([t.nsInput.e("icon"),t.nsInput.e("validateIcon")])},{default:Y(()=>[(B(),ne(zt(t.validateIcon)))]),_:1},8,["class"])):ie("v-if",!0)],2)],10,["onClick"])]}),content:Y(()=>[he(h,{ref:"menuRef"},{default:Y(()=>[t.$slots.header?(B(),ee("div",{key:0,class:W(t.nsSelect.be("dropdown","header")),onClick:je(()=>{},["stop"])},[se(t.$slots,"header")],10,["onClick"])):ie("v-if",!0),Xt(he(f,{id:t.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":t.nsSelect.be("dropdown","wrap"),"view-class":t.nsSelect.be("dropdown","list"),class:W([t.nsSelect.is("empty",t.filteredOptionsCount===0)]),role:"listbox","aria-label":t.ariaLabel,"aria-orientation":"vertical"},{default:Y(()=>[t.showNewOption?(B(),ne(c,{key:0,value:t.states.inputValue,created:!0},null,8,["value"])):ie("v-if",!0),he(u,null,{default:Y(()=>[se(t.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label"]),[[po,t.states.options.size>0&&!t.loading]]),t.$slots.loading&&t.loading?(B(),ee("div",{key:1,class:W(t.nsSelect.be("dropdown","loading"))},[se(t.$slots,"loading")],2)):t.loading||t.filteredOptionsCount===0?(B(),ee("div",{key:2,class:W(t.nsSelect.be("dropdown","empty"))},[se(t.$slots,"empty",{},()=>[ce("span",null,Le(t.emptyText),1)])],2)):ie("v-if",!0),t.$slots.footer?(B(),ee("div",{key:3,class:W(t.nsSelect.be("dropdown","footer")),onClick:je(()=>{},["stop"])},[se(t.$slots,"footer")],10,["onClick"])):ie("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","append-to","onBeforeShow","onHide"])],16,["onMouseleave"])),[[d,t.handleClickOutside,t.popperRef]])}var $2=Te(F2,[["render",_2],["__file","select.vue"]]);const V2=Z({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(t){const e=Ie("select"),n=j(null),i=ga(),r=j([]);Zt(g0,fn({...Xr(t)}));const s=M(()=>r.value.some(c=>c.visible===!0)),o=c=>{var u,f;return((u=c.type)==null?void 0:u.name)==="ElOption"&&!!((f=c.component)!=null&&f.proxy)},l=c=>{const u=an(c),f=[];return u.forEach(h=>{var d,p;o(h)?f.push(h.component.proxy):(d=h.children)!=null&&d.length?f.push(...l(h.children)):(p=h.component)!=null&&p.subTree&&f.push(...l(h.component.subTree))}),f},a=()=>{r.value=l(i.subTree)};return pt(()=>{a()}),Uw(n,a,{attributes:!0,subtree:!0,childList:!0}),{groupRef:n,visible:s,ns:e}}});function H2(t,e,n,i,r,s){return Xt((B(),ee("ul",{ref:"groupRef",class:W(t.ns.be("group","wrap"))},[ce("li",{class:W(t.ns.be("group","title"))},Le(t.label),3),ce("li",null,[ce("ul",{class:W(t.ns.b("group"))},[se(t.$slots,"default")],2)])],2)),[[po,t.visible]])}var y0=Te(V2,[["render",H2],["__file","option-group.vue"]]);const W2=jt($2,{Option:Nf,OptionGroup:y0}),j2=ho(Nf);ho(y0);const z2=ke({modelValue:{type:[Boolean,String,Number],default:!1},disabled:Boolean,loading:Boolean,size:{type:String,validator:Qw},width:{type:[String,Number],default:""},inlinePrompt:Boolean,inactiveActionIcon:{type:yr},activeActionIcon:{type:yr},activeIcon:{type:yr},inactiveIcon:{type:yr},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:ae(Function)},id:String,tabindex:{type:[String,Number]},...nr(["ariaLabel"])}),q2={[tt]:t=>En(t)||Pn(t)||Re(t),[pi]:t=>En(t)||Pn(t)||Re(t),[Hi]:t=>En(t)||Pn(t)||Re(t)},b0="ElSwitch",U2=Z({name:b0}),Q2=Z({...U2,props:z2,emits:q2,setup(t,{expose:e,emit:n}){const i=t,{formItem:r}=va(),s=tr(),o=Ie("switch"),{inputId:l}=bf(i,{formItemContext:r}),a=yf(M(()=>i.loading)),c=j(i.modelValue!==!1),u=j(),f=j(),h=M(()=>[o.b(),o.m(s.value),o.is("disabled",a.value),o.is("checked",g.value)]),d=M(()=>[o.e("label"),o.em("label","left"),o.is("active",!g.value)]),p=M(()=>[o.e("label"),o.em("label","right"),o.is("active",g.value)]),m=M(()=>({width:_s(i.width)}));re(()=>i.modelValue,()=>{c.value=!0});const y=M(()=>c.value?i.modelValue:!1),g=M(()=>y.value===i.activeValue);[i.activeValue,i.inactiveValue].includes(y.value)||(n(tt,i.inactiveValue),n(pi,i.inactiveValue),n(Hi,i.inactiveValue)),re(g,b=>{var O;u.value.checked=b,i.validateEvent&&((O=r==null?void 0:r.validate)==null||O.call(r,"change").catch(k=>Rr()))});const v=()=>{const b=g.value?i.inactiveValue:i.activeValue;n(tt,b),n(pi,b),n(Hi,b),yt(()=>{u.value.checked=g.value})},x=()=>{if(a.value)return;const{beforeChange:b}=i;if(!b){v();return}const O=b();[Hh(O),En(O)].includes(!0)||ya(b0,"beforeChange must return type `Promise<boolean>` or `boolean`"),Hh(O)?O.then(R=>{R&&v()}).catch(R=>{}):O&&v()},S=()=>{var b,O;(O=(b=u.value)==null?void 0:b.focus)==null||O.call(b)};return pt(()=>{u.value.checked=g.value}),e({focus:S,checked:g}),(b,O)=>(B(),ee("div",{class:W(w(h)),onClick:je(x,["prevent"])},[ce("input",{id:w(l),ref_key:"input",ref:u,class:W(w(o).e("input")),type:"checkbox",role:"switch","aria-checked":w(g),"aria-disabled":w(a),"aria-label":b.ariaLabel,name:b.name,"true-value":b.activeValue,"false-value":b.inactiveValue,disabled:w(a),tabindex:b.tabindex,onChange:v,onKeydown:On(x,["enter"])},null,42,["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"]),!b.inlinePrompt&&(b.inactiveIcon||b.inactiveText)?(B(),ee("span",{key:0,class:W(w(d))},[b.inactiveIcon?(B(),ne(w(on),{key:0},{default:Y(()=>[(B(),ne(zt(b.inactiveIcon)))]),_:1})):ie("v-if",!0),!b.inactiveIcon&&b.inactiveText?(B(),ee("span",{key:1,"aria-hidden":w(g)},Le(b.inactiveText),9,["aria-hidden"])):ie("v-if",!0)],2)):ie("v-if",!0),ce("span",{ref_key:"core",ref:f,class:W(w(o).e("core")),style:lt(w(m))},[b.inlinePrompt?(B(),ee("div",{key:0,class:W(w(o).e("inner"))},[b.activeIcon||b.inactiveIcon?(B(),ne(w(on),{key:0,class:W(w(o).is("icon"))},{default:Y(()=>[(B(),ne(zt(w(g)?b.activeIcon:b.inactiveIcon)))]),_:1},8,["class"])):b.activeText||b.inactiveText?(B(),ee("span",{key:1,class:W(w(o).is("text")),"aria-hidden":!w(g)},Le(w(g)?b.activeText:b.inactiveText),11,["aria-hidden"])):ie("v-if",!0)],2)):ie("v-if",!0),ce("div",{class:W(w(o).e("action"))},[b.loading?(B(),ne(w(on),{key:0,class:W(w(o).is("loading"))},{default:Y(()=>[he(w(Kw))]),_:1},8,["class"])):w(g)?se(b.$slots,"active-action",{key:1},()=>[b.activeActionIcon?(B(),ne(w(on),{key:0},{default:Y(()=>[(B(),ne(zt(b.activeActionIcon)))]),_:1})):ie("v-if",!0)]):w(g)?ie("v-if",!0):se(b.$slots,"inactive-action",{key:2},()=>[b.inactiveActionIcon?(B(),ne(w(on),{key:0},{default:Y(()=>[(B(),ne(zt(b.inactiveActionIcon)))]),_:1})):ie("v-if",!0)])],2)],6),!b.inlinePrompt&&(b.activeIcon||b.activeText)?(B(),ee("span",{key:1,class:W(w(p))},[b.activeIcon?(B(),ne(w(on),{key:0},{default:Y(()=>[(B(),ne(zt(b.activeIcon)))]),_:1})):ie("v-if",!0),!b.activeIcon&&b.activeText?(B(),ee("span",{key:1,"aria-hidden":!w(g)},Le(b.activeText),9,["aria-hidden"])):ie("v-if",!0)],2)):ie("v-if",!0)],10,["onClick"]))}});var K2=Te(Q2,[["__file","switch.vue"]]);const X2=jt(K2);function v0(t,e){return function(){return t.apply(e,arguments)}}const{toString:G2}=Object.prototype,{getPrototypeOf:Ff}=Object,Aa=(t=>e=>{const n=G2.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),mn=t=>(t=t.toLowerCase(),e=>Aa(e)===t),Ta=t=>e=>typeof e===t,{isArray:Gr}=Array,Ws=Ta("undefined");function Y2(t){return t!==null&&!Ws(t)&&t.constructor!==null&&!Ws(t.constructor)&&Wt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const w0=mn("ArrayBuffer");function J2(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&w0(t.buffer),e}const Z2=Ta("string"),Wt=Ta("function"),x0=Ta("number"),Ea=t=>t!==null&&typeof t=="object",eE=t=>t===!0||t===!1,gl=t=>{if(Aa(t)!=="object")return!1;const e=Ff(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},tE=mn("Date"),nE=mn("File"),iE=mn("Blob"),rE=mn("FileList"),sE=t=>Ea(t)&&Wt(t.pipe),oE=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Wt(t.append)&&((e=Aa(t))==="formdata"||e==="object"&&Wt(t.toString)&&t.toString()==="[object FormData]"))},lE=mn("URLSearchParams"),[aE,cE,uE,fE]=["ReadableStream","Request","Response","Headers"].map(mn),hE=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function bo(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,r;if(typeof t!="object"&&(t=[t]),Gr(t))for(i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let l;for(i=0;i<o;i++)l=s[i],e.call(null,t[l],l,t)}}function S0(t,e){e=e.toLowerCase();const n=Object.keys(t);let i=n.length,r;for(;i-- >0;)if(r=n[i],e===r.toLowerCase())return r;return null}const Ni=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,O0=t=>!Ws(t)&&t!==Ni;function Gc(){const{caseless:t}=O0(this)&&this||{},e={},n=(i,r)=>{const s=t&&S0(e,r)||r;gl(e[s])&&gl(i)?e[s]=Gc(e[s],i):gl(i)?e[s]=Gc({},i):Gr(i)?e[s]=i.slice():e[s]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&bo(arguments[i],n);return e}const dE=(t,e,n,{allOwnKeys:i}={})=>(bo(e,(r,s)=>{n&&Wt(r)?t[s]=v0(r,n):t[s]=r},{allOwnKeys:i}),t),pE=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),mE=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},gE=(t,e,n,i)=>{let r,s,o;const l={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),s=r.length;s-- >0;)o=r[s],(!i||i(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=n!==!1&&Ff(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},yE=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},bE=t=>{if(!t)return null;if(Gr(t))return t;let e=t.length;if(!x0(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},vE=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Ff(Uint8Array)),wE=(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=i.next())&&!r.done;){const s=r.value;e.call(t,s[0],s[1])}},xE=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},SE=mn("HTMLFormElement"),OE=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,r){return i.toUpperCase()+r}),Ld=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),kE=mn("RegExp"),k0=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};bo(n,(r,s)=>{let o;(o=e(r,s,t))!==!1&&(i[s]=o||r)}),Object.defineProperties(t,i)},CE=t=>{k0(t,(e,n)=>{if(Wt(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(Wt(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},AE=(t,e)=>{const n={},i=r=>{r.forEach(s=>{n[s]=!0})};return Gr(t)?i(t):i(String(t).split(e)),n},TE=()=>{},EE=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,ec="abcdefghijklmnopqrstuvwxyz",Bd="0123456789",C0={DIGIT:Bd,ALPHA:ec,ALPHA_DIGIT:ec+ec.toUpperCase()+Bd},PE=(t=16,e=C0.ALPHA_DIGIT)=>{let n="";const{length:i}=e;for(;t--;)n+=e[Math.random()*i|0];return n};function ME(t){return!!(t&&Wt(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const RE=t=>{const e=new Array(10),n=(i,r)=>{if(Ea(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[r]=i;const s=Gr(i)?[]:{};return bo(i,(o,l)=>{const a=n(o,r+1);!Ws(a)&&(s[l]=a)}),e[r]=void 0,s}}return i};return n(t,0)},DE=mn("AsyncFunction"),LE=t=>t&&(Ea(t)||Wt(t))&&Wt(t.then)&&Wt(t.catch),A0=((t,e)=>t?setImmediate:e?((n,i)=>(Ni.addEventListener("message",({source:r,data:s})=>{r===Ni&&s===n&&i.length&&i.shift()()},!1),r=>{i.push(r),Ni.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Wt(Ni.postMessage)),BE=typeof queueMicrotask<"u"?queueMicrotask.bind(Ni):typeof process<"u"&&process.nextTick||A0,T={isArray:Gr,isArrayBuffer:w0,isBuffer:Y2,isFormData:oE,isArrayBufferView:J2,isString:Z2,isNumber:x0,isBoolean:eE,isObject:Ea,isPlainObject:gl,isReadableStream:aE,isRequest:cE,isResponse:uE,isHeaders:fE,isUndefined:Ws,isDate:tE,isFile:nE,isBlob:iE,isRegExp:kE,isFunction:Wt,isStream:sE,isURLSearchParams:lE,isTypedArray:vE,isFileList:rE,forEach:bo,merge:Gc,extend:dE,trim:hE,stripBOM:pE,inherits:mE,toFlatObject:gE,kindOf:Aa,kindOfTest:mn,endsWith:yE,toArray:bE,forEachEntry:wE,matchAll:xE,isHTMLForm:SE,hasOwnProperty:Ld,hasOwnProp:Ld,reduceDescriptors:k0,freezeMethods:CE,toObjectSet:AE,toCamelCase:OE,noop:TE,toFiniteNumber:EE,findKey:S0,global:Ni,isContextDefined:O0,ALPHABET:C0,generateString:PE,isSpecCompliantForm:ME,toJSONObject:RE,isAsyncFn:DE,isThenable:LE,setImmediate:A0,asap:BE};function oe(t,e,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r)}T.inherits(oe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:T.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const T0=oe.prototype,E0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{E0[t]={value:t}});Object.defineProperties(oe,E0);Object.defineProperty(T0,"isAxiosError",{value:!0});oe.from=(t,e,n,i,r,s)=>{const o=Object.create(T0);return T.toFlatObject(t,o,function(a){return a!==Error.prototype},l=>l!=="isAxiosError"),oe.call(o,t.message,e,n,i,r),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const IE=null;function Yc(t){return T.isPlainObject(t)||T.isArray(t)}function P0(t){return T.endsWith(t,"[]")?t.slice(0,-2):t}function Id(t,e,n){return t?t.concat(e).map(function(r,s){return r=P0(r),!n&&s?"["+r+"]":r}).join(n?".":""):e}function NE(t){return T.isArray(t)&&!t.some(Yc)}const FE=T.toFlatObject(T,{},null,function(e){return/^is[A-Z]/.test(e)});function Pa(t,e,n){if(!T.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=T.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,y){return!T.isUndefined(y[m])});const i=n.metaTokens,r=n.visitor||u,s=n.dots,o=n.indexes,a=(n.Blob||typeof Blob<"u"&&Blob)&&T.isSpecCompliantForm(e);if(!T.isFunction(r))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(T.isDate(p))return p.toISOString();if(!a&&T.isBlob(p))throw new oe("Blob is not supported. Use a Buffer instead.");return T.isArrayBuffer(p)||T.isTypedArray(p)?a&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,m,y){let g=p;if(p&&!y&&typeof p=="object"){if(T.endsWith(m,"{}"))m=i?m:m.slice(0,-2),p=JSON.stringify(p);else if(T.isArray(p)&&NE(p)||(T.isFileList(p)||T.endsWith(m,"[]"))&&(g=T.toArray(p)))return m=P0(m),g.forEach(function(x,S){!(T.isUndefined(x)||x===null)&&e.append(o===!0?Id([m],S,s):o===null?m:m+"[]",c(x))}),!1}return Yc(p)?!0:(e.append(Id(y,m,s),c(p)),!1)}const f=[],h=Object.assign(FE,{defaultVisitor:u,convertValue:c,isVisitable:Yc});function d(p,m){if(!T.isUndefined(p)){if(f.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));f.push(p),T.forEach(p,function(g,v){(!(T.isUndefined(g)||g===null)&&r.call(e,g,T.isString(v)?v.trim():v,m,h))===!0&&d(g,m?m.concat(v):[v])}),f.pop()}}if(!T.isObject(t))throw new TypeError("data must be an object");return d(t),e}function Nd(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function _f(t,e){this._pairs=[],t&&Pa(t,this,e)}const M0=_f.prototype;M0.append=function(e,n){this._pairs.push([e,n])};M0.toString=function(e){const n=e?function(i){return e.call(this,i,Nd)}:Nd;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function _E(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function R0(t,e,n){if(!e)return t;const i=n&&n.encode||_E,r=n&&n.serialize;let s;if(r?s=r(e,n):s=T.isURLSearchParams(e)?e.toString():new _f(e,n).toString(i),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class Fd{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){T.forEach(this.handlers,function(i){i!==null&&e(i)})}}const D0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$E=typeof URLSearchParams<"u"?URLSearchParams:_f,VE=typeof FormData<"u"?FormData:null,HE=typeof Blob<"u"?Blob:null,WE={isBrowser:!0,classes:{URLSearchParams:$E,FormData:VE,Blob:HE},protocols:["http","https","file","blob","url","data"]},$f=typeof window<"u"&&typeof document<"u",jE=(t=>$f&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),zE=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",qE=$f&&window.location.href||"http://localhost",UE=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:$f,hasStandardBrowserEnv:jE,hasStandardBrowserWebWorkerEnv:zE,origin:qE},Symbol.toStringTag,{value:"Module"})),un={...UE,...WE};function QE(t,e){return Pa(t,new un.classes.URLSearchParams,Object.assign({visitor:function(n,i,r,s){return un.isNode&&T.isBuffer(n)?(this.append(i,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function KE(t){return T.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function XE(t){const e={},n=Object.keys(t);let i;const r=n.length;let s;for(i=0;i<r;i++)s=n[i],e[s]=t[s];return e}function L0(t){function e(n,i,r,s){let o=n[s++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),a=s>=n.length;return o=!o&&T.isArray(r)?r.length:o,a?(T.hasOwnProp(r,o)?r[o]=[r[o],i]:r[o]=i,!l):((!r[o]||!T.isObject(r[o]))&&(r[o]=[]),e(n,i,r[o],s)&&T.isArray(r[o])&&(r[o]=XE(r[o])),!l)}if(T.isFormData(t)&&T.isFunction(t.entries)){const n={};return T.forEachEntry(t,(i,r)=>{e(KE(i),r,n,0)}),n}return null}function GE(t,e,n){if(T.isString(t))try{return(e||JSON.parse)(t),T.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const vo={transitional:D0,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const i=n.getContentType()||"",r=i.indexOf("application/json")>-1,s=T.isObject(e);if(s&&T.isHTMLForm(e)&&(e=new FormData(e)),T.isFormData(e))return r?JSON.stringify(L0(e)):e;if(T.isArrayBuffer(e)||T.isBuffer(e)||T.isStream(e)||T.isFile(e)||T.isBlob(e)||T.isReadableStream(e))return e;if(T.isArrayBufferView(e))return e.buffer;if(T.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return QE(e,this.formSerializer).toString();if((l=T.isFileList(e))||i.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return Pa(l?{"files[]":e}:e,a&&new a,this.formSerializer)}}return s||r?(n.setContentType("application/json",!1),GE(e)):e}],transformResponse:[function(e){const n=this.transitional||vo.transitional,i=n&&n.forcedJSONParsing,r=this.responseType==="json";if(T.isResponse(e)||T.isReadableStream(e))return e;if(e&&T.isString(e)&&(i&&!this.responseType||r)){const o=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?oe.from(l,oe.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:un.classes.FormData,Blob:un.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};T.forEach(["delete","get","head","post","put","patch"],t=>{vo.headers[t]={}});const YE=T.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),JE=t=>{const e={};let n,i,r;return t&&t.split(`
`).forEach(function(o){r=o.indexOf(":"),n=o.substring(0,r).trim().toLowerCase(),i=o.substring(r+1).trim(),!(!n||e[n]&&YE[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},_d=Symbol("internals");function us(t){return t&&String(t).trim().toLowerCase()}function yl(t){return t===!1||t==null?t:T.isArray(t)?t.map(yl):String(t)}function ZE(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const eP=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function tc(t,e,n,i,r){if(T.isFunction(i))return i.call(this,e,n);if(r&&(e=n),!!T.isString(e)){if(T.isString(i))return e.indexOf(i)!==-1;if(T.isRegExp(i))return i.test(e)}}function tP(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function nP(t,e){const n=T.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(r,s,o){return this[i].call(this,e,r,s,o)},configurable:!0})})}class Bt{constructor(e){e&&this.set(e)}set(e,n,i){const r=this;function s(l,a,c){const u=us(a);if(!u)throw new Error("header name must be a non-empty string");const f=T.findKey(r,u);(!f||r[f]===void 0||c===!0||c===void 0&&r[f]!==!1)&&(r[f||a]=yl(l))}const o=(l,a)=>T.forEach(l,(c,u)=>s(c,u,a));if(T.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(T.isString(e)&&(e=e.trim())&&!eP(e))o(JE(e),n);else if(T.isHeaders(e))for(const[l,a]of e.entries())s(a,l,i);else e!=null&&s(n,e,i);return this}get(e,n){if(e=us(e),e){const i=T.findKey(this,e);if(i){const r=this[i];if(!n)return r;if(n===!0)return ZE(r);if(T.isFunction(n))return n.call(this,r,i);if(T.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=us(e),e){const i=T.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||tc(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let r=!1;function s(o){if(o=us(o),o){const l=T.findKey(i,o);l&&(!n||tc(i,i[l],l,n))&&(delete i[l],r=!0)}}return T.isArray(e)?e.forEach(s):s(e),r}clear(e){const n=Object.keys(this);let i=n.length,r=!1;for(;i--;){const s=n[i];(!e||tc(this,this[s],s,e,!0))&&(delete this[s],r=!0)}return r}normalize(e){const n=this,i={};return T.forEach(this,(r,s)=>{const o=T.findKey(i,s);if(o){n[o]=yl(r),delete n[s];return}const l=e?tP(s):String(s).trim();l!==s&&delete n[s],n[l]=yl(r),i[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return T.forEach(this,(i,r)=>{i!=null&&i!==!1&&(n[r]=e&&T.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(r=>i.set(r)),i}static accessor(e){const i=(this[_d]=this[_d]={accessors:{}}).accessors,r=this.prototype;function s(o){const l=us(o);i[l]||(nP(r,o),i[l]=!0)}return T.isArray(e)?e.forEach(s):s(e),this}}Bt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);T.reduceDescriptors(Bt.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});T.freezeMethods(Bt);function nc(t,e){const n=this||vo,i=e||n,r=Bt.from(i.headers);let s=i.data;return T.forEach(t,function(l){s=l.call(n,s,r.normalize(),e?e.status:void 0)}),r.normalize(),s}function B0(t){return!!(t&&t.__CANCEL__)}function Yr(t,e,n){oe.call(this,t??"canceled",oe.ERR_CANCELED,e,n),this.name="CanceledError"}T.inherits(Yr,oe,{__CANCEL__:!0});function I0(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new oe("Request failed with status code "+n.status,[oe.ERR_BAD_REQUEST,oe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function iP(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function rP(t,e){t=t||10;const n=new Array(t),i=new Array(t);let r=0,s=0,o;return e=e!==void 0?e:1e3,function(a){const c=Date.now(),u=i[s];o||(o=c),n[r]=a,i[r]=c;let f=s,h=0;for(;f!==r;)h+=n[f++],f=f%t;if(r=(r+1)%t,r===s&&(s=(s+1)%t),c-o<e)return;const d=u&&c-u;return d?Math.round(h*1e3/d):void 0}}function sP(t,e){let n=0,i=1e3/e,r,s;const o=(c,u=Date.now())=>{n=u,r=null,s&&(clearTimeout(s),s=null),t.apply(null,c)};return[(...c)=>{const u=Date.now(),f=u-n;f>=i?o(c,u):(r=c,s||(s=setTimeout(()=>{s=null,o(r)},i-f)))},()=>r&&o(r)]}const Il=(t,e,n=3)=>{let i=0;const r=rP(50,250);return sP(s=>{const o=s.loaded,l=s.lengthComputable?s.total:void 0,a=o-i,c=r(a),u=o<=l;i=o;const f={loaded:o,total:l,progress:l?o/l:void 0,bytes:a,rate:c||void 0,estimated:c&&l&&u?(l-o)/c:void 0,event:s,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(f)},n)},$d=(t,e)=>{const n=t!=null;return[i=>e[0]({lengthComputable:n,total:t,loaded:i}),e[1]]},Vd=t=>(...e)=>T.asap(()=>t(...e)),oP=un.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function r(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=r(window.location.href),function(o){const l=T.isString(o)?r(o):o;return l.protocol===i.protocol&&l.host===i.host}}():function(){return function(){return!0}}(),lP=un.hasStandardBrowserEnv?{write(t,e,n,i,r,s){const o=[t+"="+encodeURIComponent(e)];T.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),T.isString(i)&&o.push("path="+i),T.isString(r)&&o.push("domain="+r),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function aP(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function cP(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function N0(t,e){return t&&!aP(e)?cP(t,e):e}const Hd=t=>t instanceof Bt?{...t}:t;function Xi(t,e){e=e||{};const n={};function i(c,u,f){return T.isPlainObject(c)&&T.isPlainObject(u)?T.merge.call({caseless:f},c,u):T.isPlainObject(u)?T.merge({},u):T.isArray(u)?u.slice():u}function r(c,u,f){if(T.isUndefined(u)){if(!T.isUndefined(c))return i(void 0,c,f)}else return i(c,u,f)}function s(c,u){if(!T.isUndefined(u))return i(void 0,u)}function o(c,u){if(T.isUndefined(u)){if(!T.isUndefined(c))return i(void 0,c)}else return i(void 0,u)}function l(c,u,f){if(f in e)return i(c,u);if(f in t)return i(void 0,c)}const a={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(c,u)=>r(Hd(c),Hd(u),!0)};return T.forEach(Object.keys(Object.assign({},t,e)),function(u){const f=a[u]||r,h=f(t[u],e[u],u);T.isUndefined(h)&&f!==l||(n[u]=h)}),n}const F0=t=>{const e=Xi({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:s,headers:o,auth:l}=e;e.headers=o=Bt.from(o),e.url=R0(N0(e.baseURL,e.url),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let a;if(T.isFormData(n)){if(un.hasStandardBrowserEnv||un.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((a=o.getContentType())!==!1){const[c,...u]=a?a.split(";").map(f=>f.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(un.hasStandardBrowserEnv&&(i&&T.isFunction(i)&&(i=i(e)),i||i!==!1&&oP(e.url))){const c=r&&s&&lP.read(s);c&&o.set(r,c)}return e},uP=typeof XMLHttpRequest<"u",fP=uP&&function(t){return new Promise(function(n,i){const r=F0(t);let s=r.data;const o=Bt.from(r.headers).normalize();let{responseType:l,onUploadProgress:a,onDownloadProgress:c}=r,u,f,h,d,p;function m(){d&&d(),p&&p(),r.cancelToken&&r.cancelToken.unsubscribe(u),r.signal&&r.signal.removeEventListener("abort",u)}let y=new XMLHttpRequest;y.open(r.method.toUpperCase(),r.url,!0),y.timeout=r.timeout;function g(){if(!y)return;const x=Bt.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),b={data:!l||l==="text"||l==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:x,config:t,request:y};I0(function(k){n(k),m()},function(k){i(k),m()},b),y=null}"onloadend"in y?y.onloadend=g:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(g)},y.onabort=function(){y&&(i(new oe("Request aborted",oe.ECONNABORTED,t,y)),y=null)},y.onerror=function(){i(new oe("Network Error",oe.ERR_NETWORK,t,y)),y=null},y.ontimeout=function(){let S=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const b=r.transitional||D0;r.timeoutErrorMessage&&(S=r.timeoutErrorMessage),i(new oe(S,b.clarifyTimeoutError?oe.ETIMEDOUT:oe.ECONNABORTED,t,y)),y=null},s===void 0&&o.setContentType(null),"setRequestHeader"in y&&T.forEach(o.toJSON(),function(S,b){y.setRequestHeader(b,S)}),T.isUndefined(r.withCredentials)||(y.withCredentials=!!r.withCredentials),l&&l!=="json"&&(y.responseType=r.responseType),c&&([h,p]=Il(c,!0),y.addEventListener("progress",h)),a&&y.upload&&([f,d]=Il(a),y.upload.addEventListener("progress",f),y.upload.addEventListener("loadend",d)),(r.cancelToken||r.signal)&&(u=x=>{y&&(i(!x||x.type?new Yr(null,t,y):x),y.abort(),y=null)},r.cancelToken&&r.cancelToken.subscribe(u),r.signal&&(r.signal.aborted?u():r.signal.addEventListener("abort",u)));const v=iP(r.url);if(v&&un.protocols.indexOf(v)===-1){i(new oe("Unsupported protocol "+v+":",oe.ERR_BAD_REQUEST,t));return}y.send(s||null)})},hP=(t,e)=>{let n=new AbortController,i;const r=function(a){if(!i){i=!0,o();const c=a instanceof Error?a:this.reason;n.abort(c instanceof oe?c:new Yr(c instanceof Error?c.message:c))}};let s=e&&setTimeout(()=>{r(new oe(`timeout ${e} of ms exceeded`,oe.ETIMEDOUT))},e);const o=()=>{t&&(s&&clearTimeout(s),s=null,t.forEach(a=>{a&&(a.removeEventListener?a.removeEventListener("abort",r):a.unsubscribe(r))}),t=null)};t.forEach(a=>a&&a.addEventListener&&a.addEventListener("abort",r));const{signal:l}=n;return l.unsubscribe=o,[l,()=>{s&&clearTimeout(s),s=null}]},dP=function*(t,e){let n=t.byteLength;if(!e||n<e){yield t;return}let i=0,r;for(;i<n;)r=i+e,yield t.slice(i,r),i=r},pP=async function*(t,e,n){for await(const i of t)yield*dP(ArrayBuffer.isView(i)?i:await n(String(i)),e)},Wd=(t,e,n,i,r)=>{const s=pP(t,e,r);let o=0,l,a=c=>{l||(l=!0,i&&i(c))};return new ReadableStream({async pull(c){try{const{done:u,value:f}=await s.next();if(u){a(),c.close();return}let h=f.byteLength;if(n){let d=o+=h;n(d)}c.enqueue(new Uint8Array(f))}catch(u){throw a(u),u}},cancel(c){return a(c),s.return()}},{highWaterMark:2})},Ma=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",_0=Ma&&typeof ReadableStream=="function",Jc=Ma&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),$0=(t,...e)=>{try{return!!t(...e)}catch{return!1}},mP=_0&&$0(()=>{let t=!1;const e=new Request(un.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),jd=64*1024,Zc=_0&&$0(()=>T.isReadableStream(new Response("").body)),Nl={stream:Zc&&(t=>t.body)};Ma&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Nl[e]&&(Nl[e]=T.isFunction(t[e])?n=>n[e]():(n,i)=>{throw new oe(`Response type '${e}' is not supported`,oe.ERR_NOT_SUPPORT,i)})})})(new Response);const gP=async t=>{if(t==null)return 0;if(T.isBlob(t))return t.size;if(T.isSpecCompliantForm(t))return(await new Request(t).arrayBuffer()).byteLength;if(T.isArrayBufferView(t)||T.isArrayBuffer(t))return t.byteLength;if(T.isURLSearchParams(t)&&(t=t+""),T.isString(t))return(await Jc(t)).byteLength},yP=async(t,e)=>{const n=T.toFiniteNumber(t.getContentLength());return n??gP(e)},bP=Ma&&(async t=>{let{url:e,method:n,data:i,signal:r,cancelToken:s,timeout:o,onDownloadProgress:l,onUploadProgress:a,responseType:c,headers:u,withCredentials:f="same-origin",fetchOptions:h}=F0(t);c=c?(c+"").toLowerCase():"text";let[d,p]=r||s||o?hP([r,s],o):[],m,y;const g=()=>{!m&&setTimeout(()=>{d&&d.unsubscribe()}),m=!0};let v;try{if(a&&mP&&n!=="get"&&n!=="head"&&(v=await yP(u,i))!==0){let O=new Request(e,{method:"POST",body:i,duplex:"half"}),k;if(T.isFormData(i)&&(k=O.headers.get("content-type"))&&u.setContentType(k),O.body){const[R,N]=$d(v,Il(Vd(a)));i=Wd(O.body,jd,R,N,Jc)}}T.isString(f)||(f=f?"include":"omit"),y=new Request(e,{...h,signal:d,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:i,duplex:"half",credentials:f});let x=await fetch(y);const S=Zc&&(c==="stream"||c==="response");if(Zc&&(l||S)){const O={};["status","statusText","headers"].forEach(I=>{O[I]=x[I]});const k=T.toFiniteNumber(x.headers.get("content-length")),[R,N]=l&&$d(k,Il(Vd(l),!0))||[];x=new Response(Wd(x.body,jd,R,()=>{N&&N(),S&&g()},Jc),O)}c=c||"text";let b=await Nl[T.findKey(Nl,c)||"text"](x,t);return!S&&g(),p&&p(),await new Promise((O,k)=>{I0(O,k,{data:b,headers:Bt.from(x.headers),status:x.status,statusText:x.statusText,config:t,request:y})})}catch(x){throw g(),x&&x.name==="TypeError"&&/fetch/i.test(x.message)?Object.assign(new oe("Network Error",oe.ERR_NETWORK,t,y),{cause:x.cause||x}):oe.from(x,x&&x.code,t,y)}}),eu={http:IE,xhr:fP,fetch:bP};T.forEach(eu,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const zd=t=>`- ${t}`,vP=t=>T.isFunction(t)||t===null||t===!1,V0={getAdapter:t=>{t=T.isArray(t)?t:[t];const{length:e}=t;let n,i;const r={};for(let s=0;s<e;s++){n=t[s];let o;if(i=n,!vP(n)&&(i=eu[(o=String(n)).toLowerCase()],i===void 0))throw new oe(`Unknown adapter '${o}'`);if(i)break;r[o||"#"+s]=i}if(!i){const s=Object.entries(r).map(([l,a])=>`adapter ${l} `+(a===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(zd).join(`
`):" "+zd(s[0]):"as no adapter specified";throw new oe("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i},adapters:eu};function ic(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Yr(null,t)}function qd(t){return ic(t),t.headers=Bt.from(t.headers),t.data=nc.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),V0.getAdapter(t.adapter||vo.adapter)(t).then(function(i){return ic(t),i.data=nc.call(t,t.transformResponse,i),i.headers=Bt.from(i.headers),i},function(i){return B0(i)||(ic(t),i&&i.response&&(i.response.data=nc.call(t,t.transformResponse,i.response),i.response.headers=Bt.from(i.response.headers))),Promise.reject(i)})}const H0="1.7.3",Vf={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Vf[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const Ud={};Vf.transitional=function(e,n,i){function r(s,o){return"[Axios v"+H0+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return(s,o,l)=>{if(e===!1)throw new oe(r(o," has been removed"+(n?" in "+n:"")),oe.ERR_DEPRECATED);return n&&!Ud[o]&&(Ud[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,l):!0}};function wP(t,e,n){if(typeof t!="object")throw new oe("options must be an object",oe.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let r=i.length;for(;r-- >0;){const s=i[r],o=e[s];if(o){const l=t[s],a=l===void 0||o(l,s,t);if(a!==!0)throw new oe("option "+s+" must be "+a,oe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new oe("Unknown option "+s,oe.ERR_BAD_OPTION)}}const tu={assertOptions:wP,validators:Vf},Zn=tu.validators;class ji{constructor(e){this.defaults=e,this.interceptors={request:new Fd,response:new Fd}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let r;Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";try{i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}catch{}}throw i}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Xi(this.defaults,n);const{transitional:i,paramsSerializer:r,headers:s}=n;i!==void 0&&tu.assertOptions(i,{silentJSONParsing:Zn.transitional(Zn.boolean),forcedJSONParsing:Zn.transitional(Zn.boolean),clarifyTimeoutError:Zn.transitional(Zn.boolean)},!1),r!=null&&(T.isFunction(r)?n.paramsSerializer={serialize:r}:tu.assertOptions(r,{encode:Zn.function,serialize:Zn.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&T.merge(s.common,s[n.method]);s&&T.forEach(["delete","get","head","post","put","patch","common"],p=>{delete s[p]}),n.headers=Bt.concat(o,s);const l=[];let a=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(a=a&&m.synchronous,l.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let u,f=0,h;if(!a){const p=[qd.bind(this),void 0];for(p.unshift.apply(p,l),p.push.apply(p,c),h=p.length,u=Promise.resolve(n);f<h;)u=u.then(p[f++],p[f++]);return u}h=l.length;let d=n;for(f=0;f<h;){const p=l[f++],m=l[f++];try{d=p(d)}catch(y){m.call(this,y);break}}try{u=qd.call(this,d)}catch(p){return Promise.reject(p)}for(f=0,h=c.length;f<h;)u=u.then(c[f++],c[f++]);return u}getUri(e){e=Xi(this.defaults,e);const n=N0(e.baseURL,e.url);return R0(n,e.params,e.paramsSerializer)}}T.forEach(["delete","get","head","options"],function(e){ji.prototype[e]=function(n,i){return this.request(Xi(i||{},{method:e,url:n,data:(i||{}).data}))}});T.forEach(["post","put","patch"],function(e){function n(i){return function(s,o,l){return this.request(Xi(l||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}ji.prototype[e]=n(),ji.prototype[e+"Form"]=n(!0)});class Hf{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const i=this;this.promise.then(r=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](r);i._listeners=null}),this.promise.then=r=>{let s;const o=new Promise(l=>{i.subscribe(l),s=l}).then(r);return o.cancel=function(){i.unsubscribe(s)},o},e(function(s,o,l){i.reason||(i.reason=new Yr(s,o,l),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new Hf(function(r){e=r}),cancel:e}}}function xP(t){return function(n){return t.apply(null,n)}}function SP(t){return T.isObject(t)&&t.isAxiosError===!0}const nu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(nu).forEach(([t,e])=>{nu[e]=t});function W0(t){const e=new ji(t),n=v0(ji.prototype.request,e);return T.extend(n,ji.prototype,e,{allOwnKeys:!0}),T.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return W0(Xi(t,r))},n}const Qe=W0(vo);Qe.Axios=ji;Qe.CanceledError=Yr;Qe.CancelToken=Hf;Qe.isCancel=B0;Qe.VERSION=H0;Qe.toFormData=Pa;Qe.AxiosError=oe;Qe.Cancel=Qe.CanceledError;Qe.all=function(e){return Promise.all(e)};Qe.spread=xP;Qe.isAxiosError=SP;Qe.mergeConfig=Xi;Qe.AxiosHeaders=Bt;Qe.formToJSON=t=>L0(T.isHTMLForm(t)?new FormData(t):t);Qe.getAdapter=V0.getAdapter;Qe.HttpStatusCode=nu;Qe.default=Qe;const j0=fn([]),Jr=Qe.create({baseURL:"",timeout:5e4});Jr.interceptors.request.use(t=>t);Jr.interceptors.response.use(t=>{t.status;const e=t.data.code;let n;switch(e){case 200:if(e===200)return t.data;e===500?(n=t.data.data||t.data.msg||"服务器内部错误",At(n)||(Ze({message:n,type:"error"}),Ct(n))):(n=t.data.data||t.data.msg||"未知错误",At(n)||(Ze({message:n,type:"error"}),Ct(n)));break;case 400:n="请求错误，请检查参数！",At(n)||(Ze({message:n,type:"error"}),Ct(n));break;case 401:n="未授权，请重新登录！",At(n)||(Ze({message:n,type:"warning"}),Ct(n)),Xa.push("/login");break;case 403:n="您没有权限访问该资源！",At(n)||(Ze({message:n,type:"warning"}),Ct(n));break;case 404:n="请求的资源不存在！",At(n)||(Ze({message:n,type:"error"}),Ct(n));break;case 500:t.data.type==="offline"&&Xa.push("/offline"),n=t.data.msg||t.data.data||"服务器发生错误，请稍后再试！",At(n)||(Ze({message:n,type:"warning"}),Ct(n));break;default:if(t.config.url==="/api/config.yaml")return t.data;n="发生未知错误！",At(n)||(Ze({message:n,type:"error"}),Ct(n))}return Promise.reject(new Error(t.data.msg||"Error"))},t=>{const e=t.response?t.response.status:null;let n;switch(e){case 400:n="请求错误，请检查输入！",At(n)||(Ze({message:n,type:"error"}),Ct(n));break;case 401:n="认证失败，请重新登录！",At(n)||(Ze({message:n,type:"warning"}),Ct(n)),Xa.push("/login");break;case 403:n="禁止访问，请检查权限！",At(n)||(Ze({message:n,type:"error"}),Ct(n));break;case 404:n="请求的资源未找到！",At(n)||(Ze({message:n,type:"error"}),Ct(n));break;case 500:n="服务器内部错误，请稍后重试！",At(n)||(Ze({message:n,type:"error"}),Ct(n));break;default:n="发生未知错误，请稍后重试！",At(n)||(Ze({message:n,type:"error"}),Ct(n))}return Promise.reject(t)});function Ct(t){j0.push({content:t,timestamp:Date.now()})}function At(t){const e=Date.now(),n=1e3;return j0.some(i=>i.content===t&&e-i.timestamp<n)}function OP(){return Jr({url:"/api/config/all",method:"get"})}function kP(){return Jr({url:"/api/config.yaml",method:"get"})}function CP(){return Jr({url:"/api/sn",method:"get"})}function Qd(t){return Jr({url:"/api/config.yaml",method:"put",data:t})}class ve{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){[e,n]=_r(this,e,n);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),kn.from(r,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=_r(this,e,n);let i=[];return this.decompose(e,n,i,0),kn.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new Ms(this),s=new Ms(e);for(let o=n,l=n;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(l+=r.value.length,r.done||l>=i)return!0}}iter(e=1){return new Ms(this,e)}iterRange(e,n=this.length){return new z0(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new q0(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?ve.empty:e.length<=32?new $e(e):kn.from($e.split(e,[]))}}class $e extends ve{constructor(e,n=AP(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.text[s],l=r+o.length;if((n?i:l)>=e)return new TP(r,l,i,o);r=l+1,i++}}decompose(e,n,i,r){let s=e<=0&&n>=this.length?this:new $e(Kd(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),l=bl(s.text,o.text.slice(),0,s.length);if(l.length<=32)i.push(new $e(l,o.length+s.length));else{let a=l.length>>1;i.push(new $e(l.slice(0,a)),new $e(l.slice(a)))}}else i.push(s)}replace(e,n,i){if(!(i instanceof $e))return super.replace(e,n,i);[e,n]=_r(this,e,n);let r=bl(this.text,bl(i.text,Kd(this.text,0,e)),n),s=this.length+i.length-(n-e);return r.length<=32?new $e(r,s):kn.from($e.split(r,[]),s)}sliceString(e,n=this.length,i=`
`){[e,n]=_r(this,e,n);let r="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let l=this.text[o],a=s+l.length;s>e&&o&&(r+=i),e<a&&n>s&&(r+=l.slice(Math.max(0,e-s),n-s)),s=a+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(n.push(new $e(i,r)),i=[],r=-1);return r>-1&&n.push(new $e(i,r)),n}}class kn extends ve{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.children[s],l=r+o.length,a=i+o.lines-1;if((n?a:l)>=e)return o.lineInner(e,n,i,r);r=l+1,i=a+1}}decompose(e,n,i,r){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let l=this.children[s],a=o+l.length;if(e<=a&&n>=o){let c=r&((o<=e?1:0)|(a>=n?2:0));o>=e&&a<=n&&!c?i.push(l):l.decompose(e-o,n-o,i,c)}o=a+1}}replace(e,n,i){if([e,n]=_r(this,e,n),i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.length;if(e>=s&&n<=l){let a=o.replace(e-s,n-s,i),c=this.lines-o.lines+a.lines;if(a.lines<c>>4&&a.lines>c>>6){let u=this.children.slice();return u[r]=a,new kn(u,this.length-(n-e)+i.length)}return super.replace(s,l,a)}s=l+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){[e,n]=_r(this,e,n);let r="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let l=this.children[s],a=o+l.length;o>e&&s&&(r+=i),e<a&&n>o&&(r+=l.sliceString(e-o,n-o,i)),o=a+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof kn))return 0;let i=0,[r,s,o,l]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==o||s==l)return i;let a=this.children[r],c=e.children[s];if(a!=c)return i+a.scanIdentical(c,n);i+=a.length+1}}static from(e,n=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let d of e)i+=d.lines;if(i<32){let d=[];for(let p of e)p.flatten(d);return new $e(d,n)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,l=[],a=0,c=-1,u=[];function f(d){let p;if(d.lines>s&&d instanceof kn)for(let m of d.children)f(m);else d.lines>o&&(a>o||!a)?(h(),l.push(d)):d instanceof $e&&a&&(p=u[u.length-1])instanceof $e&&d.lines+p.lines<=32?(a+=d.lines,c+=d.length+1,u[u.length-1]=new $e(p.text.concat(d.text),p.length+1+d.length)):(a+d.lines>r&&h(),a+=d.lines,c+=d.length+1,u.push(d))}function h(){a!=0&&(l.push(u.length==1?u[0]:kn.from(u,c)),c=-1,a=u.length=0)}for(let d of e)f(d);return h(),l.length==1?l[0]:new kn(l,n)}}ve.empty=new $e([""],0);function AP(t){let e=-1;for(let n of t)e+=n.length+1;return e}function bl(t,e,n=0,i=1e9){for(let r=0,s=0,o=!0;s<t.length&&r<=i;s++){let l=t[s],a=r+l.length;a>=n&&(a>i&&(l=l.slice(0,i-r)),r<n&&(l=l.slice(n-r)),o?(e[e.length-1]+=l,o=!1):e.push(l)),r=a+1}return e}function Kd(t,e,n){return bl(t,[""],e,n)}class Ms{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof $e?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,l=r instanceof $e?r.text.length:r.children.length;if(o==(n>0?l:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof $e){let a=r.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,a.length>Math.max(0,e))return this.value=e==0?a:n>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=r.children[o+(n<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(n>0?1:(a instanceof $e?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class z0{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new Ms(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class q0{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:r}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(ve.prototype[Symbol.iterator]=function(){return this.iter()},Ms.prototype[Symbol.iterator]=z0.prototype[Symbol.iterator]=q0.prototype[Symbol.iterator]=function(){return this});class TP{constructor(e,n,i,r){this.from=e,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}}function _r(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}let kr="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<kr.length;t++)kr[t]+=kr[t-1];function EP(t){for(let e=1;e<kr.length;e+=2)if(kr[e]>t)return kr[e-1]<=t;return!1}function Xd(t){return t>=127462&&t<=127487}const Gd=8205;function ot(t,e,n=!0,i=!0){return(n?U0:PP)(t,e,i)}function U0(t,e,n){if(e==t.length)return e;e&&Q0(t.charCodeAt(e))&&K0(t.charCodeAt(e-1))&&e--;let i=rt(t,e);for(e+=qt(i);e<t.length;){let r=rt(t,e);if(i==Gd||r==Gd||n&&EP(r))e+=qt(r),i=r;else if(Xd(r)){let s=0,o=e-2;for(;o>=0&&Xd(rt(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function PP(t,e,n){for(;e>0;){let i=U0(t,e-2,n);if(i<e)return i;e--}return 0}function Q0(t){return t>=56320&&t<57344}function K0(t){return t>=55296&&t<56320}function rt(t,e){let n=t.charCodeAt(e);if(!K0(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return Q0(i)?(n-55296<<10)+(i-56320)+65536:n}function Wf(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function qt(t){return t<65536?1:2}const iu=/\r\n?|\n/;var vt=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(vt||(vt={}));class Dn{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,r=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,n=!1){ru(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new Dn(e)}composeDesc(e){return this.empty?e:e.empty?this:X0(this,e)}mapDesc(e,n=!1){return e.empty?this:su(this,e,n)}mapPos(e,n=-1,i=vt.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],c=r+l;if(a<0){if(c>e)return s+(e-r);s+=l}else{if(i!=vt.Simple&&c>=e&&(i==vt.TrackDel&&r<e&&c>e||i==vt.TrackBefore&&r<e||i==vt.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!l)return e==r||n<0?s:s+a;s+=a}r=c}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let i=0,r=0;i<this.sections.length&&r<=n;){let s=this.sections[i++],o=this.sections[i++],l=r+s;if(o>=0&&r<=n&&l>=e)return r<e&&l>n?"cover":!0;r=l}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Dn(e)}static create(e){return new Dn(e)}}class Xe extends Dn{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return ru(this,(n,i,r,s,o)=>e=e.replace(r,r+(i-n),o),!1),e}mapDesc(e,n=!1){return su(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let r=0,s=0;r<n.length;r+=2){let o=n[r],l=n[r+1];if(l>=0){n[r]=l,n[r+1]=o;let a=r>>1;for(;i.length<a;)i.push(ve.empty);i.push(o?e.slice(s,s+o):ve.empty)}s+=o}return new Xe(n,i)}compose(e){return this.empty?e:e.empty?this:X0(this,e,!0)}map(e,n=!1){return e.empty?this:su(this,e,n,!0)}iterChanges(e,n=!1){ru(this,e,n)}get desc(){return Dn.create(this.sections)}filter(e){let n=[],i=[],r=[],s=new js(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,a-l);ft(r,u,-1);let f=s.ins==-1?-1:s.off==0?s.ins:0;ft(n,u,f),f>0&&oi(i,n,s.text),s.forward(u),l+=u}let c=e[o++];for(;l<c;){if(s.done)break e;let u=Math.min(s.len,c-l);ft(n,u,-1),ft(r,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),l+=u}}return{changes:new Xe(n,i),filtered:Dn.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let r=[],s=[],o=0,l=null;function a(u=!1){if(!u&&!r.length)return;o<n&&ft(r,n-o,-1);let f=new Xe(r,s);l=l?l.compose(f.map(l)):f,r=[],s=[],o=0}function c(u){if(Array.isArray(u))for(let f of u)c(f);else if(u instanceof Xe){if(u.length!=n)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${n})`);a(),l=l?l.compose(u.map(l)):u}else{let{from:f,to:h=f,insert:d}=u;if(f>h||f<0||h>n)throw new RangeError(`Invalid change range ${f} to ${h} (in doc of length ${n})`);let p=d?typeof d=="string"?ve.of(d.split(i||iu)):d:ve.empty,m=p.length;if(f==h&&m==0)return;f<o&&a(),f>o&&ft(r,f-o,-1),ft(r,h-f,m),oi(s,r,p),o=h}}return c(e),a(!l),l}static empty(e){return new Xe(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;i.length<r;)i.push(ve.empty);i[r]=ve.of(s.slice(1)),n.push(s[0],i[r].length)}}}return new Xe(n,i)}static createSet(e,n){return new Xe(e,n)}}function ft(t,e,n,i=!1){if(e==0&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:e==0&&t[r]==0?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function oi(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(ve.empty);t.push(n)}}function ru(t,e,n){let i=t.inserted;for(let r=0,s=0,o=0;o<t.sections.length;){let l=t.sections[o++],a=t.sections[o++];if(a<0)r+=l,s+=l;else{let c=r,u=s,f=ve.empty;for(;c+=l,u+=a,a&&i&&(f=f.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)l=t.sections[o++],a=t.sections[o++];e(r,c,s,u,f),r=c,s=u}}}function su(t,e,n,i=!1){let r=[],s=i?[]:null,o=new js(t),l=new js(e);for(let a=-1;;)if(o.ins==-1&&l.ins==-1){let c=Math.min(o.len,l.len);ft(r,c,-1),o.forward(c),l.forward(c)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!n))){let c=l.len;for(ft(r,l.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&a<o.i&&o.len<=u&&(ft(r,0,o.ins),s&&oi(s,r,o.text),a=o.i),o.forward(u),c-=u}l.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(l.ins==-1){let f=Math.min(u,l.len);c+=f,u-=f,l.forward(f)}else if(l.ins==0&&l.len<u)u-=l.len,l.next();else break;ft(r,c,a<o.i?o.ins:0),s&&a<o.i&&oi(s,r,o.text),a=o.i,o.forward(o.len-u)}else{if(o.done&&l.done)return s?Xe.createSet(r,s):Dn.create(r);throw new Error("Mismatched change set lengths")}}function X0(t,e,n=!1){let i=[],r=n?[]:null,s=new js(t),o=new js(e);for(let l=!1;;){if(s.done&&o.done)return r?Xe.createSet(i,r):Dn.create(i);if(s.ins==0)ft(i,s.len,0,l),s.next();else if(o.len==0&&!o.done)ft(i,0,o.ins,l),r&&oi(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,o.len),c=i.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;ft(i,a,u,l),r&&u&&oi(r,i,o.text)}else o.ins==-1?(ft(i,s.off?0:s.len,a,l),r&&oi(r,i,s.textBit(a))):(ft(i,s.off?0:s.len,o.off?0:o.ins,l),r&&!o.off&&oi(r,i,o.text));l=(s.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>c),s.forward2(a),o.forward(a)}}}}class js{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?ve.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?ve.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Fi{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new Fi(i,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return D.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return D.range(this.anchor,i)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return D.range(e.anchor,e.head)}static create(e,n,i){return new Fi(e,n,i)}}class D{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:D.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new D([this.main],0)}addRange(e,n=!0){return D.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,D.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new D(e.ranges.map(n=>Fi.fromJSON(n)),e.main)}static single(e,n=e){return new D([D.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return D.normalized(e.slice(),n);i=s.to}return new D(e,n)}static cursor(e,n=0,i,r){return Fi.create(e,e,(n==0?0:n<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,n,i,r){let s=(i??16777215)<<6|(r==null?7:Math.min(6,r));return n<e?Fi.create(n,e,48|s):Fi.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let i=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let l=o.from,a=Math.max(s.to,o.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?D.range(a,l):D.range(l,a))}}return new D(e,n)}}function G0(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let jf=0;class U{constructor(e,n,i,r,s){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=jf++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new U(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:zf),!!e.static,e.enables)}of(e){return new vl([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new vl(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new vl(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function zf(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class vl{constructor(e,n,i,r){this.dependencies=e,this.facet=n,this.type=i,this.value=r,this.id=jf++}dynamicSlot(e){var n;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,l=this.type==2,a=!1,c=!1,u=[];for(let f of this.dependencies)f=="doc"?a=!0:f=="selection"?c=!0:((n=e[f.id])!==null&&n!==void 0?n:1)&1||u.push(e[f.id]);return{create(f){return f.values[o]=i(f),1},update(f,h){if(a&&h.docChanged||c&&(h.docChanged||h.selection)||ou(f,u)){let d=i(f);if(l?!Yd(d,f.values[o],r):!r(d,f.values[o]))return f.values[o]=d,1}return 0},reconfigure:(f,h)=>{let d,p=h.config.address[s];if(p!=null){let m=_l(h,p);if(this.dependencies.every(y=>y instanceof U?h.facet(y)===f.facet(y):y instanceof ct?h.field(y,!1)==f.field(y,!1):!0)||(l?Yd(d=i(f),m,r):r(d=i(f),m)))return f.values[o]=m,0}else d=i(f);return f.values[o]=d,1}}}}function Yd(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function ou(t,e){let n=!1;for(let i of e)Rs(t,i)&1&&(n=!0);return n}function MP(t,e,n){let i=n.map(a=>t[a.id]),r=n.map(a=>a.type),s=i.filter(a=>!(a&1)),o=t[e.id]>>1;function l(a){let c=[];for(let u=0;u<i.length;u++){let f=_l(a,i[u]);if(r[u]==2)for(let h of f)c.push(h);else c.push(f)}return e.combine(c)}return{create(a){for(let c of i)Rs(a,c);return a.values[o]=l(a),1},update(a,c){if(!ou(a,s))return 0;let u=l(a);return e.compare(u,a.values[o])?0:(a.values[o]=u,1)},reconfigure(a,c){let u=ou(a,i),f=c.config.facets[e.id],h=c.facet(e);if(f&&!u&&zf(n,f))return a.values[o]=h,0;let d=l(a);return e.compare(d,h)?(a.values[o]=h,0):(a.values[o]=d,1)}}}const Jd=U.define({static:!0});class ct{constructor(e,n,i,r,s){this.id=e,this.createF=n,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new ct(jf++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(Jd).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let s=i.values[n],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[n]=o,1)},reconfigure:(i,r)=>r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}init(e){return[this,Jd.of({field:this,create:e})]}get extension(){return this}}const Pi={lowest:4,low:3,default:2,high:1,highest:0};function fs(t){return e=>new Y0(e,t)}const ir={highest:fs(Pi.highest),high:fs(Pi.high),default:fs(Pi.default),low:fs(Pi.low),lowest:fs(Pi.lowest)};class Y0{constructor(e,n){this.inner=e,this.prec=n}}class wo{of(e){return new lu(this,e)}reconfigure(e){return wo.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class lu{constructor(e,n){this.compartment=e,this.inner=n}}class Fl{constructor(e,n,i,r,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let r=[],s=Object.create(null),o=new Map;for(let h of RP(e,n,o))h instanceof ct?r.push(h):(s[h.facet.id]||(s[h.facet.id]=[])).push(h);let l=Object.create(null),a=[],c=[];for(let h of r)l[h.id]=c.length<<1,c.push(d=>h.slot(d));let u=i==null?void 0:i.config.facets;for(let h in s){let d=s[h],p=d[0].facet,m=u&&u[h]||[];if(d.every(y=>y.type==0))if(l[p.id]=a.length<<1|1,zf(m,d))a.push(i.facet(p));else{let y=p.combine(d.map(g=>g.value));a.push(i&&p.compare(y,i.facet(p))?i.facet(p):y)}else{for(let y of d)y.type==0?(l[y.id]=a.length<<1|1,a.push(y.value)):(l[y.id]=c.length<<1,c.push(g=>y.dynamicSlot(g)));l[p.id]=c.length<<1,c.push(y=>MP(y,p,d))}}let f=c.map(h=>h(l));return new Fl(e,o,f,l,a,s)}}function RP(t,e,n){let i=[[],[],[],[],[]],r=new Map;function s(o,l){let a=r.get(o);if(a!=null){if(a<=l)return;let c=i[a].indexOf(o);c>-1&&i[a].splice(c,1),o instanceof lu&&n.delete(o.compartment)}if(r.set(o,l),Array.isArray(o))for(let c of o)s(c,l);else if(o instanceof lu){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;n.set(o.compartment,c),s(c,l)}else if(o instanceof Y0)s(o.inner,o.prec);else if(o instanceof ct)i[l].push(o),o.provides&&s(o.provides,l);else if(o instanceof vl)i[l].push(o),o.facet.extensions&&s(o.facet.extensions,Pi.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,l)}}return s(t,Pi.default),i.reduce((o,l)=>o.concat(l))}function Rs(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function _l(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const J0=U.define(),au=U.define({combine:t=>t.some(e=>e),static:!0}),Z0=U.define({combine:t=>t.length?t[0]:void 0,static:!0}),ey=U.define(),ty=U.define(),ny=U.define(),iy=U.define({combine:t=>t.length?t[0]:!1});class Yn{constructor(e,n){this.type=e,this.value=n}static define(){return new DP}}class DP{of(e){return new Yn(this,e)}}class LP{constructor(e){this.map=e}of(e){return new le(this,e)}}class le{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new le(this.type,n)}is(e){return this.type==e}static define(e={}){return new LP(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(n);s&&i.push(s)}return i}}le.reconfigure=le.define();le.appendConfig=le.define();class Ye{constructor(e,n,i,r,s,o){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&G0(i,n.newLength),s.some(l=>l.type==Ye.time)||(this.annotations=s.concat(Ye.time.of(Date.now())))}static create(e,n,i,r,s,o){return new Ye(e,n,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Ye.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Ye.time=Yn.define();Ye.userEvent=Yn.define();Ye.addToHistory=Yn.define();Ye.remote=Yn.define();function BP(t,e){let n=[];for(let i=0,r=0;;){let s,o;if(i<t.length&&(r==e.length||e[r]>=t[i]))s=t[i++],o=t[i++];else if(r<e.length)s=e[r++],o=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function ry(t,e,n){var i;let r,s,o;return n?(r=e.changes,s=Xe.empty(e.changes.length),o=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=t.selection)===null||i===void 0?void 0:i.map(r),effects:le.mapEffects(t.effects,r).concat(le.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function cu(t,e,n){let i=e.selection,r=Cr(e.annotations);return e.userEvent&&(r=r.concat(Ye.userEvent.of(e.userEvent))),{changes:e.changes instanceof Xe?e.changes:Xe.of(e.changes||[],n,t.facet(Z0)),selection:i&&(i instanceof D?i:D.single(i.anchor,i.head)),effects:Cr(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function sy(t,e,n){let i=cu(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;i=ry(i,cu(t,e[s],o?i.changes.newLength:t.doc.length),o)}let r=Ye.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return NP(n?IP(r):r)}function IP(t){let e=t.startState,n=!0;for(let r of e.facet(ey)){let s=r(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:BP(n,s))}if(n!==!0){let r,s;if(n===!1)s=t.changes.invertedDesc,r=Xe.empty(e.doc.length);else{let o=t.changes.filter(n);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=Ye.create(e,r,t.selection&&t.selection.map(s),le.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let i=e.facet(ty);for(let r=i.length-1;r>=0;r--){let s=i[r](t);s instanceof Ye?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Ye?t=s[0]:t=sy(e,Cr(s),!1)}return t}function NP(t){let e=t.startState,n=e.facet(ny),i=t;for(let r=n.length-1;r>=0;r--){let s=n[r](t);s&&Object.keys(s).length&&(i=ry(i,cu(e,s,t.changes.newLength),!0))}return i==t?t:Ye.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const FP=[];function Cr(t){return t==null?FP:Array.isArray(t)?t:[t]}var Be=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Be||(Be={}));const _P=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let uu;try{uu=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function $P(t){if(uu)return uu.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||_P.test(n)))return!0}return!1}function VP(t){return e=>{if(!/\S/.test(e))return Be.Space;if($P(e))return Be.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Be.Word;return Be.Other}}class de{constructor(e,n,i,r,s,o){this.config=e,this.doc=n,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)Rs(this,l<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return Rs(this,i),_l(this,i)}update(...e){return sy(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:r}=n;for(let l of e.effects)l.is(wo.reconfigure)?(n&&(r=new Map,n.compartments.forEach((a,c)=>r.set(c,a)),n=null),r.set(l.value.compartment,l.value.extension)):l.is(le.reconfigure)?(n=null,i=l.value):l.is(le.appendConfig)&&(n=null,i=Cr(i).concat(l.value));let s;n?s=e.startState.values.slice():(n=Fl.resolve(i,r,this),s=new de(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,c)=>c.reconfigure(a,this),null).values);let o=e.startState.facet(au)?e.newSelection:e.newSelection.asSingle();new de(n,e.newDoc,o,s,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:D.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),r=this.changes(i.changes),s=[i.range],o=Cr(i.effects);for(let l=1;l<n.ranges.length;l++){let a=e(n.ranges[l]),c=this.changes(a.changes),u=c.map(r);for(let h=0;h<l;h++)s[h]=s[h].map(u);let f=r.mapDesc(c,!0);s.push(a.range.map(f)),r=r.compose(u),o=le.mapEffects(o,u).concat(le.mapEffects(Cr(a.effects),f))}return{changes:r,selection:D.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof Xe?e:Xe.of(e,this.doc.length,this.facet(de.lineSeparator))}toText(e){return ve.of(e.split(this.facet(de.lineSeparator)||iu))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Rs(this,n),_l(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof ct&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],l=e[s];r.push(o.init(a=>o.spec.fromJSON(l,a)))}}return de.create({doc:e.doc,selection:D.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=Fl.resolve(e.extensions||[],new Map),i=e.doc instanceof ve?e.doc:ve.of((e.doc||"").split(n.staticFacet(de.lineSeparator)||iu)),r=e.selection?e.selection instanceof D?e.selection:D.single(e.selection.anchor,e.selection.head):D.single(0);return G0(r,i.length),n.staticFacet(au)||(r=r.asSingle()),new de(n,i,r,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(de.tabSize)}get lineBreak(){return this.facet(de.lineSeparator)||`
`}get readOnly(){return this.facet(iy)}phrase(e,...n){for(let i of this.facet(de.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?i:n[s-1]})),e}languageDataAt(e,n,i=-1){let r=[];for(let s of this.facet(J0))for(let o of s(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return VP(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=ot(n,o,!1);if(s(n.slice(a,o))!=Be.Word)break;o=a}for(;l<r;){let a=ot(n,l);if(s(n.slice(l,a))!=Be.Word)break;l=a}return o==l?null:D.range(o+i,l+i)}}de.allowMultipleSelections=au;de.tabSize=U.define({combine:t=>t.length?t[0]:4});de.lineSeparator=Z0;de.readOnly=iy;de.phrases=U.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(r=>t[r]==e[r])}});de.languageData=J0;de.changeFilter=ey;de.transactionFilter=ty;de.transactionExtender=ny;wo.reconfigure=le.define();function Fn(t,e,n={}){let i={};for(let r of t)for(let s of Object.keys(r)){let o=r[s],l=i[s];if(l===void 0)i[s]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(n,s))i[s]=n[s](l,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class Gi{eq(e){return this==e}range(e,n=e){return fu.create(e,n,this)}}Gi.prototype.startSide=Gi.prototype.endSide=0;Gi.prototype.point=!1;Gi.prototype.mapMode=vt.TrackDel;let fu=class oy{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new oy(e,n,i)}};function hu(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class qf{constructor(e,n,i,r){this.from=e,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,r=0){let s=i?this.to:this.from;for(let o=r,l=s.length;;){if(o==l)return o;let a=o+l>>1,c=s[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-n;if(a==o)return c>=0?o:l;c>=0?l=a:o=a+1}}between(e,n,i,r){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let i=[],r=[],s=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let c=this.value[a],u=this.from[a]+e,f=this.to[a]+e,h,d;if(u==f){let p=n.mapPos(u,c.startSide,c.mapMode);if(p==null||(h=d=p,c.startSide!=c.endSide&&(d=n.mapPos(u,c.endSide),d<h)))continue}else if(h=n.mapPos(u,c.startSide),d=n.mapPos(f,c.endSide),h>d||h==d&&c.startSide>0&&c.endSide<=0)continue;(d-h||c.endSide-c.startSide)<0||(o<0&&(o=h),c.point&&(l=Math.max(l,d-h)),i.push(c),r.push(h-o),s.push(d-o))}return{mapped:i.length?new qf(r,s,i,l):null,pos:o}}}class ge{constructor(e,n,i,r){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(e,n,i,r){return new ge(e,n,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort(hu)),this.isEmpty)return n.length?ge.of(n):this;let l=new ly(this,null,-1).goto(0),a=0,c=[],u=new mi;for(;l.value||a<n.length;)if(a<n.length&&(l.from-n[a].from||l.startSide-n[a].value.startSide)>=0){let f=n[a++];u.addInner(f.from,f.to,f.value)||c.push(f)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==n.length||this.chunkEnd(l.chunkIndex)<n[a].from)&&(!o||r>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&u.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||r>l.to||s<l.from||o(l.from,l.to,l.value))&&(u.addInner(l.from,l.to,l.value)||c.push(fu.create(l.from,l.to,l.value))),l.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?ge.empty:this.nextLayer.update({add:c,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],c=e.touchesRange(l,l+a.length);if(c===!1)r=Math.max(r,a.maxPoint),n.push(a),i.push(e.mapPos(l));else if(c===!0){let{mapped:u,pos:f}=a.map(l,e);u&&(r=Math.max(r,u.maxPoint),n.push(u),i.push(f))}}let s=this.nextLayer.map(e);return n.length==0?s:new ge(i,n,s||ge.empty,r)}between(e,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return zs.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return zs.from(e).goto(n)}static compare(e,n,i,r,s=-1){let o=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),l=n.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=s),a=Zd(o,l,i),c=new hs(o,a,s),u=new hs(l,a,s);i.iterGaps((f,h,d)=>ep(c,f,u,h,d,r)),i.empty&&i.length==0&&ep(c,0,u,0,0,r)}static eq(e,n,i=0,r){r==null&&(r=999999999);let s=e.filter(u=>!u.isEmpty&&n.indexOf(u)<0),o=n.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let l=Zd(s,o),a=new hs(s,l,0).goto(i),c=new hs(o,l,0).goto(i);for(;;){if(a.to!=c.to||!du(a.active,c.active)||a.point&&(!c.point||!a.point.eq(c.point)))return!1;if(a.to>r)return!0;a.next(),c.next()}}static spans(e,n,i,r,s=-1){let o=new hs(e,null,s).goto(n),l=n,a=o.openStart;for(;;){let c=Math.min(o.to,i);if(o.point){let u=o.activeForPoint(o.to),f=o.pointFrom<n?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,a);r.point(l,c,o.point,u,f,o.pointRank),a=Math.min(o.openEnd(c),u.length)}else c>l&&(r.span(l,c,o.active,a),a=o.openEnd(c));if(o.to>i)return a+(o.point&&o.to>i?1:0);l=o.to,o.next()}}static of(e,n=!1){let i=new mi;for(let r of e instanceof fu?[e]:n?HP(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return ge.empty;let n=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=ge.empty;r=r.nextLayer)n=new ge(r.chunkPos,r.chunk,n,Math.max(r.maxPoint,n.maxPoint));return n}}ge.empty=new ge([],[],null,-1);function HP(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(hu(e,i)>0)return t.slice().sort(hu);e=i}return t}ge.empty.nextLayer=ge.empty;class mi{finishChunk(e){this.chunks.push(new qf(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new mi)).add(e,n,i)}addInner(e,n,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(ge.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=ge.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function Zd(t,e,n){let i=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let l=i.get(s.chunk[o]);l!=null&&(n?n.mapPos(l):l)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(l,l+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class ly{constructor(e,n,i,r=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class zs{constructor(e){this.heap=e}static from(e,n=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new ly(o,n,i,s));return r.length==1?r[0]:new zs(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)rc(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)rc(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),rc(this.heap,0)}}}function rc(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class hs{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=zs.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Ho(this.active,e),Ho(this.activeTo,e),Ho(this.activeRank,e),this.minActive=tp(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||r-this.activeTo[n])>0;)n++;Wo(this.active,n,i),Wo(this.activeTo,n,r),Wo(this.activeRank,n,s),e&&Wo(e,n,this.cursor.from),this.minActive=tp(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&Ho(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function ep(t,e,n,i,r,s){t.goto(e),n.goto(i);let o=i+r,l=i,a=i-e;for(;;){let c=t.to+a-n.to||t.endSide-n.endSide,u=c<0?t.to+a:n.to,f=Math.min(u,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&du(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(l,f,t.point,n.point):f>l&&!du(t.active,n.active)&&s.compareRange(l,f,t.active,n.active),u>o)break;l=u,c<=0&&t.next(),c>=0&&n.next()}}function du(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Ho(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function Wo(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function tp(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function Zr(t,e,n=t.length){let i=0;for(let r=0;r<n;)t.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=ot(t,r));return i}function pu(t,e,n,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?n-s%n:1,r=ot(t,r)}return i===!0?-1:t.length}const mu="ͼ",np=typeof Symbol>"u"?"__"+mu:Symbol.for(mu),gu=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),ip=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class gi{constructor(e,n){this.rules=[];let{finish:i}=n||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,l,a,c){let u=[],f=/^@(\w+)\b/.exec(o[0]),h=f&&f[1]=="keyframes";if(f&&l==null)return a.push(o[0]+";");for(let d in l){let p=l[d];if(/&/.test(d))s(d.split(/,\s*/).map(m=>o.map(y=>m.replace(/&/,y))).reduce((m,y)=>m.concat(y)),p,a);else if(p&&typeof p=="object"){if(!f)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(r(d),p,u,h)}else p!=null&&u.push(d.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+p+";")}(u.length||h)&&a.push((i&&!f&&!c?o.map(i):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=ip[np]||1;return ip[np]=e+1,mu+e.toString(36)}static mount(e,n,i){let r=e[gu],s=i&&i.nonce;r?s&&r.setNonce(s):r=new WP(e,s),r.mount(Array.isArray(n)?n:[n],e)}}let rp=new Map;class WP{constructor(e,n){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=rp.get(i);if(s)return e[gu]=s;this.sheet=new r.CSSStyleSheet,rp.set(i,this)}else this.styleTag=i.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[gu]=this}mount(e,n){let i=this.sheet,r=0,s=0;for(let o=0;o<e.length;o++){let l=e[o],a=this.modules.indexOf(l);if(a<s&&a>-1&&(this.modules.splice(a,1),s--,a=-1),a==-1){if(this.modules.splice(s++,0,l),i)for(let c=0;c<l.rules.length;c++)i.insertRule(l.rules[c],r++)}else{for(;s<a;)r+=this.modules[s++].rules.length;r+=l.rules.length,s++}}if(i)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o;let l=n.head||n;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var yi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},qs={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},jP=typeof navigator<"u"&&/Mac/.test(navigator.platform),zP=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var st=0;st<10;st++)yi[48+st]=yi[96+st]=String(st);for(var st=1;st<=24;st++)yi[st+111]="F"+st;for(var st=65;st<=90;st++)yi[st]=String.fromCharCode(st+32),qs[st]=String.fromCharCode(st);for(var sc in yi)qs.hasOwnProperty(sc)||(qs[sc]=yi[sc]);function qP(t){var e=jP&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||zP&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?qs:yi)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Us(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function yu(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function wl(t,e){if(!e.anchorNode)return!1;try{return yu(t,e.anchorNode)}catch{return!1}}function $r(t){return t.nodeType==3?Ji(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function Ds(t,e,n,i){return n?sp(t,e,n,i,-1)||sp(t,e,n,i,1):!1}function Yi(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function $l(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function sp(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:In(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Yi(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?In(t):0}else return!1}}function In(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function xo(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function UP(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function ay(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}function QP(t,e,n,i,r,s,o,l){let a=t.ownerDocument,c=a.defaultView||window;for(let u=t,f=!1;u&&!f;)if(u.nodeType==1){let h,d=u==a.body,p=1,m=1;if(d)h=UP(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(f=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let v=u.getBoundingClientRect();({scaleX:p,scaleY:m}=ay(u,v)),h={left:v.left,right:v.left+u.clientWidth*p,top:v.top,bottom:v.top+u.clientHeight*m}}let y=0,g=0;if(r=="nearest")e.top<h.top?(g=-(h.top-e.top+o),n>0&&e.bottom>h.bottom+g&&(g=e.bottom-h.bottom+g+o)):e.bottom>h.bottom&&(g=e.bottom-h.bottom+o,n<0&&e.top-g<h.top&&(g=-(h.top+g-e.top+o)));else{let v=e.bottom-e.top,x=h.bottom-h.top;g=(r=="center"&&v<=x?e.top+v/2-x/2:r=="start"||r=="center"&&n<0?e.top-o:e.bottom-x+o)-h.top}if(i=="nearest"?e.left<h.left?(y=-(h.left-e.left+s),n>0&&e.right>h.right+y&&(y=e.right-h.right+y+s)):e.right>h.right&&(y=e.right-h.right+s,n<0&&e.left<h.left+y&&(y=-(h.left+y-e.left+s))):y=(i=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:i=="start"==l?e.left-s:e.right-(h.right-h.left)+s)-h.left,y||g)if(d)c.scrollBy(y,g);else{let v=0,x=0;if(g){let S=u.scrollTop;u.scrollTop+=g/m,x=(u.scrollTop-S)*m}if(y){let S=u.scrollLeft;u.scrollLeft+=y/p,v=(u.scrollLeft-S)*p}e={left:e.left-v,top:e.top-x,right:e.right-v,bottom:e.bottom-x},v&&Math.abs(v-y)<1&&(i="nearest"),x&&Math.abs(x-g)<1&&(r="nearest")}if(d)break;u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function KP(t){let e=t.ownerDocument,n,i;for(let r=t.parentNode;r&&!(r==e.body||n&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!n&&r.scrollWidth>r.clientWidth&&(n=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:n,y:i}}class XP{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?In(n):0),i,Math.min(e.focusOffset,i?In(i):0))}set(e,n,i,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let ur=null;function cy(t){if(t.setActive)return t.setActive();if(ur)return t.focus(ur);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(ur==null?{get preventScroll(){return ur={preventScroll:!0},!0}}:void 0),!ur){ur=!1;for(let n=0;n<e.length;){let i=e[n++],r=e[n++],s=e[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let op;function Ji(t,e,n=e){let i=op||(op=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function Ar(t,e,n,i){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function GP(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function uy(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function YP(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,In(n));;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=In(n))}else{if(n==t)return!0;i=Yi(n),n=n.parentNode}}function fy(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function hy(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i>0)return{node:n,offset:i};if(n.nodeType==1&&i>0){if(n.contentEditable=="false")return null;n=n.childNodes[i-1],i=In(n)}else if(n.parentNode&&!$l(n))i=Yi(n),n=n.parentNode;else return null}}function dy(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i<n.nodeValue.length)return{node:n,offset:i};if(n.nodeType==1&&i<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[i],i=0}else if(n.parentNode&&!$l(n))i=Yi(n)+1,n=n.parentNode;else return null}}class ht{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new ht(e.parentNode,Yi(e),n)}static after(e,n){return new ht(e.parentNode,Yi(e)+1,n)}}const Uf=[];class Oe{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let l=Oe.get(s);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&s!=o.dom&&(n.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=lp(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&n&&n.node==i&&(n.written=!0);s;)s=lp(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let r=In(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Oe.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,i=0){let r=-1,s=-1,o=-1,l=-1;for(let a=0,c=i,u=i;a<this.children.length;a++){let f=this.children[a],h=c+f.length;if(c<e&&h>n)return f.domBoundsAround(e,n,c);if(h>=e&&r==-1&&(r=a,s=c),c>n&&f.dom.parentNode==this.dom){o=a,l=u;break}u=h,c=h+f.breakAfter}return{from:s,to:l<0?i+this.length:l,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=Uf){this.markDirty();for(let r=e;r<n;r++){let s=this.children[r];s.parent==this&&i.indexOf(s)<0&&s.destroy()}i.length<250?this.children.splice(e,n-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(n));for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new py(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Oe.prototype.breakAfter=0;function lp(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class py{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function my(t,e,n,i,r,s,o,l,a){let{children:c}=t,u=c.length?c[e]:null,f=s.length?s[s.length-1]:null,h=f?f.breakAfter:o;if(!(e==i&&u&&!o&&!h&&s.length<2&&u.merge(n,r,s.length?f:null,n==0,l,a))){if(i<c.length){let d=c[i];d&&(r<d.length||d.breakAfter&&(f!=null&&f.breakAfter))?(e==i&&(d=d.split(r),r=0),!h&&f&&d.merge(0,r,f,!0,0,a)?s[s.length-1]=d:((r||d.children.length&&!d.children[0].length)&&d.merge(0,r,null,!1,0,a),s.push(d))):d!=null&&d.breakAfter&&(f?f.breakAfter=1:o=1),i++}for(u&&(u.breakAfter=o,n>0&&(!o&&s.length&&u.merge(n,u.length,s[0],!1,l,0)?u.breakAfter=s.shift().breakAfter:(n<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(n,u.length,null,!1,l,0),e++));e<i&&s.length;)if(c[i-1].become(s[s.length-1]))i--,s.pop(),a=s.length?0:l;else if(c[e].become(s[0]))e++,s.shift(),l=s.length?0:a;else break;!s.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,l,a)&&e--,(e<i||s.length)&&t.replaceChildren(e,i,s)}}function gy(t,e,n,i,r,s){let o=t.childCursor(),{i:l,off:a}=o.findPos(n,1),{i:c,off:u}=o.findPos(e,-1),f=e-n;for(let h of i)f+=h.length;t.length+=f,my(t,c,u,l,a,i,0,r,s)}let Tt=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},bu=typeof document<"u"?document:{documentElement:{style:{}}};const vu=/Edge\/(\d+)/.exec(Tt.userAgent),yy=/MSIE \d/.test(Tt.userAgent),wu=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Tt.userAgent),Ra=!!(yy||wu||vu),ap=!Ra&&/gecko\/(\d+)/i.test(Tt.userAgent),oc=!Ra&&/Chrome\/(\d+)/.exec(Tt.userAgent),cp="webkitFontSmoothing"in bu.documentElement.style,by=!Ra&&/Apple Computer/.test(Tt.vendor),up=by&&(/Mobile\/\w+/.test(Tt.userAgent)||Tt.maxTouchPoints>2);var Q={mac:up||/Mac/.test(Tt.platform),windows:/Win/.test(Tt.platform),linux:/Linux|X11/.test(Tt.platform),ie:Ra,ie_version:yy?bu.documentMode||6:wu?+wu[1]:vu?+vu[1]:0,gecko:ap,gecko_version:ap?+(/Firefox\/(\d+)/.exec(Tt.userAgent)||[0,0])[1]:0,chrome:!!oc,chrome_version:oc?+oc[1]:0,ios:up,android:/Android\b/.test(Tt.userAgent),webkit:cp,safari:by,webkit_version:cp?+(/\bAppleWebKit\/(\d+)/.exec(Tt.userAgent)||[0,0])[1]:0,tabSize:bu.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const JP=256;class hn extends Oe{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof hn)||this.length-(n-e)+i.length>JP||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new hn(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new ht(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return ZP(this.dom,e,n)}}class Qn extends Oe{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let r of n)r.setParent(this)}setAttrs(e){if(uy(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,r,s,o){return i&&(!(i instanceof Qn&&i.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(gy(this,e,n,i?i.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],i=0,r=-1,s=0;for(let l of this.children){let a=i+l.length;a>e&&n.push(i<e?l.split(e-i):l),r<0&&i>=e&&(r=s),i=a,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new Qn(this.mark,n,o)}domAtPos(e){return vy(this,e)}coordsAt(e,n){return xy(this,e,n)}}function ZP(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&n<0||e==i&&n>=0?Q.chrome||Q.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let l=Ji(t,r,s).getClientRects();if(!l.length)return null;let a=l[(o?o<0:n>=0)?0:l.length-1];return Q.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,c=>c.width)||a),o?xo(a,o<0):a||null}class li extends Oe{static create(e,n,i){return new li(e,n,i)}constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}split(e){let n=li.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,i,r,s,o){return i&&(!(i instanceof li)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof li&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return ve.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):ve.empty}domAtPos(e){return(this.length?e==0:this.side>0)?ht.before(this.dom):ht.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?r.length-1:0;s=r[l],!(e>0?l==0:l==r.length-1||s.top<s.bottom);l+=o?-1:1);return xo(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Vr extends Oe{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Vr&&e.side==this.side}split(){return new Vr(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?ht.before(this.dom):ht.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return ve.empty}get isHidden(){return!0}}hn.prototype.children=li.prototype.children=Vr.prototype.children=Uf;function vy(t,e){let n=t.dom,{children:i}=t,r=0;for(let s=0;r<i.length;r++){let o=i[r],l=s+o.length;if(!(l==s&&o.getSide()<=0)){if(e>s&&e<l&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=l}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new ht(n,0)}function wy(t,e,n){let i,{children:r}=t;n>0&&e instanceof Qn&&r.length&&(i=r[r.length-1])instanceof Qn&&i.mark.eq(e.mark)?wy(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function xy(t,e,n){let i=null,r=-1,s=null,o=-1;function l(c,u){for(let f=0,h=0;f<c.children.length&&h<=u;f++){let d=c.children[f],p=h+d.length;p>=u&&(d.children.length?l(d,u-h):(!s||s.isHidden&&n>0)&&(p>u||h==p&&d.getSide()>0)?(s=d,o=u-h):(h<u||h==p&&d.getSide()<0&&!d.isHidden)&&(i=d,r=u-h)),h=p}}l(t,e);let a=(n<0?i:s)||i||s;return a?a.coordsAt(Math.max(0,a==i?r:o),n):eM(t)}function eM(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=$r(e);return n[n.length-1]||null}function xu(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const fp=Object.create(null);function Vl(t,e,n){if(t==e)return!0;t||(t=fp),e||(e=fp);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function Su(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,r=="style"?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,r=="style"?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function tM(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class Jn{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var xt=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(xt||(xt={}));class G extends Gi{constructor(e,n,i,r){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new So(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new bi(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=Sy(e,n);i=(s?n?-3e8:-1:5e8)-1,r=(o?n?2e8:1:-6e8)+1}return new bi(e,i,r,n,e.widget||null,!0)}static line(e){return new Oo(e)}static set(e,n=!1){return ge.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}G.none=ge.empty;class So extends G{constructor(e){let{start:n,end:i}=Sy(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof So&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&Vl(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}So.prototype.point=!1;class Oo extends G{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Oo&&this.spec.class==e.spec.class&&Vl(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Oo.prototype.mapMode=vt.TrackBefore;Oo.prototype.point=!0;class bi extends G{constructor(e,n,i,r,s,o){super(n,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?n<=0?vt.TrackBefore:vt.TrackAfter:vt.TrackDel}get type(){return this.startSide!=this.endSide?xt.WidgetRange:this.startSide<=0?xt.WidgetBefore:xt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof bi&&nM(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}bi.prototype.point=!0;function Sy(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function nM(t,e){return t==e||!!(t&&e&&t.compare(e))}function Ou(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}class We extends Oe{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,r,s,o){if(i){if(!(i instanceof We))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),gy(this,e,n,i?i.children.slice():[],s,o),!0}split(e){let n=new We;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:r}=this.childPos(e);r&&(n.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)n.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Vl(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){wy(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=xu(n,this.attrs||{})),i&&(this.attrs=xu({class:i},this.attrs||{}))}domAtPos(e){return vy(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(uy(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Su(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let r=this.dom.lastChild;for(;r&&Oe.get(r)instanceof Qn;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=Oe.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!Q.ios||!this.children.some(s=>s instanceof hn))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof hn)||/[^ -~]/.test(i.text))return null;let r=$r(i.dom);if(r.length!=1)return null;e+=r[0].width,n=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=xy(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof We&&this.children.length==0&&e.children.length==0&&Vl(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=n){if(s instanceof We)return s;if(o>n)break}r=o+s.breakAfter}return null}}class qn extends Oe{constructor(e,n,i){super(),this.widget=e,this.length=n,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,r,s,o){return i&&(!(i instanceof qn)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?ht.before(this.dom):ht.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new qn(this.widget,n,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return Uf}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ve.empty}domBoundsAround(){return null}become(e){return e instanceof qn&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);return i||(this.widget instanceof ku?null:xo(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:i}=this.deco;return n==i?!1:e<0?n<0:i>0}}class ku extends Jn{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Ls{constructor(e,n,i,r){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof qn&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new We),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(jo(new Vr(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof qn)&&this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(jo(new hn(this.text.slice(this.textOff,this.textOff+r)),n),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,n,i,r){this.buildText(n-e,i,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(e,n,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof bi){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=n-e;if(i instanceof bi)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new qn(i.widget||Hr.block,l,i));else{let a=li.create(i.widget||Hr.inline,l,l?0:i.startSide),c=this.atCursorPos&&!a.isEditable&&s<=r.length&&(e<n||i.startSide>0),u=!a.isEditable&&(e<n||s>r.length||i.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!c&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),c&&(f.append(jo(new Vr(1),r),s),s=r.length+Math.max(0,s-r.length)),f.append(jo(a,r),s),this.atCursorPos=u,this.pendingBuffer=u?e<n||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,i,r,s){let o=new Ls(e,n,i,s);return o.openEnd=ge.spans(r,n,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function jo(t,e){for(let n of e)t=new Qn(n,[t],t.length);return t}class Hr extends Jn{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Hr.inline=new Hr("span");Hr.block=new Hr("div");var De=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(De||(De={}));const Zi=De.LTR,Qf=De.RTL;function Oy(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const iM=Oy("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),rM=Oy("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Cu=Object.create(null),vn=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);Cu[e]=n,Cu[n]=-e}function ky(t){return t<=247?iM[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?rM[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const sM=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ai{get dir(){return this.level%2?Qf:Zi}constructor(e,n,i){this.from=e,this.to=n,this.level=i}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,i,r){let s=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=n&&l.to>=n){if(l.level==i)return o;(s<0||(r!=0?r<0?l.from<n:l.to>n:e[s].level>l.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function Cy(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!Cy(i.inner,r.inner))return!1}return!0}const Se=[];function oM(t,e,n,i,r){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:e,l=s<i.length?i[s].from:n,a=s?256:r;for(let c=o,u=a,f=a;c<l;c++){let h=ky(t.charCodeAt(c));h==512?h=u:h==8&&f==4&&(h=16),Se[c]=h==4?2:h,h&7&&(f=h),u=h}for(let c=o,u=a,f=a;c<l;c++){let h=Se[c];if(h==128)c<l-1&&u==Se[c+1]&&u&24?h=Se[c]=u:Se[c]=256;else if(h==64){let d=c+1;for(;d<l&&Se[d]==64;)d++;let p=c&&u==8||d<n&&Se[d]==8?f==1?1:8:256;for(let m=c;m<d;m++)Se[m]=p;c=d-1}else h==8&&f==1&&(Se[c]=1);u=h,h&7&&(f=h)}}}function lM(t,e,n,i,r){let s=r==1?2:1;for(let o=0,l=0,a=0;o<=i.length;o++){let c=o?i[o-1].to:e,u=o<i.length?i[o].from:n;for(let f=c,h,d,p;f<u;f++)if(d=Cu[h=t.charCodeAt(f)])if(d<0){for(let m=l-3;m>=0;m-=3)if(vn[m+1]==-d){let y=vn[m+2],g=y&2?r:y&4?y&1?s:r:0;g&&(Se[f]=Se[vn[m]]=g),l=m;break}}else{if(vn.length==189)break;vn[l++]=f,vn[l++]=h,vn[l++]=a}else if((p=Se[f])==2||p==1){let m=p==r;a=m?0:1;for(let y=l-3;y>=0;y-=3){let g=vn[y+2];if(g&2)break;if(m)vn[y+2]|=2;else{if(g&4)break;vn[y+2]|=4}}}}}function aM(t,e,n,i){for(let r=0,s=i;r<=n.length;r++){let o=r?n[r-1].to:t,l=r<n.length?n[r].from:e;for(let a=o;a<l;){let c=Se[a];if(c==256){let u=a+1;for(;;)if(u==l){if(r==n.length)break;u=n[r++].to,l=r<n.length?n[r].from:e}else if(Se[u]==256)u++;else break;let f=s==1,h=(u<e?Se[u]:i)==1,d=f==h?f?1:2:i;for(let p=u,m=r,y=m?n[m-1].to:t;p>a;)p==y&&(p=n[--m].from,y=m?n[m-1].to:t),Se[--p]=d;a=u}else s=c,a++}}}function Au(t,e,n,i,r,s,o){let l=i%2?2:1;if(i%2==r%2)for(let a=e,c=0;a<n;){let u=!0,f=!1;if(c==s.length||a<s[c].from){let m=Se[a];m!=l&&(u=!1,f=m==16)}let h=!u&&l==1?[]:null,d=u?i:i+1,p=a;e:for(;;)if(c<s.length&&p==s[c].from){if(f)break e;let m=s[c];if(!u)for(let y=m.to,g=c+1;;){if(y==n)break e;if(g<s.length&&s[g].from==y)y=s[g++].to;else{if(Se[y]==l)break e;break}}if(c++,h)h.push(m);else{m.from>a&&o.push(new ai(a,m.from,d));let y=m.direction==Zi!=!(d%2);Tu(t,y?i+1:i,r,m.inner,m.from,m.to,o),a=m.to}p=m.to}else{if(p==n||(u?Se[p]!=l:Se[p]==l))break;p++}h?Au(t,a,p,i+1,r,h,o):a<p&&o.push(new ai(a,p,d)),a=p}else for(let a=n,c=s.length;a>e;){let u=!0,f=!1;if(!c||a>s[c-1].to){let m=Se[a-1];m!=l&&(u=!1,f=m==16)}let h=!u&&l==1?[]:null,d=u?i:i+1,p=a;e:for(;;)if(c&&p==s[c-1].to){if(f)break e;let m=s[--c];if(!u)for(let y=m.from,g=c;;){if(y==e)break e;if(g&&s[g-1].to==y)y=s[--g].from;else{if(Se[y-1]==l)break e;break}}if(h)h.push(m);else{m.to<a&&o.push(new ai(m.to,a,d));let y=m.direction==Zi!=!(d%2);Tu(t,y?i+1:i,r,m.inner,m.from,m.to,o),a=m.from}p=m.from}else{if(p==e||(u?Se[p-1]!=l:Se[p-1]==l))break;p--}h?Au(t,p,a,i+1,r,h,o):p<a&&o.push(new ai(p,a,d)),a=p}}function Tu(t,e,n,i,r,s,o){let l=e%2?2:1;oM(t,r,s,i,l),lM(t,r,s,i,l),aM(r,s,i,l),Au(t,r,s,e,n,i,o)}function cM(t,e,n){if(!t)return[new ai(0,0,e==Qf?1:0)];if(e==Zi&&!n.length&&!sM.test(t))return Ay(t.length);if(n.length)for(;t.length>Se.length;)Se[Se.length]=256;let i=[],r=e==Zi?0:1;return Tu(t,r,r,n,0,t.length,i),i}function Ay(t){return[new ai(0,t,0)]}let Ty="";function uM(t,e,n,i,r){var s;let o=i.head-t.from,l=ai.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),a=e[l],c=a.side(r,n);if(o==c){let h=l+=r?1:-1;if(h<0||h>=e.length)return null;a=e[l=h],o=a.side(!r,n),c=a.side(r,n)}let u=ot(t.text,o,a.forward(r,n));(u<a.from||u>a.to)&&(u=c),Ty=t.text.slice(Math.min(o,u),Math.max(o,u));let f=l==(r?e.length-1:0)?null:e[l+(r?1:-1)];return f&&u==c&&f.level+(r?0:1)<a.level?D.cursor(f.side(!r,n)+t.from,f.forward(r,n)?1:-1,f.level):D.cursor(u+t.from,a.forward(r,n)?-1:1,a.level)}function fM(t,e,n){for(let i=e;i<n;i++){let r=ky(t.charCodeAt(i));if(r==1)return Zi;if(r==2||r==4)return Qf}return Zi}const Ey=U.define(),Py=U.define(),My=U.define(),Ry=U.define(),Eu=U.define(),Dy=U.define(),Ly=U.define(),Kf=U.define(),Xf=U.define(),By=U.define({combine:t=>t.some(e=>e)}),Iy=U.define({combine:t=>t.some(e=>e)}),Ny=U.define();class Tr{constructor(e,n="nearest",i="nearest",r=5,s=5,o=!1){this.range=e,this.y=n,this.x=i,this.yMargin=r,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new Tr(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Tr(D.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const zo=le.define({map:(t,e)=>t.map(e)}),Fy=le.define();function Pt(t,e,n){let i=t.facet(Ry);i.length?i[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const ii=U.define({combine:t=>t.length?t[0]:!0});let hM=0;const bs=U.define();class Ve{constructor(e,n,i,r,s){this.id=e,this.create=n,this.domEventHandlers=i,this.domEventObservers=r,this.extension=s(this)}static define(e,n){const{eventHandlers:i,eventObservers:r,provide:s,decorations:o}=n||{};return new Ve(hM++,e,i,r,l=>{let a=[bs.of(l)];return o&&a.push(Qs.of(c=>{let u=c.plugin(l);return u?o(u):G.none})),s&&a.push(s(l)),a})}static fromClass(e,n){return Ve.define(i=>new e(i),n)}}class lc{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(Pt(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){Pt(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){Pt(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const _y=U.define(),Gf=U.define(),Qs=U.define(),$y=U.define(),Yf=U.define(),Vy=U.define();function hp(t,e){let n=t.state.facet(Vy);if(!n.length)return n;let i=n.map(s=>s instanceof Function?s(t):s),r=[];return ge.spans(i,e.from,e.to,{point(){},span(s,o,l,a){let c=s-e.from,u=o-e.from,f=r;for(let h=l.length-1;h>=0;h--,a--){let d=l[h].spec.bidiIsolate,p;if(d==null&&(d=fM(e.text,c,u)),a>0&&f.length&&(p=f[f.length-1]).to==c&&p.direction==d)p.to=u,f=p.inner;else{let m={from:c,to:u,direction:d,inner:[]};f.push(m),f=m.inner}}}}),r}const Hy=U.define();function Wy(t){let e=0,n=0,i=0,r=0;for(let s of t.state.facet(Hy)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:n,top:i,bottom:r}}const vs=U.define();class Yt{constructor(e,n,i,r){this.fromA=e,this.toA=n,this.fromB=i,this.toB=r}join(e){return new Yt(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let r=0,s=0,o=0,l=0;;r++){let a=r==e.length?null:e[r],c=o-l,u=a?a.fromB:1e9;for(;s<n.length&&n[s]<u;){let f=n[s],h=n[s+1],d=Math.max(l,f),p=Math.min(u,h);if(d<=p&&new Yt(d+c,p+c,d,p).addToSet(i),h>u)break;s+=2}if(!a)return i;new Yt(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}}class Hl{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=Xe.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,l,a)=>r.push(new Yt(s,o,l,a))),this.changedRanges=r}static create(e,n,i){return new Hl(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class dp extends Oe{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=G.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new We],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Yt(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?r=this.domChanged.newSel.head:!vM(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let s=r>-1?pM(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;i=new Yt(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Q.ie||Q.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.updateDeco(),a=yM(o,l,e.changes);return i=Yt.extendWithRanges(i,a),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Q.chrome||Q.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof qn&&o.widget instanceof ku&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,n,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=r.length-1;;o--){let l=o>=0?r[o]:null;if(!l)break;let{fromA:a,toA:c,fromB:u,toB:f}=l,h,d,p,m;if(i&&i.range.fromB<f&&i.range.toB>u){let S=Ls.build(this.view.state.doc,u,i.range.fromB,this.decorations,this.dynamicDecorationMap),b=Ls.build(this.view.state.doc,i.range.toB,f,this.decorations,this.dynamicDecorationMap);d=S.breakAtStart,p=S.openStart,m=b.openEnd;let O=this.compositionView(i);b.breakAtStart?O.breakAfter=1:b.content.length&&O.merge(O.length,O.length,b.content[0],!1,b.openStart,0)&&(O.breakAfter=b.content[0].breakAfter,b.content.shift()),S.content.length&&O.merge(0,0,S.content[S.content.length-1],!0,0,S.openEnd)&&S.content.pop(),h=S.content.concat(O).concat(b.content)}else({content:h,breakAtStart:d,openStart:p,openEnd:m}=Ls.build(this.view.state.doc,u,f,this.decorations,this.dynamicDecorationMap));let{i:y,off:g}=s.findPos(c,1),{i:v,off:x}=s.findPos(a,-1);my(this,v,x,y,g,h,d,p,m)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let i of n.effects)i.is(Fy)&&(this.editContextFormatting=i.value)}compositionView(e){let n=new hn(e.text.nodeValue);n.flags|=8;for(let{deco:r}of e.marks)n=new Qn(r,[n],n.length);let i=new We;return i.append(n,0),i}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(o);let l=Oe.get(s);l&&l!=o&&(l.dom=null),o.setDOM(s)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];n(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],n(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&wl(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),c=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(Q.gecko&&l.empty&&!this.hasComposition&&dM(a)){let f=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(f,a.node.childNodes[a.offset]||null)),a=c=new ht(f,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!Ds(a.node,a.offset,u.anchorNode,u.anchorOffset)||!Ds(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,l))&&(this.view.observer.ignore(()=>{Q.android&&Q.chrome&&this.dom.contains(u.focusNode)&&bM(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let f=Us(this.view.root);if(f)if(l.empty){if(Q.gecko){let h=mM(a.node,a.offset);if(h&&h!=3){let d=(h==1?hy:dy)(a.node,a.offset);d&&(a=new ht(d.node,d.offset))}}f.collapse(a.node,a.offset),l.bidiLevel!=null&&f.caretBidiLevel!==void 0&&(f.caretBidiLevel=l.bidiLevel)}else if(f.extend){f.collapse(a.node,a.offset);try{f.extend(c.node,c.offset)}catch{}}else{let h=document.createRange();l.anchor>l.head&&([a,c]=[c,a]),h.setEnd(c.node,c.offset),h.setStart(a.node,a.offset),f.removeAllRanges(),f.addRange(h)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(a,c)),this.impreciseAnchor=a.precise?null:new ht(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new ht(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&Ds(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=Us(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=We.find(this,n.head);if(!o)return;let l=o.posAtStart;if(n.head==l||n.head==l+o.length)return;let a=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!a||!c||a.bottom>c.top)return;let u=this.domAtPos(n.head+n.assoc);i.collapse(u.node,u.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let f=e.observer.selectionRange;e.docView.posFromDOM(f.anchorNode,f.anchorOffset)!=n.from&&i.collapse(r,s)}moveToLine(e){let n=this.dom,i;if(e.node!=n)return e;for(let r=e.offset;!i&&r<n.childNodes.length;r++){let s=Oe.get(n.childNodes[r]);s instanceof We&&(i=s.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let s=Oe.get(n.childNodes[r]);s instanceof We&&(i=s.domAtPos(s.length))}return i?new ht(i.node,i.offset,!0):e}nearest(e){for(let n=e;n;){let i=Oe.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let r=this.children[n];if(i<r.length||r instanceof We)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){let i=null,r=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let l=this.children[o],a=s-l.breakAfter,c=a-l.length;if(a<e)break;if(c<=e&&(c<e||l.covers(-1))&&(a>e||l.covers(1))&&(!i||l instanceof We&&!(i instanceof We&&n>=0)))i=l,r=c;else if(i&&c==e&&a==e&&l instanceof qn&&Math.abs(n)<2){if(l.deco.startSide<0)break;o&&(i=null)}s=c}return i?i.coordsAt(e-r,n):null}coordsForChar(e){let{i:n,off:i}=this.childPos(e,1),r=this.children[n];if(!(r instanceof We))return null;for(;r.children.length;){let{i:l,off:a}=r.childPos(i,1);for(;;l++){if(l==r.children.length)return null;if((r=r.children[l]).length)break}i=a}if(!(r instanceof hn))return null;let s=ot(r.text,i);if(s==i)return null;let o=Ji(r.dom,i,s).getClientRects();for(let l=0;l<o.length;l++){let a=o[l];if(l==o.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let n=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==De.LTR;for(let c=0,u=0;u<this.children.length;u++){let f=this.children[u],h=c+f.length;if(h>r)break;if(c>=i){let d=f.dom.getBoundingClientRect();if(n.push(d.height),o){let p=f.dom.lastChild,m=p?$r(p):[];if(m.length){let y=m[m.length-1],g=a?y.right-d.left:d.right-y.left;g>l&&(l=g,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=h)}}}c=h+f.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?De.RTL:De.LTR}measureTextSize(){for(let s of this.children)if(s instanceof We){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=$r(e.firstChild)[0];n=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new py(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],o=s?s.from-1:this.length;if(o>i){let l=(n.lineBlockAt(o).bottom-n.lineBlockAt(i).top)/this.view.scaleY;e.push(G.replace({widget:new ku(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return G.set(e)}updateDeco(){let e=1,n=this.view.state.facet(Qs).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),i=!1,r=this.view.state.facet($y).map((s,o)=>{let l=typeof s=="function";return l&&(i=!0),l?s(this.view):s});for(r.length&&(this.dynamicDecorationMap[e++]=i,n.push(ge.join(r))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(Ny))try{if(c(this.view,e.range,e))return!0}catch(u){Pt(this.view.state,u,"scroll handler")}let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=Wy(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;QP(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==De.LTR)}}function dM(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function jy(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=hy(n.focusNode,n.focusOffset),r=dy(n.focusNode,n.focusOffset),s=i||r;if(r&&i&&r.node!=i.node){let l=Oe.get(r.node);if(!l||l instanceof hn&&l.text!=r.node.nodeValue)s=r;else if(t.docView.lastCompositionAfterCursor){let a=Oe.get(i.node);!a||a instanceof hn&&a.text!=i.node.nodeValue||(s=r)}}if(t.docView.lastCompositionAfterCursor=s!=i,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function pM(t,e,n){let i=jy(t,n);if(!i)return null;let{node:r,from:s,to:o}=i,l=r.nodeValue;if(/[\n\r]/.test(l)||t.state.doc.sliceString(i.from,i.to)!=l)return null;let a=e.invertedDesc,c=new Yt(a.mapPos(s),a.mapPos(o),s,o),u=[];for(let f=r.parentNode;;f=f.parentNode){let h=Oe.get(f);if(h instanceof Qn)u.push({node:f,deco:h.mark});else{if(h instanceof We||f.nodeName=="DIV"&&f.parentNode==t.contentDOM)return{range:c,text:r,marks:u,line:f};if(f!=t.contentDOM)u.push({node:f,deco:new So({inclusive:!0,attributes:tM(f),tagName:f.tagName.toLowerCase()})});else return null}}}function mM(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let gM=class{constructor(){this.changes=[]}compareRange(e,n){Ou(e,n,this.changes)}comparePoint(e,n){Ou(e,n,this.changes)}};function yM(t,e,n){let i=new gM;return ge.compare(t,e,n,i),i.changes}function bM(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function vM(t,e){let n=!1;return e&&t.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(n=!0)}),n}function wM(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return D.cursor(e);s==0?n=1:s==r.length&&(n=-1);let o=s,l=s;n<0?o=ot(r.text,s,!1):l=ot(r.text,s);let a=i(r.text.slice(o,l));for(;o>0;){let c=ot(r.text,o,!1);if(i(r.text.slice(c,o))!=a)break;o=c}for(;l<r.length;){let c=ot(r.text,l);if(i(r.text.slice(l,c))!=a)break;l=c}return D.range(o+r.from,l+r.from)}function xM(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function SM(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function ac(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function pp(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function mp(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Pu(t,e,n){let i,r,s,o,l=!1,a,c,u,f;for(let p=t.firstChild;p;p=p.nextSibling){let m=$r(p);for(let y=0;y<m.length;y++){let g=m[y];r&&ac(r,g)&&(g=pp(mp(g,r.bottom),r.top));let v=xM(e,g),x=SM(n,g);if(v==0&&x==0)return p.nodeType==3?gp(p,e,n):Pu(p,e,n);if(!i||o>x||o==x&&s>v){i=p,r=g,s=v,o=x;let S=x?n<g.top?-1:1:v?e<g.left?-1:1:0;l=!S||(S>0?y<m.length-1:y>0)}v==0?n>g.bottom&&(!u||u.bottom<g.bottom)?(a=p,u=g):n<g.top&&(!f||f.top>g.top)&&(c=p,f=g):u&&ac(u,g)?u=mp(u,g.bottom):f&&ac(f,g)&&(f=pp(f,g.top))}}if(u&&u.bottom>=n?(i=a,r=u):f&&f.top<=n&&(i=c,r=f),!i)return{node:t,offset:0};let h=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return gp(i,h,n);if(l&&i.contentEditable!="false")return Pu(i,h,n);let d=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:d}}function gp(t,e,n){let i=t.nodeValue.length,r=-1,s=1e9,o=0;for(let l=0;l<i;l++){let a=Ji(t,l,l+1).getClientRects();for(let c=0;c<a.length;c++){let u=a[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let f=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&f<s){let h=e>=(u.left+u.right)/2,d=h;if((Q.chrome||Q.gecko)&&Ji(t,l).getBoundingClientRect().left==u.right&&(d=!h),f<=0)return{node:t,offset:l+(d?1:0)};r=l+(d?1:0),s=f}}}return{node:t,offset:r>-1?r:o>0?t.nodeValue.length:0}}function zy(t,e,n,i=-1){var r,s;let o=t.contentDOM.getBoundingClientRect(),l=o.top+t.viewState.paddingTop,a,{docHeight:c}=t.viewState,{x:u,y:f}=e,h=f-l;if(h<0)return 0;if(h>c)return t.state.doc.length;for(let S=t.viewState.heightOracle.textHeight/2,b=!1;a=t.elementAtHeight(h),a.type!=xt.Text;)for(;h=i>0?a.bottom+S:a.top-S,!(h>=0&&h<=c);){if(b)return n?null:0;b=!0,i=-i}f=l+h;let d=a.from;if(d<t.viewport.from)return t.viewport.from==0?0:n?null:yp(t,o,a,u,f);if(d>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:yp(t,o,a,u,f);let p=t.dom.ownerDocument,m=t.root.elementFromPoint?t.root:p,y=m.elementFromPoint(u,f);y&&!t.contentDOM.contains(y)&&(y=null),y||(u=Math.max(o.left+1,Math.min(o.right-1,u)),y=m.elementFromPoint(u,f),y&&!t.contentDOM.contains(y)&&(y=null));let g,v=-1;if(y&&((r=t.docView.nearest(y))===null||r===void 0?void 0:r.isEditable)!=!1){if(p.caretPositionFromPoint){let S=p.caretPositionFromPoint(u,f);S&&({offsetNode:g,offset:v}=S)}else if(p.caretRangeFromPoint){let S=p.caretRangeFromPoint(u,f);S&&({startContainer:g,startOffset:v}=S,(!t.contentDOM.contains(g)||Q.safari&&OM(g,v,u)||Q.chrome&&kM(g,v,u))&&(g=void 0))}g&&(v=Math.min(In(g),v))}if(!g||!t.docView.dom.contains(g)){let S=We.find(t.docView,d);if(!S)return h>a.top+a.height/2?a.to:a.from;({node:g,offset:v}=Pu(S.dom,u,f))}let x=t.docView.nearest(g);if(!x)return null;if(x.isWidget&&((s=x.dom)===null||s===void 0?void 0:s.nodeType)==1){let S=x.dom.getBoundingClientRect();return e.y<S.top||e.y<=S.bottom&&e.x<=(S.left+S.right)/2?x.posAtStart:x.posAtEnd}else return x.localPosFromDOM(g,v)+x.posAtStart}function yp(t,e,n,i,r){let s=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let l=t.viewState.heightOracle.textHeight,a=Math.floor((r-n.top-(t.defaultLineHeight-l)*.5)/l);s+=a*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+pu(o,s,t.state.tabSize)}function OM(t,e,n){let i;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(let r=t.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return Ji(t,i-1,i).getBoundingClientRect().left>n}function kM(t,e,n){if(e!=0)return!1;for(let r=t;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=t.nodeType==1?t.getBoundingClientRect():Ji(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function Mu(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let i of n.type)if(i.to>e||i.to==e&&(i.to==n.to||i.type==xt.Text))return i}return n}function CM(t,e,n,i){let r=Mu(t,e.head),s=!i||r.type!=xt.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),l=t.textDirectionAt(r.from),a=t.posAtCoords({x:n==(l==De.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(a!=null)return D.cursor(a,n?-1:1)}return D.cursor(n?r.to:r.from,n?-1:1)}function bp(t,e,n,i){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),o=t.textDirectionAt(r.from);for(let l=e,a=null;;){let c=uM(r,s,o,l,n),u=Ty;if(!c){if(r.number==(n?t.state.doc.lines:1))return l;u=`
`,r=t.state.doc.line(r.number+(n?1:-1)),s=t.bidiSpans(r),c=t.visualLineSide(r,!n)}if(a){if(!a(u))return l}else{if(!i)return c;a=i(u)}l=c}}function AM(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return s=>{let o=i(s);return r==Be.Space&&(r=o),r==o}}function TM(t,e,n,i){let r=e.head,s=n?1:-1;if(r==(n?t.state.doc.length:0))return D.cursor(r,e.assoc);let o=e.goalColumn,l,a=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(r,e.assoc||-1),u=t.documentTop;if(c)o==null&&(o=c.left-a.left),l=s<0?c.top:c.bottom;else{let d=t.viewState.lineBlockAt(r);o==null&&(o=Math.min(a.right-a.left,t.defaultCharacterWidth*(r-d.from))),l=(s<0?d.top:d.bottom)+u}let f=a.left+o,h=i??t.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let p=l+(h+d)*s,m=zy(t,{x:f,y:p},!1,s);if(p<a.top||p>a.bottom||(s<0?m<r:m>r)){let y=t.docView.coordsForChar(m),g=!y||p<y.top?-1:1;return D.cursor(m,g,void 0,o)}}}function xl(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,(s,o,l)=>{if(e>s&&e<o){let a=i||n||(e-s<o-e?-1:1);e=a<0?s:o,i=a}});if(!i)return e}}function cc(t,e,n){let i=xl(t.state.facet(Yf).map(r=>r(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:D.cursor(i,i<n.from?1:-1)}const ws="￿";class EM{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(de.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=ws}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==n)break;let l=Oe.get(r),a=Oe.get(o);(l&&a?l.breakAfter:(l?l.breakAfter:$l(r))||$l(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,l;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=r.exec(n))&&(s=l.index,o=l[0].length),this.append(n.slice(i,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let n=Oe.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(PM(e,i.node,i.offset)?n:0))}}function PM(t,e,n){for(;;){if(!e||n<In(e))return!1;if(e==t)return!0;n=Yi(e)+1,e=e.parentNode}}class vp{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class MM{constructor(e,n,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let l=s||o?[]:LM(e),a=new EM(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=BM(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=s&&s.node==l.focusNode&&s.offset==l.focusOffset||!yu(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),c=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!yu(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),u=e.viewport;if((Q.ios||Q.chrome)&&e.state.selection.main.empty&&a!=c&&(u.from>0||u.to<e.state.doc.length)){let f=Math.min(a,c),h=Math.max(a,c),d=u.from-f,p=u.to-h;(d==0||d==1||f==0)&&(p==0||p==-1||h==e.state.doc.length)&&(a=0,c=e.state.doc.length)}this.newSel=D.single(c,a)}}}function qy(t,e){let n,{newSel:i}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,a=r.from,c=null;(s===8||Q.android&&e.text.length<l-o)&&(a=r.to,c="end");let u=DM(t.state.doc.sliceString(o,l,ws),e.text,a-o,c);u&&(Q.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==ws+ws&&u.toB--,n={from:o+u.from,to:o+u.toA,insert:ve.of(e.text.slice(u.from,u.toB).split(ws))})}else i&&(!t.hasFocus&&t.state.facet(ii)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:(Q.mac||Q.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=D.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:ve.of([" "])}):Q.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=D.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:ve.of([" "])}),n)return Jf(t,n,i,s);if(i&&!i.main.eq(r)){let o=!1,l="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),l=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:o,userEvent:l}),!0}else return!1}function Jf(t,e,n,i=-1){if(Q.ios&&t.inputState.flushIOSKey(e))return!0;let r=t.state.selection.main;if(Q.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&t.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Ar(t.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&Ar(t.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&Ar(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,l=()=>o||(o=RM(t,e,n));return t.state.facet(Dy).some(a=>a(t,e.from,e.to,s,l))||t.dispatch(l()),!0}function RM(t,e,n){let i,r=t.state,s=r.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let l=s.from<e.from?r.sliceDoc(s.from,e.from):"",a=s.to>e.to?r.sliceDoc(e.to,s.to):"";i=r.replaceSelection(t.state.toText(l+e.insert.sliceString(0,void 0,t.state.lineBreak)+a))}else{let l=r.changes(e),a=n&&n.main.to<=l.newLength?n.main:void 0;if(r.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),u,f=n&&jy(t,n.main.head);if(f){let p=e.insert.length-(e.to-e.from);u={from:f.from,to:f.to-p}}else u=t.state.doc.lineAt(s.head);let h=s.to-e.to,d=s.to-s.from;i=r.changeByRange(p=>{if(p.from==s.from&&p.to==s.to)return{changes:l,range:a||p.map(l)};let m=p.to-h,y=m-c.length;if(p.to-p.from!=d||t.state.sliceDoc(y,m)!=c||p.to>=u.from&&p.from<=u.to)return{range:p};let g=r.changes({from:y,to:m,insert:e.insert}),v=p.to-s.to;return{changes:g,range:a?D.range(Math.max(0,a.anchor+v),Math.max(0,a.head+v)):p.map(g)}})}else i={changes:l,selection:a&&r.selection.replaceRange(a)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:o,scrollIntoView:!0})}function DM(t,e,n,i){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let o=t.length,l=e.length;for(;o>0&&l>0&&t.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,s-Math.min(o,l));n-=o+a-s}if(o<s&&t.length<e.length){let a=n<=s&&n>=o?s-n:0;s-=a,l=s+(l-o),o=s}else if(l<s){let a=n<=s&&n>=l?s-n:0;s-=a,o=s+(o-l),l=s}return{from:s,toA:o,toB:l}}function LM(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new vp(n,i)),(r!=n||s!=i)&&e.push(new vp(r,s))),e}function BM(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?D.single(n+e,i+e):null}class IM{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Q.safari&&e.contentDOM.addEventListener("input",()=>null),Q.gecko&&YM(e.contentDOM.ownerDocument)}handleEvent(e){!jM(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,n){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,n);for(let r of i.handlers){if(n.defaultPrevented)break;if(r(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=NM(e),i=this.handlers,r=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,l=i[s];l&&o!=!l.handlers.length&&(r.removeEventListener(s,this.handleEvent),l=null),l||r.addEventListener(s,this.handleEvent,{passive:o})}for(let s in i)s!="scroll"&&!n[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Qy.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Q.android&&Q.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return Q.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=Uy.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||FM.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Ar(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Q.safari&&!Q.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function wp(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(r){Pt(n.state,r)}}}function NM(t){let e=Object.create(null);function n(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let r=i.spec;if(r&&r.domEventHandlers)for(let s in r.domEventHandlers){let o=r.domEventHandlers[s];o&&n(s).handlers.push(wp(i.value,o))}if(r&&r.domEventObservers)for(let s in r.domEventObservers){let o=r.domEventObservers[s];o&&n(s).observers.push(wp(i.value,o))}}for(let i in dn)n(i).handlers.push(dn[i]);for(let i in nn)n(i).observers.push(nn[i]);return e}const Uy=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],FM="dthko",Qy=[16,17,18,20,91,92,224,225],qo=6;function Uo(t){return Math.max(0,t)*.7+8}function _M(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class $M{constructor(e,n,i,r){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=KP(e.contentDOM),this.atoms=e.state.facet(Yf).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(de.allowMultipleSelections)&&VM(e,n),this.dragging=WM(e,n)&&Gy(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&_M(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,r=0,s=0,o=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=Wy(this.view);e.clientX-a.left<=r+qo?n=-Uo(r-e.clientX):e.clientX+a.right>=o-qo&&(n=Uo(e.clientX-o)),e.clientY-a.top<=s+qo?i=-Uo(s-e.clientY):e.clientY+a.bottom>=l-qo&&(i=Uo(e.clientY-l)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=xl(this.atoms,r.from,0);o!=r.from&&(s=D.cursor(o,-1))}else{let o=xl(this.atoms,r.from,-1),l=xl(this.atoms,r.to,1);(o!=r.from||l!=r.to)&&(s=D.range(r.from==r.anchor?o:l,r.from==r.head?o:l))}s&&(n||(n=e.ranges.slice()),n[i]=s)}return n?D.create(n,e.mainIndex):e}select(e){let{view:n}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function VM(t,e){let n=t.state.facet(Ey);return n.length?n[0](e):Q.mac?e.metaKey:e.ctrlKey}function HM(t,e){let n=t.state.facet(Py);return n.length?n[0](e):Q.mac?!e.altKey:!e.ctrlKey}function WM(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=Us(t.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function jM(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=Oe.get(n))&&i.ignoreEvent(e))return!1;return!0}const dn=Object.create(null),nn=Object.create(null),Ky=Q.ie&&Q.ie_version<15||Q.ios&&Q.webkit_version<604;function zM(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),Xy(t,n.value)},50)}function Da(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function Xy(t,e){e=Da(t.state,Kf,e);let{state:n}=t,i,r=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(Ru!=null&&n.selection.ranges.every(a=>a.empty)&&Ru==s.toString()){let a=-1;i=n.changeByRange(c=>{let u=n.doc.lineAt(c.from);if(u.from==a)return{range:c};a=u.from;let f=n.toText((o?s.line(r++).text:e)+n.lineBreak);return{changes:{from:u.from,insert:f},range:D.cursor(c.from+f.length)}})}else o?i=n.changeByRange(a=>{let c=s.line(r++);return{changes:{from:a.from,to:a.to,insert:c.text},range:D.cursor(a.from+c.length)}}):i=n.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}nn.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};dn.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);nn.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};nn.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};dn.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(My))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=QM(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new $M(t,e,n,i)),i&&t.observer.ignore(()=>{cy(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let r=t.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function xp(t,e,n,i){if(i==1)return D.cursor(e,n);if(i==2)return wM(t.state,e,n);{let r=We.find(t.docView,e),s=t.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,l=r?r.posAtEnd:s.to;return l<t.state.doc.length&&l==s.to&&l++,D.range(o,l)}}let Sp=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function qM(t,e,n,i){let r=We.find(t.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&Sp(n,i,o))return-1;let l=r.coordsAt(s,1);return l&&Sp(n,i,l)?1:o&&o.bottom>=i?-1:1}function Op(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:qM(t,n,e.clientX,e.clientY)}}const UM=Q.ie&&Q.ie_version<=11;let kp=null,Cp=0,Ap=0;function Gy(t){if(!UM)return t.detail;let e=kp,n=Ap;return kp=t,Ap=Date.now(),Cp=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(Cp+1)%3:1}function QM(t,e){let n=Op(t,e),i=Gy(e),r=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,o,l){let a=Op(t,s),c,u=xp(t,a.pos,a.bias,i);if(n.pos!=a.pos&&!o){let f=xp(t,n.pos,n.bias,i),h=Math.min(f.from,u.from),d=Math.max(f.to,u.to);u=h<u.from?D.range(h,d):D.range(d,h)}return o?r.replaceRange(r.main.extend(u.from,u.to)):l&&i==1&&r.ranges.length>1&&(c=KM(r,a.pos))?c:l?r.addRange(u):D.create([u])}}}function KM(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return D.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}dn.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let r=t.docView.nearest(e.target);if(r&&r.isWidget){let s=r.posAtStart,o=s+r.length;(s>=n.to||o<=n.from)&&(n=D.range(s,o))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",Da(t.state,Xf,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};dn.dragend=t=>(t.inputState.draggedContent=null,!1);function Tp(t,e,n,i){if(n=Da(t.state,Kf,n),!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=i&&s&&HM(t,e)?{from:s.from,to:s.to}:null,l={from:r,insert:n},a=t.state.changes(o?[o,l]:l);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(r,-1),head:a.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}dn.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,s=()=>{++r==n.length&&Tp(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),s()},l.readAsText(n[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return Tp(t,e,i,!0),!0}return!1};dn.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=Ky?null:e.clipboardData;return n?(Xy(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(zM(t),!1)};function XM(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function GM(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:Da(t,Xf,e.join(t.lineBreak)),ranges:n,linewise:i}}let Ru=null;dn.copy=dn.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=GM(t.state);if(!n&&!r)return!1;Ru=r?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=Ky?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(XM(t,n),!1)};const Yy=Yn.define();function Jy(t,e){let n=[];for(let i of t.facet(Ly)){let r=i(t,e);r&&n.push(r)}return n?t.update({effects:n,annotations:Yy.of(!0)}):null}function Zy(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=Jy(t.state,e);n?t.dispatch(n):t.update([])}},10)}nn.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),Zy(t)};nn.blur=t=>{t.observer.clearSelectionRange(),Zy(t)};nn.compositionstart=nn.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};nn.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Q.chrome&&Q.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};nn.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};dn.beforeinput=(t,e)=>{var n,i;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let l=o[0],a=t.posAtDOM(l.startContainer,l.startOffset),c=t.posAtDOM(l.endContainer,l.endOffset);return Jf(t,{from:a,to:c,insert:t.state.toText(s)},null),!0}}let r;if(Q.chrome&&Q.android&&(r=Uy.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let s=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return Q.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),Q.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>nn.compositionend(t,e),20),!1};const Ep=new Set;function YM(t){Ep.has(t)||(Ep.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const Pp=["pre-wrap","normal","pre-line","break-spaces"];let Wr=!1;function Mp(){Wr=!1}class JM{constructor(e){this.lineWrapping=e,this.doc=ve.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Pp.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,i,r,s,o){let l=Pp.indexOf(e)>-1,a=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=n,this.charWidth=i,this.textHeight=r,this.lineLength=s,a){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return a}}class ZM{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class Cn{constructor(e,n,i,r,s){this.from=e,this.length=n,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?xt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof bi?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Cn(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var Me=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(Me||(Me={}));const Sl=.001;class St{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Sl&&(Wr=!0),this.height=e)}replace(e,n,i){return St.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,r){let s=this,o=i.doc;for(let l=r.length-1;l>=0;l--){let{fromA:a,toA:c,fromB:u,toB:f}=r[l],h=s.lineAt(a,Me.ByPosNoHeight,i.setDoc(n),0,0),d=h.to>=c?h:s.lineAt(c,Me.ByPosNoHeight,i,0,0);for(f+=d.to-c,c=d.to;l>0&&h.from<=r[l-1].toA;)a=r[l-1].fromA,u=r[l-1].fromB,l--,a<h.from&&(h=s.lineAt(a,Me.ByPosNoHeight,i,0,0));u+=h.from-a,a=h.from;let p=Zf.build(i.setDoc(o),e,u,f);s=Wl(s,s.replace(a,c,p))}return s.updateHeight(i,0)}static empty(){return new _t(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,r=0,s=0;for(;;)if(n==i)if(r>s*2){let l=e[n-1];l.break?e.splice(--n,1,l.left,null,l.right):e.splice(--n,1,l.left,l.right),i+=1+l.break,r-=l.size}else if(s>r*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,s-=l.size}else break;else if(r<s){let l=e[n++];l&&(r+=l.size)}else{let l=e[--i];l&&(s+=l.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new eR(St.of(e.slice(0,n)),o,St.of(e.slice(i)))}}function Wl(t,e){return t==e?t:(t.constructor!=e.constructor&&(Wr=!0),e)}St.prototype.size=1;class eb extends St{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,r){return new Cn(r,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,n,i,r,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class _t extends eb{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,r){return new Cn(r,this.length,i,this.height,this.breaks)}replace(e,n,i){let r=i[0];return i.length==1&&(r instanceof _t||r instanceof it&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof it?r=new _t(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):St.of(i)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class it extends St{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-i+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*s);o=a/s,this.length>s+1&&(l=(this.height-a)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:l}}blockAt(e,n,i,r){let{firstLine:s,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(n,r);if(n.lineWrapping){let c=r+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),u=n.doc.lineAt(c),f=l+u.length*a,h=Math.max(i,e-f/2);return new Cn(u.from,u.length,h,f,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-i)/l))),{from:u,length:f}=n.doc.line(s+c);return new Cn(u,f,i+l*c,l,0)}}lineAt(e,n,i,r,s){if(n==Me.ByHeight)return this.blockAt(e,i,r,s);if(n==Me.ByPosNoHeight){let{from:d,to:p}=i.doc.lineAt(e);return new Cn(d,p-d,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(i,s),c=i.doc.lineAt(e),u=l+c.length*a,f=c.number-o,h=r+l*f+a*(c.from-s-f);return new Cn(c.from,c.length,Math.max(r,Math.min(h,r+this.height-u)),u,0)}forEachLine(e,n,i,r,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:l,perLine:a,perChar:c}=this.heightMetrics(i,s);for(let u=e,f=r;u<=n;){let h=i.doc.lineAt(u);if(u==e){let p=h.number-l;f+=a*p+c*(e-s-p)}let d=a+c*h.length;o(new Cn(h.from,h.length,f,d,0)),f+=d,u=h.to+1}}replace(e,n,i){let r=this.length-n;if(r>0){let s=i[i.length-1];s instanceof it?i[i.length-1]=new it(s.length+r):i.push(null,new it(r-1))}if(e>0){let s=i[0];s instanceof it?i[0]=new it(e+s.length):i.unshift(new it(e-1),null)}return St.of(i)}decomposeLeft(e,n){n.push(new it(e-1),null)}decomposeRight(e,n){n.push(null,new it(this.length-e-1))}updateHeight(e,n=0,i=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let o=[],l=Math.max(n,r.from),a=-1;for(r.from>n&&o.push(new it(r.from-n-1).updateHeight(e,n));l<=s&&r.more;){let u=e.doc.lineAt(l).length;o.length&&o.push(null);let f=r.heights[r.index++];a==-1?a=f:Math.abs(f-a)>=Sl&&(a=-2);let h=new _t(u,f);h.outdated=!1,o.push(h),l+=u+1}l<=s&&o.push(null,new it(s-l).updateHeight(e,l));let c=St.of(o);return(a<0||Math.abs(c.height-this.height)>=Sl||Math.abs(a-this.heightMetrics(e,n).perLine)>=Sl)&&(Wr=!0),Wl(this,c)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class eR extends St{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,n,i,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,i,r,s){let o=r+this.left.height,l=s+this.left.length+this.break,a=n==Me.ByHeight?e<o:e<l,c=a?this.left.lineAt(e,n,i,r,s):this.right.lineAt(e,n,i,o,l);if(this.break||(a?c.to<l:c.from>l))return c;let u=n==Me.ByPosNoHeight?Me.ByPosNoHeight:Me.ByPos;return a?c.join(this.right.lineAt(l,u,i,o,l)):this.left.lineAt(l,u,i,r,s).join(c)}forEachLine(e,n,i,r,s,o){let l=r+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,n,i,r,s,o),n>=a&&this.right.forEachLine(e,n,i,l,a,o);else{let c=this.lineAt(a,Me.ByPos,i,r,s);e<c.from&&this.left.forEachLine(e,c.from-1,i,r,s,o),c.to>=e&&c.from<=n&&o(c),n>c.to&&this.right.forEachLine(c.to+1,n,i,l,a,o)}}replace(e,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let l of i)s.push(l);if(e>0&&Rp(s,o-1),n<this.length){let l=s.length;this.decomposeRight(n,s),Rp(s,l)}return St.of(s)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?St.of(this.break?[e,null,n]:[e,n]):(this.left=Wl(this.left,e),this.right=Wl(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,r){let{left:s,right:o}=this,l=n+s.length+this.break,a=null;return r&&r.from<=n+s.length&&r.more?a=s=s.updateHeight(e,n,i,r):s.updateHeight(e,n,i),r&&r.from<=l+o.length&&r.more?a=o=o.updateHeight(e,l,i,r):o.updateHeight(e,l,i),a?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Rp(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof it&&(i=t[e+1])instanceof it&&t.splice(e-1,3,new it(n.length+1+i.length))}const tR=5;class Zf{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof _t?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new _t(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new eb(o,r,i)):(o||s||r>=tR)&&this.addLineDeco(r,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new _t(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new it(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof _t)return e;let n=new _t(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof _t)&&!this.isCovered?this.nodes.push(new _t(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof _t&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,n,i,r){let s=new Zf(i,e);return ge.spans(n,i,r,s,0),s.finish(i)}}function nR(t,e,n){let i=new iR;return ge.compare(t,e,n,i,0),i.changes}class iR{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,r){(e<n||i&&i.heightRelevant||r&&r.heightRelevant)&&Ou(e,n,this.changes,5)}}function rR(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),l=Math.max(0,n.top),a=Math.min(r.innerHeight,n.bottom);for(let c=t.parentNode;c&&c!=i.body;)if(c.nodeType==1){let u=c,f=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&f.overflow!="visible"){let h=u.getBoundingClientRect();s=Math.max(s,h.left),o=Math.min(o,h.right),l=Math.max(l,h.top),a=Math.min(c==t.parentNode?r.innerHeight:a,h.bottom)}c=f.position=="absolute"||f.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:l-(n.top+e),bottom:Math.max(l,a)-(n.top+e)}}function sR(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class uc{constructor(e,n,i,r){this.from=e,this.to=n,this.size=i,this.displaySize=r}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e,n){return G.replace({widget:new oR(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class oR extends Jn{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Dp{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Lp,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=De.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(Gf).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new JM(n),this.stateDeco=e.facet(Qs).filter(i=>typeof i!="function"),this.heightMap=St.empty().applyChanges(this.stateDeco,ve.empty,this.heightOracle.setDoc(e.doc),[new Yt(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=G.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new Qo(s,o))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Lp:new eh(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(xs(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(Qs).filter(u=>typeof u!="function");let r=e.changedRanges,s=Yt.extendWithRanges(r,nR(i,this.stateDeco,e?e.changes:Xe.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Mp(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||Wr)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<a.from||n.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,n));let c=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Iy)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?De.RTL:De.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),l=n.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let c=0,u=0;if(l.width&&l.height){let{scaleX:S,scaleY:b}=ay(n,l);(S>.005&&Math.abs(this.scaleX-S)>.005||b>.005&&Math.abs(this.scaleY-b)>.005)&&(this.scaleX=S,this.scaleY=b,c|=8,o=a=!0)}let f=(parseInt(i.paddingTop)||0)*this.scaleY,h=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=f||this.paddingBottom!=h)&&(this.paddingTop=f,this.paddingBottom=h,c|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=8);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=fy(e.scrollDOM);let p=(this.printing?sR:rR)(n,this.paddingTop),m=p.top-this.pixelViewport.top,y=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let g=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(g!=this.inView&&(this.inView=g,g&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let v=l.width;if((this.contentDOMWidth!=v||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,c|=8),a){let S=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(S)&&(o=!0),o||r.lineWrapping&&Math.abs(v-this.contentDOMWidth)>r.charWidth){let{lineHeight:b,charWidth:O,textHeight:k}=e.docView.measureTextSize();o=b>0&&r.refresh(s,b,O,k,v/O,S),o&&(e.docView.minWidth=0,c|=8)}m>0&&y>0?u=Math.max(m,y):m<0&&y<0&&(u=Math.min(m,y)),Mp();for(let b of this.viewports){let O=b.from==this.viewport.from?S:e.docView.measureVisibleLineHeights(b);this.heightMap=(o?St.empty().applyChanges(this.stateDeco,ve.empty,this.heightOracle,[new Yt(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new ZM(b.from,O))}Wr&&(c|=2)}let x=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new Qo(r.lineAt(o-i*1e3,Me.ByHeight,s,0,0).from,r.lineAt(l+(1-i)*1e3,Me.ByHeight,s,0,0).to);if(n){let{head:c}=n.range;if(c<a.from||c>a.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=r.lineAt(c,Me.ByPos,s,0,0),h;n.y=="center"?h=(f.top+f.bottom)/2-u/2:n.y=="start"||n.y=="nearest"&&c<a.from?h=f.top:h=f.bottom-u,a=new Qo(r.lineAt(h-1e3/2,Me.ByHeight,s,0,0).from,r.lineAt(h+u+1e3/2,Me.ByHeight,s,0,0).to)}}return a}mapViewport(e,n){let i=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new Qo(this.heightMap.lineAt(i,Me.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,Me.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,Me.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,Me.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=l+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<l+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let r of e)n.touchesRange(r.from,r.to)||i.push(new uc(n.mapPos(r.from),n.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=De.LTR&&!i)return[];let l=[],a=(u,f,h,d)=>{if(f-u<s)return;let p=this.state.selection.main,m=[p.from];p.empty||m.push(p.to);for(let g of m)if(g>u&&g<f){a(u,g-10,h,d),a(g+10,f,h,d);return}let y=aR(e,g=>g.from>=h.from&&g.to<=h.to&&Math.abs(g.from-u)<s&&Math.abs(g.to-f)<s&&!m.some(v=>g.from<v&&g.to>v));if(!y){if(f<h.to&&n&&i&&n.visibleRanges.some(x=>x.from<=f&&x.to>=f)){let x=n.moveToLineBoundary(D.cursor(f),!1,!0).head;x>u&&(f=x)}let g=this.gapSize(h,u,f,d),v=i||g<2e6?g:2e6;y=new uc(u,f,g,v)}l.push(y)},c=u=>{if(u.length<o||u.type!=xt.Text)return;let f=lR(u.from,u.to,this.stateDeco);if(f.total<o)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,d,p;if(i){let m=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,y,g;if(h!=null){let v=Xo(f,h),x=((this.visibleBottom-this.visibleTop)/2+m)/u.height;y=v-x,g=v+x}else y=(this.visibleTop-u.top-m)/u.height,g=(this.visibleBottom-u.top+m)/u.height;d=Ko(f,y),p=Ko(f,g)}else{let m=f.total*this.heightOracle.charWidth,y=r*this.heightOracle.charWidth,g=0;if(m>2e6)for(let O of e)O.from>=u.from&&O.from<u.to&&O.size!=O.displaySize&&O.from*this.heightOracle.charWidth+g<this.pixelViewport.left&&(g=O.size-O.displaySize);let v=this.pixelViewport.left+g,x=this.pixelViewport.right+g,S,b;if(h!=null){let O=Xo(f,h),k=((x-v)/2+y)/m;S=O-k,b=O+k}else S=(v-y)/m,b=(x+y)/m;d=Ko(f,S),p=Ko(f,b)}d>u.from&&a(u.from,d,u,f),p<u.to&&a(p,u.to,u,f)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return l}gapSize(e,n,i,r){let s=Xo(r,i)-Xo(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){uc.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=G.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];ge.spans(e,this.viewport.from,this.viewport.to,{span(r,s){n.push({from:r,to:s})},point(){}},20);let i=n.length!=this.visibleRanges.length||this.visibleRanges.some((r,s)=>r.from!=n[s].from||r.to!=n[s].to);return this.visibleRanges=n,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||xs(this.heightMap.lineAt(e,Me.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||xs(this.heightMap.lineAt(this.scaler.fromDOM(e),Me.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return xs(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Qo{constructor(e,n){this.from=e,this.to=n}}function lR(t,e,n){let i=[],r=t,s=0;return ge.spans(n,t,e,{span(){},point(o,l){o>r&&(i.push({from:r,to:o}),s+=o-r),r=l}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function Ko({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:s,to:o}=e[r],l=o-s;if(i<=l)return s+i;i-=l}}function Xo(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function aR(t,e){for(let n of t)if(e(n))return n}const Lp={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class eh{constructor(e,n,i){let r=0,s=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let c=n.lineAt(l,Me.ByPos,e,0,0).top,u=n.lineAt(a,Me.ByPos,e,0,0).bottom;return r+=u-c,{from:l,to:a,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let l of this.viewports)l.domTop=o+(l.top-s)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}eq(e){return e instanceof eh?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,i)=>n.from==e.viewports[i].from&&n.to==e.viewports[i].to):!1}}function xs(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new Cn(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(r=>xs(r,e)):t._content)}const Go=U.define({combine:t=>t.join(" ")}),Du=U.define({combine:t=>t.indexOf(!0)>-1}),Lu=gi.newName(),tb=gi.newName(),nb=gi.newName(),ib={"&light":"."+tb,"&dark":"."+nb};function Bu(t,e,n){return new gi(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return t;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):t+" "+i}})}const cR=Bu("."+Lu,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},ib),uR={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},fc=Q.ie&&Q.ie_version<=11;class fR{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new XP,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(Q.ie&&Q.ie_version<=11||Q.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(Q.chrome&&Q.chrome_version<126)&&(this.editContext=new dR(e),e.state.facet(ii)&&(e.contentDOM.editContext=this.editContext.editContext)),fc&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(ii)?i.root.activeElement!=this.dom:!wl(this.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(Q.ie&&Q.ie_version<=11||Q.android&&Q.chrome)&&!i.state.selection.main.empty&&r.focusNode&&Ds(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Us(e.root);if(!n)return!1;let i=Q.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&hR(this.view,n)||n;if(!i||this.selectionRange.eq(i))return!1;let r=wl(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&YP(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,uR),fc&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),fc&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Ar(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:r}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),r=this.selectionChanged&&wl(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new MM(this.view,e,n,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let i=this.view.state,r=qy(this.view,n);return this.view.state==i&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=Bp(n,e.previousSibling||e.target.previousSibling,-1),r=Bp(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(ii)!=e.state.facet(ii)&&(e.view.contentDOM.editContext=e.state.facet(ii)?this.editContext.editContext:null))}destroy(){var e,n,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Bp(t,e,n){for(;e;){let i=Oe.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function Ip(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return Ds(o.node,o.offset,r,s)&&([n,i,r,s]=[r,s,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}}function hR(t,e){if(e.getComposedRanges){let r=e.getComposedRanges(t.root)[0];if(r)return Ip(t,r)}let n=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),n=r.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?Ip(t,n):null}class dR{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let{anchor:r}=e.state.selection.main,s={from:this.toEditorPos(i.updateRangeStart),to:this.toEditorPos(i.updateRangeEnd),insert:ve.of(i.text.split(`
`))};s.from==this.from&&r<this.from?s.from=r:s.to==this.to&&r>this.to&&(s.to=r),!(s.from==s.to&&!s.insert.length)&&(this.pendingContextChange=s,e.state.readOnly||Jf(e,s,D.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd))),this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)))},this.handlers.characterboundsupdate=i=>{let r=[],s=null;for(let o=this.toEditorPos(i.rangeStart),l=this.toEditorPos(i.rangeEnd);o<l;o++){let a=e.coordsForChar(o);s=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||s||new DOMRect,r.push(s)}n.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let s of i.getTextFormats()){let o=s.underlineStyle,l=s.underlineThickness;if(o!="None"&&l!="None"){let a=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${l=="Thin"?1:2}px`;r.push(G.mark({attributes:{style:a}}).range(this.toEditorPos(s.rangeStart),this.toEditorPos(s.rangeEnd)))}}e.dispatch({effects:Fy.of(G.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{e.inputState.composing=-1,e.inputState.compositionFirstChange=null};for(let i in this.handlers)n.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=Us(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((s,o,l,a,c)=>{if(i)return;let u=c.length-(o-s);if(r&&o>=r.to)if(r.from==s&&r.to==o&&r.insert.eq(c)){r=this.pendingContextChange=null,n+=u,this.to+=u;return}else r=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=u,this.to+=u;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+c.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),c.toString()),this.to+=u}n+=u}),r&&!i&&this.revertPending(e.state),!i}update(e){let n=this.pendingContextChange;!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.resetRange(e.state),this.editContext.updateText(0,this.editContext.text.length,e.state.doc.sliceString(this.from,this.to)),this.setSelection(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),r=this.toContextPos(n.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e){return e+this.from}toContextPos(e){return e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class z{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(s=>i(s,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||GP(e.parent)||document,this.viewState=new Dp(e.state||de.create(e)),e.scrollTo&&e.scrollTo.is(zo)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(bs).map(r=>new lc(r));for(let r of this.plugins)r.update(this);this.observer=new fR(this),this.inputState=new IM(this),this.inputState.ensureHandlers(this.plugins),this.docView=new dp(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof Ye?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,s=this.state;for(let h of e){if(h.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=h.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,l=0,a=null;e.some(h=>h.annotation(Yy))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=Jy(s,o),a||(l=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(de.phrases)!=this.state.facet(de.phrases))return this.setState(s);r=Hl.create(this,s,e),r.flags|=l;let f=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(f&&(f=f.map(h.changes)),h.scrollIntoView){let{main:d}=h.state.selection;f=new Tr(d.empty?d:D.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of h.effects)d.is(zo)&&(f=d.value.clip(this.state))}this.viewState.update(r,f),this.bidiCache=jl.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(vs)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(Go)!=r.state.facet(Go)&&(this.viewState.mustMeasureContent=!0),(n||i||f||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!r.empty)for(let h of this.state.facet(Eu))try{h(r)}catch(d){Pt(this.state,d,"update listener")}(a||u)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),u&&!qy(this,u)&&c.force&&Ar(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new Dp(e),this.plugins=e.facet(bs).map(i=>new lc(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new dp(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(bs),i=e.state.facet(bs);if(n!=i){let r=[];for(let s of i){let o=n.indexOf(s);if(o<0)r.push(new lc(s));else{let l=this.plugins[o];l.mustUpdate=e,r.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);n!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(i){Pt(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(fy(i))s=-1,o=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(r);s=d.from,o=d.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];a&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(d=>{try{return d.read(this)}catch(p){return Pt(this.state,p),Np}}),f=Hl.create(this,this.state,[]),h=!1;f.flags|=a,n?n.flags|=a:n=f,this.updateState=2,f.empty||(this.updatePlugins(f),this.inputState.update(f),this.updateAttrs(),h=this.docView.update(f),h&&this.docViewUpdate());for(let d=0;d<c.length;d++)if(u[d]!=Np)try{let p=c[d];p.write&&p.write(u[d],this)}catch(p){Pt(this.state,p)}if(h&&this.docView.updateSelection(!0),!f.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){r=r+p,i.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let l of this.state.facet(Eu))l(n)}get themeClasses(){return Lu+" "+(this.state.facet(Du)?nb:tb)+" "+this.state.facet(Go)}updateAttrs(){let e=Fp(this,_y,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(ii)?"true":"false",class:"cm-content",style:`${Q.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),Fp(this,Gf,n);let i=this.observer.ignore(()=>{let r=Su(this.contentDOM,this.contentAttrs,n),s=Su(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let r of i.effects)if(r.is(z.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(vs);let e=this.state.facet(z.cspNonce);gi.mount(this.root,this.styleModules.concat(cR).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return cc(this,e,bp(this,e,n,i))}moveByGroup(e,n){return cc(this,e,bp(this,e,n,i=>AM(this,e.head,i)))}visualLineSide(e,n){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),s=i[n?i.length-1:0];return D.cursor(s.side(n,r)+e.from,s.forward(!n,r)?1:-1)}moveToLineBoundary(e,n,i=!0){return CM(this,e,n,i)}moveVertically(e,n,i){return cc(this,e,TM(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),zy(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[ai.find(s,e-r.from,-1,n)];return xo(i,o.dir==De.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(By)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>pR)return Ay(e.length);let n=this.textDirectionAt(e.from),i;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||Cy(s.isolates,i=hp(this,e))))return s.order;i||(i=hp(this,e));let r=cM(e.text,n,i);return this.bidiCache.push(new jl(e.from,e.to,n,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Q.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{cy(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return zo.of(new Tr(typeof e=="number"?D.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return zo.of(new Tr(D.cursor(i.from),"start","start",i.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Ve.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Ve.define(()=>({}),{eventObservers:e})}static theme(e,n){let i=gi.newName(),r=[Go.of(i),vs.of(Bu(`.${i}`,e))];return n&&n.dark&&r.push(Du.of(!0)),r}static baseTheme(e){return ir.lowest(vs.of(Bu("."+Lu,e,ib)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),r=i&&Oe.get(i)||Oe.get(e);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}z.styleModule=vs;z.inputHandler=Dy;z.clipboardInputFilter=Kf;z.clipboardOutputFilter=Xf;z.scrollHandler=Ny;z.focusChangeEffect=Ly;z.perLineTextDirection=By;z.exceptionSink=Ry;z.updateListener=Eu;z.editable=ii;z.mouseSelectionStyle=My;z.dragMovesSelection=Py;z.clickAddsSelectionRange=Ey;z.decorations=Qs;z.outerDecorations=$y;z.atomicRanges=Yf;z.bidiIsolatedRanges=Vy;z.scrollMargins=Hy;z.darkTheme=Du;z.cspNonce=U.define({combine:t=>t.length?t[0]:""});z.contentAttributes=Gf;z.editorAttributes=_y;z.lineWrapping=z.contentAttributes.of({class:"cm-lineWrapping"});z.announce=le.define();const pR=4096,Np={};class jl{constructor(e,n,i,r,s,o){this.from=e,this.to=n,this.dir=i,this.isolates=r,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:De.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!n.touchesRange(o.from,o.to)&&i.push(new jl(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function Fp(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(t):s;o&&xu(o,n)}return n}const mR=Q.mac?"mac":Q.windows?"win":Q.linux?"linux":"key";function gR(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,s,o,l;for(let a=0;a<n.length-1;++a){const c=n[a];if(/^(cmd|meta|m)$/i.test(c))l=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Yo(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const yR=ir.default(z.domEventHandlers({keydown(t,e){return sb(rb(e.state),t,e,"editor")}})),La=U.define({enables:yR}),_p=new WeakMap;function rb(t){let e=t.facet(La),n=_p.get(e);return n||_p.set(e,n=wR(e.reduce((i,r)=>i.concat(r),[]))),n}function bR(t,e,n){return sb(rb(t.state),e,t,n)}let ri=null;const vR=4e3;function wR(t,e=mR){let n=Object.create(null),i=Object.create(null),r=(o,l)=>{let a=i[o];if(a==null)i[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,l,a,c,u)=>{var f,h;let d=n[o]||(n[o]=Object.create(null)),p=l.split(/ (?!$)/).map(g=>gR(g,e));for(let g=1;g<p.length;g++){let v=p.slice(0,g).join(" ");r(v,!0),d[v]||(d[v]={preventDefault:!0,stopPropagation:!1,run:[x=>{let S=ri={view:x,prefix:v,scope:o};return setTimeout(()=>{ri==S&&(ri=null)},vR),!0}]})}let m=p.join(" ");r(m,!1);let y=d[m]||(d[m]={preventDefault:!1,stopPropagation:!1,run:((h=(f=d._any)===null||f===void 0?void 0:f.run)===null||h===void 0?void 0:h.slice())||[]});a&&y.run.push(a),c&&(y.preventDefault=!0),u&&(y.stopPropagation=!0)};for(let o of t){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of l){let u=n[c]||(n[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:f}=o;for(let h in u)u[h].run.push(d=>f(d,Iu))}let a=o[e]||o.key;if(a)for(let c of l)s(c,a,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+a,o.shift,o.preventDefault,o.stopPropagation)}return n}let Iu=null;function sb(t,e,n,i){Iu=e;let r=qP(e),s=rt(r,0),o=qt(s)==r.length&&r!=" ",l="",a=!1,c=!1,u=!1;ri&&ri.view==n&&ri.scope==i&&(l=ri.prefix+" ",Qy.indexOf(e.keyCode)<0&&(c=!0,ri=null));let f=new Set,h=y=>{if(y){for(let g of y.run)if(!f.has(g)&&(f.add(g),g(n)))return y.stopPropagation&&(u=!0),!0;y.preventDefault&&(y.stopPropagation&&(u=!0),c=!0)}return!1},d=t[i],p,m;return d&&(h(d[l+Yo(r,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Q.windows&&e.ctrlKey&&e.altKey)&&(p=yi[e.keyCode])&&p!=r?(h(d[l+Yo(p,e,!0)])||e.shiftKey&&(m=qs[e.keyCode])!=r&&m!=p&&h(d[l+Yo(m,e,!1)]))&&(a=!0):o&&e.shiftKey&&h(d[l+Yo(r,e,!0)])&&(a=!0),!a&&h(d._any)&&(a=!0)),c&&(a=!0),a&&u&&e.stopPropagation(),Iu=null,a}class ko{constructor(e,n,i,r,s){this.className=e,this.left=n,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=ob(e);return[new ko(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return xR(e,n,i)}}function ob(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==De.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function $p(t,e,n,i){let r=t.coordsAtPos(e,n*2);if(!r)return i;let s=t.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,l=t.posAtCoords({x:s.left+1,y:o}),a=t.posAtCoords({x:s.right-1,y:o});return l==null||a==null?i:{from:Math.max(i.from,Math.min(l,a)),to:Math.min(i.to,Math.max(l,a))}}function xR(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),s=t.textDirection==De.LTR,o=t.contentDOM,l=o.getBoundingClientRect(),a=ob(t),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),f=l.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),h=l.right-(u?parseInt(u.paddingRight):0),d=Mu(t,i),p=Mu(t,r),m=d.type==xt.Text?d:null,y=p.type==xt.Text?p:null;if(m&&(t.lineWrapping||d.widgetLineBreaks)&&(m=$p(t,i,1,m)),y&&(t.lineWrapping||p.widgetLineBreaks)&&(y=$p(t,r,-1,y)),m&&y&&m.from==y.from&&m.to==y.to)return v(x(n.from,n.to,m));{let b=m?x(n.from,null,m):S(d,!1),O=y?x(null,n.to,y):S(p,!0),k=[];return(m||d).to<(y||p).from-(m&&y?1:0)||d.widgetLineBreaks>1&&b.bottom+t.defaultLineHeight/2<O.top?k.push(g(f,b.bottom,h,O.top)):b.bottom<O.top&&t.elementAtHeight((b.bottom+O.top)/2).type==xt.Text&&(b.bottom=O.top=(b.bottom+O.top)/2),v(b).concat(k).concat(v(O))}function g(b,O,k,R){return new ko(e,b-a.left,O-a.top-.01,k-b,R-O+.01)}function v({top:b,bottom:O,horizontal:k}){let R=[];for(let N=0;N<k.length;N+=2)R.push(g(k[N],b,k[N+1],O));return R}function x(b,O,k){let R=1e9,N=-1e9,I=[];function $(q,P,E,H,te){let J=t.coordsAtPos(q,q==k.to?-2:2),ye=t.coordsAtPos(E,E==k.from?2:-2);!J||!ye||(R=Math.min(J.top,ye.top,R),N=Math.max(J.bottom,ye.bottom,N),te==De.LTR?I.push(s&&P?f:J.left,s&&H?h:ye.right):I.push(!s&&H?f:ye.left,!s&&P?h:J.right))}let L=b??k.from,V=O??k.to;for(let q of t.visibleRanges)if(q.to>L&&q.from<V)for(let P=Math.max(q.from,L),E=Math.min(q.to,V);;){let H=t.state.doc.lineAt(P);for(let te of t.bidiSpans(H)){let J=te.from+H.from,ye=te.to+H.from;if(J>=E)break;ye>P&&$(Math.max(J,P),b==null&&J<=L,Math.min(ye,E),O==null&&ye>=V,te.dir)}if(P=H.to+1,P>=E)break}return I.length==0&&$(L,b==null,V,O==null,t.textDirection),{top:R,bottom:N,horizontal:I}}function S(b,O){let k=l.top+(O?b.top:b.bottom);return{top:k,bottom:k,horizontal:[]}}}function SR(t,e){return t.constructor==e.constructor&&t.eq(e)}class OR{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(Ol)!=e.state.facet(Ol)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(Ol);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!SR(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[i].constructor&&r.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Ol=U.define();function lb(t){return[Ve.define(e=>new OR(e,t)),Ol.of(t)]}const ab=!Q.ios,Ks=U.define({combine(t){return Fn(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function kR(t={}){return[Ks.of(t),CR,AR,TR,Iy.of(!0)]}function cb(t){return t.startState.facet(Ks)!=t.state.facet(Ks)}const CR=lb({above:!0,markers(t){let{state:e}=t,n=e.facet(Ks),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty?!s||ab:n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=r.empty?r:D.cursor(r.head,r.head>r.anchor?-1:1);for(let a of ko.forRange(t,o,l))i.push(a)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=cb(t);return n&&Vp(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){Vp(e.state,t)},class:"cm-cursorLayer"});function Vp(t,e){e.style.animationDuration=t.facet(Ks).cursorBlinkRate+"ms"}const AR=lb({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:ko.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||cb(t)},class:"cm-selectionLayer"}),Nu={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};ab&&(Nu[".cm-line"].caretColor=Nu[".cm-content"].caretColor="transparent !important");const TR=ir.highest(z.theme(Nu)),ub=le.define({map(t,e){return t==null?null:e.mapPos(t)}}),Ss=ct.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,i)=>i.is(ub)?i.value:n,t)}}),ER=Ve.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(Ss);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Ss)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(Ss),n=e!=null&&t.coordsAtPos(e);if(!n)return null;let i=t.scrollDOM.getBoundingClientRect();return{left:n.left-i.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-i.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Ss)!=t&&this.view.dispatch({effects:ub.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function PR(){return[Ss,ER]}function Hp(t,e,n,i,r){e.lastIndex=0;for(let s=t.iterRange(n,i),o=n,l;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;l=e.exec(s.value);)r(o+l.index,l)}function MR(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class RR{constructor(e){const{regexp:n,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(l,a,c,u)=>r(u,c,c+l[0].length,l,a);else if(typeof i=="function")this.addMatch=(l,a,c,u)=>{let f=i(l,a,c);f&&u(c,c+l[0].length,f)};else if(i)this.addMatch=(l,a,c,u)=>u(c,c+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new mi,i=n.add.bind(n);for(let{from:r,to:s}of MR(e,this.maxLength))Hp(e.state.doc,this.regexp,r,s,(o,l)=>this.addMatch(l,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,l,a)=>{a>e.view.viewport.from&&l<e.view.viewport.to&&(i=Math.min(l,i),r=Math.max(a,r))}),e.viewportChanged||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),i,r):n}updateRange(e,n,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),l=Math.min(s.to,r);if(l>o){let a=e.state.doc.lineAt(o),c=a.to<l?e.state.doc.lineAt(l):a,u=Math.max(s.from,a.from),f=Math.min(s.to,c.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){u=o;break}for(;l<c.to;l++)if(this.boundary.test(c.text[l-c.from])){f=l;break}}let h=[],d,p=(m,y,g)=>h.push(g.range(m,y));if(a==c)for(this.regexp.lastIndex=u-a.from;(d=this.regexp.exec(a.text))&&d.index<f-a.from;)this.addMatch(d,e,d.index+a.from,p);else Hp(e.state.doc,this.regexp,u,f,(m,y)=>this.addMatch(y,e,m,p));n=n.update({filterFrom:u,filterTo:f,filter:(m,y)=>m<u||y>f,add:h})}}return n}}const Fu=/x/.unicode!=null?"gu":"g",DR=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,Fu),LR={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let hc=null;function BR(){var t;if(hc==null&&typeof document<"u"&&document.body){let e=document.body.style;hc=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return hc||!1}const kl=U.define({combine(t){let e=Fn(t,{render:null,specialChars:DR,addSpecialChars:null});return(e.replaceTabs=!BR())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Fu)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Fu)),e}});function IR(t={}){return[kl.of(t),NR()]}let Wp=null;function NR(){return Wp||(Wp=Ve.fromClass(class{constructor(t){this.view=t,this.decorations=G.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(kl)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new RR({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,s=rt(e[0],0);if(s==9){let o=r.lineAt(i),l=n.state.tabSize,a=Zr(o.text,l,i-o.from);return G.replace({widget:new VR((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=G.replace({widget:new $R(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(kl);t.startState.facet(kl)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const FR="•";function _R(t){return t>=32?FR:t==10?"␤":String.fromCharCode(9216+t)}class $R extends Jn{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=_R(this.code),i=e.state.phrase("Control character")+" "+(LR[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class VR extends Jn{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function HR(){return jR}const WR=G.line({class:"cm-activeLine"}),jR=Ve.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(WR.range(r.from)),e=r.from)}return G.set(n)}},{decorations:t=>t.decorations});class zR extends Jn{constructor(e){super(),this.content=e}toDOM(e){let n=document.createElement("span");return n.className="cm-placeholder",n.style.pointerEvents="none",n.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),typeof this.content=="string"?n.setAttribute("aria-label","placeholder "+this.content):n.setAttribute("aria-hidden","true"),n}coordsAt(e){let n=e.firstChild?$r(e.firstChild):[];if(!n.length)return null;let i=window.getComputedStyle(e.parentNode),r=xo(n[0],i.direction!="rtl"),s=parseInt(i.lineHeight);return r.bottom-r.top>s*1.5?{left:r.left,right:r.right,top:r.top,bottom:r.top+s}:r}ignoreEvent(){return!1}}function qR(t){return Ve.fromClass(class{constructor(e){this.view=e,this.placeholder=t?G.set([G.widget({widget:new zR(t),side:1}).range(0)]):G.none}get decorations(){return this.view.state.doc.length?G.none:this.placeholder}},{decorations:e=>e.decorations})}const _u=2e3;function UR(t,e,n){let i=Math.min(e.line,n.line),r=Math.max(e.line,n.line),s=[];if(e.off>_u||n.off>_u||e.col<0||n.col<0){let o=Math.min(e.off,n.off),l=Math.max(e.off,n.off);for(let a=i;a<=r;a++){let c=t.doc.line(a);c.length<=l&&s.push(D.range(c.from+o,c.to+l))}}else{let o=Math.min(e.col,n.col),l=Math.max(e.col,n.col);for(let a=i;a<=r;a++){let c=t.doc.line(a),u=pu(c.text,o,t.tabSize,!0);if(u<0)s.push(D.cursor(c.to));else{let f=pu(c.text,l,t.tabSize);s.push(D.range(c.from+u,c.from+f))}}}return s}function QR(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}function jp(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),i=t.state.doc.lineAt(n),r=n-i.from,s=r>_u?-1:r==i.length?QR(t,e.clientX):Zr(i.text,t.state.tabSize,n-i.from);return{line:i.number,col:s,off:r}}function KR(t,e){let n=jp(t,e),i=t.state.selection;return n?{update(r){if(r.docChanged){let s=r.changes.mapPos(r.startState.doc.line(n.line).from),o=r.state.doc.lineAt(s);n={line:o.number,col:n.col,off:Math.min(n.off,o.length)},i=i.map(r.changes)}},get(r,s,o){let l=jp(t,r);if(!l)return i;let a=UR(t.state,n,l);return a.length?o?D.create(a.concat(i.ranges)):D.create(a):i}}:null}function XR(t){let e=n=>n.altKey&&n.button==0;return z.mouseSelectionStyle.of((n,i)=>e(i)?KR(n,i):null)}const GR={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},YR={style:"cursor: crosshair"};function JR(t={}){let[e,n]=GR[t.key||"Alt"],i=Ve.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventObservers:{keydown(r){this.set(r.keyCode==e||n(r))},keyup(r){(r.keyCode==e||!n(r))&&this.set(!1)},mousemove(r){this.set(n(r))}}});return[i,z.contentAttributes.of(r=>{var s;return!((s=r.plugin(i))===null||s===void 0)&&s.isDown?YR:null})]}const ds="-10000px";class fb{constructor(e,n,i,r){this.facet=n,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=i(o,s))}update(e,n){var i;let r=e.state.facet(this.facet),s=r.filter(a=>a);if(r===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let o=[],l=n?[]:null;for(let a=0;a<s.length;a++){let c=s[a],u=-1;if(c){for(let f=0;f<this.tooltips.length;f++){let h=this.tooltips[f];h&&h.create==c.create&&(u=f)}if(u<0)o[a]=this.createTooltipView(c,a?o[a-1]:null),l&&(l[a]=!!c.above);else{let f=o[a]=this.tooltipViews[u];l&&(l[a]=n[u]),f.update&&f.update(e)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(this.removeTooltipView(a),(i=a.destroy)===null||i===void 0||i.call(a));return n&&(l.forEach((a,c)=>n[c]=a),n.length=l.length),this.input=r,this.tooltips=s,this.tooltipViews=o,!0}}function ZR(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const dc=U.define({combine:t=>{var e,n,i;return{position:Q.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||ZR}}}),zp=new WeakMap,th=Ve.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(dc);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new fb(t,nh,(n,i)=>this.createTooltip(n,i),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(dc);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),i=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",n.dom.appendChild(r)}return n.dom.style.position=this.position,n.dom.style.top=ds,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect(),e=1,n=1,i=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:r}=this.manager.tooltipViews[0];if(Q.gecko)i=r.offsetParent!=this.container.ownerDocument.body;else if(r.style.top==ds&&r.style.left=="0px"){let s=r.getBoundingClientRect();i=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}}if(i||this.position=="absolute")if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(e=r.width/this.parent.offsetWidth,n=r.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:n}=this.view.viewState);return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map((r,s)=>{let o=this.manager.tooltipViews[s];return o.getCoords?o.getCoords(r.pos):this.view.coordsAtPos(r.pos)}),size:this.manager.tooltipViews.map(({dom:r})=>r.getBoundingClientRect()),space:this.view.state.facet(dc).tooltipSpace(this.view),scaleX:e,scaleY:n,makeAbsolute:i}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{editor:n,space:i,scaleX:r,scaleY:s}=t,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],c=this.manager.tooltipViews[l],{dom:u}=c,f=t.pos[l],h=t.size[l];if(!f||f.bottom<=Math.max(n.top,i.top)||f.top>=Math.min(n.bottom,i.bottom)||f.right<Math.max(n.left,i.left)-.1||f.left>Math.min(n.right,i.right)+.1){u.style.top=ds;continue}let d=a.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,p=d?7:0,m=h.right-h.left,y=(e=zp.get(c))!==null&&e!==void 0?e:h.bottom-h.top,g=c.offset||tD,v=this.view.textDirection==De.LTR,x=h.width>i.right-i.left?v?i.left:i.right-h.width:v?Math.max(i.left,Math.min(f.left-(d?14:0)+g.x,i.right-m)):Math.min(Math.max(i.left,f.left-m+(d?14:0)-g.x),i.right-m),S=this.above[l];!a.strictSide&&(S?f.top-(h.bottom-h.top)-g.y<i.top:f.bottom+(h.bottom-h.top)+g.y>i.bottom)&&S==i.bottom-f.bottom>f.top-i.top&&(S=this.above[l]=!S);let b=(S?f.top-i.top:i.bottom-f.bottom)-p;if(b<y&&c.resize!==!1){if(b<this.view.defaultLineHeight){u.style.top=ds;continue}zp.set(c,y),u.style.height=(y=b)/s+"px"}else u.style.height&&(u.style.height="");let O=S?f.top-y-p-g.y:f.bottom+p+g.y,k=x+m;if(c.overlap!==!0)for(let R of o)R.left<k&&R.right>x&&R.top<O+y&&R.bottom>O&&(O=S?R.top-y-2-p:R.bottom+p+2);if(this.position=="absolute"?(u.style.top=(O-t.parent.top)/s+"px",u.style.left=(x-t.parent.left)/r+"px"):(u.style.top=O/s+"px",u.style.left=x/r+"px"),d){let R=f.left+(v?g.x:-g.x)-(x+14-7);d.style.left=R/r+"px"}c.overlap!==!0&&o.push({left:x,top:O,right:k,bottom:O+y}),u.classList.toggle("cm-tooltip-above",S),u.classList.toggle("cm-tooltip-below",!S),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=ds}},{eventObservers:{scroll(){this.maybeMeasure()}}}),eD=z.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),tD={x:0,y:0},nh=U.define({enables:[th,eD]}),zl=U.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class Ba{static create(e){return new Ba(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new fb(e,zl,(n,i)=>this.createHostedView(n,i),n=>n.dom.remove())}createHostedView(e,n){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const nD=nh.compute([zl],t=>{let e=t.facet(zl);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var i;return(i=n.end)!==null&&i!==void 0?i:n.pos})),create:Ba.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class iD{constructor(e,n,i,r,s){this.view=e,this.source=n,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,i=e.docView.nearest(n.target);if(!i)return;let r,s=1;if(i instanceof li)r=i.posAtStart;else{if(r=e.posAtCoords(n),r==null)return;let l=e.coordsAtPos(r);if(!l||n.y<l.top||n.y>l.bottom||n.x<l.left-e.defaultCharacterWidth||n.x>l.right+e.defaultCharacterWidth)return;let a=e.bidiSpans(e.state.doc.lineAt(r)).find(u=>u.from<=r&&u.to>=r),c=a&&a.dir==De.RTL?-1:1;s=n.x<l.left?-c:c}let o=this.source(e,r,s);if(o!=null&&o.then){let l=this.pending={pos:r};o.then(a=>{this.pending==l&&(this.pending=null,a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])}))},a=>Pt(e.state,a,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(th),n=e?e.manager.tooltips.findIndex(i=>i.create==Ba.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:s}=this;if(r.length&&s&&!rD(s.dom,e)||this.pending){let{pos:o}=r[0]||this.pending,l=(i=(n=r[0])===null||n===void 0?void 0:n.end)!==null&&i!==void 0?i:o;(o==l?this.view.posAtCoords(this.lastMove)!=o:!sD(this.view,o,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=i=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Jo=4;function rD(t,e){let{left:n,right:i,top:r,bottom:s}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let l=o.getBoundingClientRect();r=Math.min(l.top,r),s=Math.max(l.bottom,s)}return e.clientX>=n-Jo&&e.clientX<=i+Jo&&e.clientY>=r-Jo&&e.clientY<=s+Jo}function sD(t,e,n,i,r,s){let o=t.scrollDOM.getBoundingClientRect(),l=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>i||o.right<i||o.top>r||Math.min(o.bottom,l)<r)return!1;let a=t.posAtCoords({x:i,y:r},!1);return a>=e&&a<=n}function oD(t,e={}){let n=le.define(),i=ct.define({create(){return[]},update(r,s){if(r.length&&(e.hideOnChange&&(s.docChanged||s.selection)?r=[]:e.hideOn&&(r=r.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let l of r){let a=s.changes.mapPos(l.pos,-1,vt.TrackDel);if(a!=null){let c=Object.assign(Object.create(null),l);c.pos=a,c.end!=null&&(c.end=s.changes.mapPos(c.end)),o.push(c)}}r=o}for(let o of s.effects)o.is(n)&&(r=o.value),o.is(lD)&&(r=[]);return r},provide:r=>zl.from(r)});return{active:i,extension:[i,Ve.define(r=>new iD(r,t,i,n,e.hoverTime||300)),nD]}}function hb(t,e){let n=t.plugin(th);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const lD=le.define(),qp=U.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Xs(t,e){let n=t.plugin(db),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const db=Ve.fromClass(class{constructor(t){this.input=t.state.facet(Gs),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(qp);this.top=new Zo(t,!0,e.topContainer),this.bottom=new Zo(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(qp);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Zo(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Zo(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Gs);if(n!=this.input){let i=n.filter(a=>a),r=[],s=[],o=[],l=[];for(let a of i){let c=this.specs.indexOf(a),u;c<0?(u=a(t.view),l.push(u)):(u=this.panels[c],u.update&&u.update(t)),r.push(u),(u.top?s:o).push(u)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>z.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Zo{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=Up(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=Up(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Up(t){let e=t.nextSibling;return t.remove(),e}const Gs=U.define({enables:db});class Kn extends Gi{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Kn.prototype.elementClass="";Kn.prototype.toDOM=void 0;Kn.prototype.mapMode=vt.TrackBefore;Kn.prototype.startSide=Kn.prototype.endSide=-1;Kn.prototype.point=!0;const Cl=U.define(),aD=U.define(),cD={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>ge.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Bs=U.define();function uD(t){return[pb(),Bs.of(Object.assign(Object.assign({},cD),t))]}const Qp=U.define({combine:t=>t.some(e=>e)});function pb(t){return[fD]}const fD=Ve.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(Bs).map(e=>new Xp(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(Qp),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(Qp)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=ge.iter(this.view.state.facet(Cl),this.view.viewport.from),i=[],r=this.gutters.map(s=>new hD(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let l of s.type)if(l.type==xt.Text&&o){$u(n,i,l.from);for(let a of r)a.line(this.view,l,i);o=!1}else if(l.widget)for(let a of r)a.widget(this.view,l)}else if(s.type==xt.Text){$u(n,i,s.from);for(let o of r)o.line(this.view,s,i)}else if(s.widget)for(let o of r)o.widget(this.view,s);for(let s of r)s.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(Bs),n=t.state.facet(Bs),i=t.docChanged||t.heightChanged||t.viewportChanged||!ge.eq(t.startState.facet(Cl),t.state.facet(Cl),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(t)&&(i=!0);else{i=!0;let r=[];for(let s of n){let o=e.indexOf(s);o<0?r.push(new Xp(this.view,s)):(this.gutters[o].update(t),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>z.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==De.LTR?{left:n.dom.offsetWidth*e.scaleX}:{right:n.dom.offsetWidth*e.scaleX}})});function Kp(t){return Array.isArray(t)?t:[t]}function $u(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class hD{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=ge.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:r}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==r.elements.length){let l=new mb(e,o,s,i);r.elements.push(l),r.dom.appendChild(l.dom)}else r.elements[this.i].update(e,o,s,i);this.height=n.bottom,this.i++}line(e,n,i){let r=[];$u(this.cursor,r,n.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n),r=i?[i]:null;for(let s of e.state.facet(aD)){let o=s(e,n.widget,n);o&&(r||(r=[])).push(o)}r&&this.addElement(e,n,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class Xp{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let a=s.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=r.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,l,r)&&r.preventDefault()});this.markers=Kp(n.markers(e)),n.initialSpacer&&(this.spacer=new mb(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=Kp(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!ge.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class mb{constructor(e,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,r)}update(e,n,i,r){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),dD(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let l=o,a=s<n.length?n[s++]:null,c=!1;if(a){let u=a.elementClass;u&&(i+=" "+u);for(let f=o;f<this.markers.length;f++)if(this.markers[f].compare(a)){l=f,c=!0;break}}else l=this.markers.length;for(;o<l;){let u=this.markers[o++];if(u.toDOM){u.destroy(r);let f=r.nextSibling;r.remove(),r=f}}if(!a)break;a.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(a.toDOM(e),r)),c&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function dD(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const pD=U.define(),mD=U.define(),br=U.define({combine(t){return Fn(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let r in n){let s=i[r],o=n[r];i[r]=s?(l,a,c)=>s(l,a,c)||o(l,a,c):o}return i}})}});class pc extends Kn{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function mc(t,e){return t.state.facet(br).formatNumber(e,t.state)}const gD=Bs.compute([br],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(pD)},lineMarker(e,n,i){return i.some(r=>r.toDOM)?null:new pc(mc(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,i)=>{for(let r of e.state.facet(mD)){let s=r(e,n,i);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(br)!=e.state.facet(br),initialSpacer(e){return new pc(mc(e,Gp(e.state.doc.lines)))},updateSpacer(e,n){let i=mc(n.view,Gp(n.view.state.doc.lines));return i==e.number?e:new pc(i)},domEventHandlers:t.facet(br).domEventHandlers}));function yD(t={}){return[br.of(t),pb(),gD]}function Gp(t){let e=9;for(;e<t;)e=e*10+9;return e}const bD=new class extends Kn{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},vD=Cl.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(bD.range(r)))}return ge.of(e)});function wD(){return vD}const gb=1024;let xD=0;class gc{constructor(e,n){this.from=e,this.to=n}}class ue{constructor(e={}){this.id=xD++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=It.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}ue.closedBy=new ue({deserialize:t=>t.split(" ")});ue.openedBy=new ue({deserialize:t=>t.split(" ")});ue.group=new ue({deserialize:t=>t.split(" ")});ue.isolate=new ue({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});ue.contextHash=new ue({perNode:!0});ue.lookAhead=new ue({perNode:!0});ue.mounted=new ue({perNode:!0});class ql{constructor(e,n,i){this.tree=e,this.overlay=n,this.parser=i}static get(e){return e&&e.props&&e.props[ue.mounted.id]}}const SD=Object.create(null);class It{constructor(e,n,i,r=0){this.name=e,this.props=n,this.id=i,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):SD,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new It(e.name||"",n,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(ue.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let r of i.split(" "))n[r]=e[i];return i=>{for(let r=i.prop(ue.group),s=-1;s<(r?r.length:0);s++){let o=n[s<0?i.name:r[s]];if(o)return o}}}}It.none=new It("",Object.create(null),0,8);class ih{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}n.push(r?new It(i.name,r,i.id,i.flags):i)}return new ih(n)}}const el=new WeakMap,Yp=new WeakMap;var et;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(et||(et={}));class qe{constructor(e,n,i,r,s){if(this.type=e,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=ql.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new Hu(this.topNode,e)}cursorAt(e,n=0,i=0){let r=el.get(this)||this.topNode,s=new Hu(r);return s.moveTo(e,n),el.set(this,s._tree),s}get topNode(){return new Jt(this,0,0,null)}resolve(e,n=0){let i=Ys(el.get(this)||this.topNode,e,n,!1);return el.set(this,i),i}resolveInner(e,n=0){let i=Ys(Yp.get(this)||this.topNode,e,n,!0);return Yp.set(this,i),i}resolveStack(e,n=0){return CD(this,e,n)}iterate(e){let{enter:n,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,l=(o&et.IncludeAnonymous)>0;for(let a=this.cursor(o|et.IncludeAnonymous);;){let c=!1;if(a.from<=s&&a.to>=r&&(!l&&a.type.isAnonymous||n(a)!==!1)){if(a.firstChild())continue;c=!0}for(;c&&i&&(l||!a.type.isAnonymous)&&i(a),!a.nextSibling();){if(!a.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:oh(It.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new qe(this.type,n,i,r,this.propValues),e.makeTree||((n,i,r)=>new qe(It.none,n,i,r)))}static build(e){return AD(e)}}qe.empty=new qe(It.none,[],[],0);class rh{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new rh(this.buffer,this.index)}}class vi{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return It.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,i,r,s){let{buffer:o}=this,l=-1;for(let a=e;a!=n&&!(yb(s,r,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,n,i){let r=this.buffer,s=new Uint16Array(n-e),o=0;for(let l=e,a=0;l<n;){s[a++]=r[l++],s[a++]=r[l++]-i;let c=s[a++]=r[l++]-i;s[a++]=r[l++]-e,o=Math.max(o,c)}return new vi(s,o,this.set)}}function yb(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function Ys(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof Jt&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=i?0:et.IgnoreOverlays;if(i)for(let o=t,l=o.parent;l;o=l,l=o.parent)o instanceof Jt&&o.index<0&&((r=l.enter(e,n,s))===null||r===void 0?void 0:r.from)!=o.from&&(t=l);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class bb{cursor(e=0){return new Hu(this,e)}getChild(e,n=null,i=null){let r=Jp(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return Jp(this,e,n,i)}resolve(e,n=0){return Ys(this,e,n,!1)}resolveInner(e,n=0){return Ys(this,e,n,!0)}matchContext(e){return Vu(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),i=this;for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(i=n,n=r.prevSibling):n=r}return i}get node(){return this}get next(){return this.parent}}class Jt extends bb{constructor(e,n,i,r){super(),this._tree=e,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,r,s=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,c=n>0?l.length:-1;e!=c;e+=n){let u=l[e],f=a[e]+o.from;if(yb(r,i,f,f+u.length)){if(u instanceof vi){if(s&et.ExcludeBuffers)continue;let h=u.findChild(0,u.buffer.length,n,i-f,r);if(h>-1)return new ci(new OD(o,u,e,f),null,h)}else if(s&et.IncludeAnonymous||!u.type.isAnonymous||sh(u)){let h;if(!(s&et.IgnoreMounts)&&(h=ql.get(u))&&!h.overlay)return new Jt(h.tree,f,e,o);let d=new Jt(u,f,e,o);return s&et.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(n<0?u.children.length-1:0,n,i,r)}}}if(s&et.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let r;if(!(i&et.IgnoreOverlays)&&(r=ql.get(this._tree))&&r.overlay){let s=e-this.from;for(let{from:o,to:l}of r.overlay)if((n>0?o<=s:o<s)&&(n<0?l>=s:l>s))return new Jt(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Jp(t,e,n,i){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function Vu(t,e,n=e.length-1){for(let i=t;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class OD{constructor(e,n,i,r){this.parent=e,this.buffer=n,this.index=i,this.start=r}}class ci extends bb{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){super(),this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return s<0?null:new ci(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&et.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new ci(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ci(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new ci(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),n.push(0)}return new qe(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function vb(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let i=n instanceof Jt&&n.index<0?null:n.parent,r=t.slice();return i?r[e]=i:r.splice(e,1),new kD(r,n)}class kD{constructor(e,n){this.heads=e,this.node=n}get next(){return vb(this.heads)}}function CD(t,e,n){let i=t.resolveInner(e,n),r=null;for(let s=i instanceof Jt?i:i.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(r||(r=[i])).push(o.resolve(e,n)),s=o}else{let o=ql.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new Jt(o.tree,o.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(Ys(l,e,n,!1))}}return r?vb(r):i}class Hu{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Jt)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof Jt?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&et.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&et.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&et.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let l=i._tree.children[s];if(this.mode&et.IncludeAnonymous||l instanceof vi||!l.type.isAnonymous||sh(l))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;n=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new ci(this.buffer,n,this.stack[r]);return this.bufferNode=new ci(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&n&&n(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return Vu(this.node.parent,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return Vu(this._tree,e,r);let o=i[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function sh(t){return t.children.some(e=>e instanceof vi||!e.type.isAnonymous||sh(e))}function AD(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=gb,reused:s=[],minRepeatType:o=i.types.length}=t,l=Array.isArray(n)?new rh(n,n.length):n,a=i.types,c=0,u=0;function f(b,O,k,R,N,I){let{id:$,start:L,end:V,size:q}=l,P=u,E=c;for(;q<0;)if(l.next(),q==-1){let Ne=s[$];k.push(Ne),R.push(L-b);return}else if(q==-3){c=$;return}else if(q==-4){u=$;return}else throw new RangeError(`Unrecognized record size: ${q}`);let H=a[$],te,J,ye=L-b;if(V-L<=r&&(J=y(l.pos-O,N))){let Ne=new Uint16Array(J.size-J.skip),we=l.pos-J.size,fe=Ne.length;for(;l.pos>we;)fe=g(J.start,Ne,fe);te=new vi(Ne,V-J.start,i),ye=J.start-b}else{let Ne=l.pos-q;l.next();let we=[],fe=[],He=$>=o?$:-1,_e=0,ut=V;for(;l.pos>Ne;)He>=0&&l.id==He&&l.size>=0?(l.end<=ut-r&&(p(we,fe,L,_e,l.end,ut,He,P,E),_e=we.length,ut=l.end),l.next()):I>2500?h(L,Ne,we,fe):f(L,Ne,we,fe,He,I+1);if(He>=0&&_e>0&&_e<we.length&&p(we,fe,L,_e,L,ut,He,P,E),we.reverse(),fe.reverse(),He>-1&&_e>0){let xe=d(H,E);te=oh(H,we,fe,0,we.length,0,V-L,xe,xe)}else te=m(H,we,fe,V-L,P-V,E)}k.push(te),R.push(ye)}function h(b,O,k,R){let N=[],I=0,$=-1;for(;l.pos>O;){let{id:L,start:V,end:q,size:P}=l;if(P>4)l.next();else{if($>-1&&V<$)break;$<0&&($=q-r),N.push(L,V,q),I++,l.next()}}if(I){let L=new Uint16Array(I*4),V=N[N.length-2];for(let q=N.length-3,P=0;q>=0;q-=3)L[P++]=N[q],L[P++]=N[q+1]-V,L[P++]=N[q+2]-V,L[P++]=P;k.push(new vi(L,N[2]-V,i)),R.push(V-b)}}function d(b,O){return(k,R,N)=>{let I=0,$=k.length-1,L,V;if($>=0&&(L=k[$])instanceof qe){if(!$&&L.type==b&&L.length==N)return L;(V=L.prop(ue.lookAhead))&&(I=R[$]+L.length+V)}return m(b,k,R,N,I,O)}}function p(b,O,k,R,N,I,$,L,V){let q=[],P=[];for(;b.length>R;)q.push(b.pop()),P.push(O.pop()+k-N);b.push(m(i.types[$],q,P,I-N,L-I,V)),O.push(N-k)}function m(b,O,k,R,N,I,$){if(I){let L=[ue.contextHash,I];$=$?[L].concat($):[L]}if(N>25){let L=[ue.lookAhead,N];$=$?[L].concat($):[L]}return new qe(b,O,k,R,$)}function y(b,O){let k=l.fork(),R=0,N=0,I=0,$=k.end-r,L={size:0,start:0,skip:0};e:for(let V=k.pos-b;k.pos>V;){let q=k.size;if(k.id==O&&q>=0){L.size=R,L.start=N,L.skip=I,I+=4,R+=4,k.next();continue}let P=k.pos-q;if(q<0||P<V||k.start<$)break;let E=k.id>=o?4:0,H=k.start;for(k.next();k.pos>P;){if(k.size<0)if(k.size==-3)E+=4;else break e;else k.id>=o&&(E+=4);k.next()}N=H,R+=q,I+=E}return(O<0||R==b)&&(L.size=R,L.start=N,L.skip=I),L.size>4?L:void 0}function g(b,O,k){let{id:R,start:N,end:I,size:$}=l;if(l.next(),$>=0&&R<o){let L=k;if($>4){let V=l.pos-($-4);for(;l.pos>V;)k=g(b,O,k)}O[--k]=L,O[--k]=I-b,O[--k]=N-b,O[--k]=R}else $==-3?c=R:$==-4&&(u=R);return k}let v=[],x=[];for(;l.pos>0;)f(t.start||0,t.bufferStart||0,v,x,-1,0);let S=(e=t.length)!==null&&e!==void 0?e:v.length?x[0]+v[0].length:0;return new qe(a[t.topID],v.reverse(),x.reverse(),S)}const Zp=new WeakMap;function Al(t,e){if(!t.isAnonymous||e instanceof vi||e.type!=t)return 1;let n=Zp.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof qe)){n=1;break}n+=Al(t,i)}Zp.set(e,n)}return n}function oh(t,e,n,i,r,s,o,l,a){let c=0;for(let p=i;p<r;p++)c+=Al(t,e[p]);let u=Math.ceil(c*1.5/8),f=[],h=[];function d(p,m,y,g,v){for(let x=y;x<g;){let S=x,b=m[x],O=Al(t,p[x]);for(x++;x<g;x++){let k=Al(t,p[x]);if(O+k>=u)break;O+=k}if(x==S+1){if(O>u){let k=p[S];d(k.children,k.positions,0,k.children.length,m[S]+v);continue}f.push(p[S])}else{let k=m[x-1]+p[x-1].length-b;f.push(oh(t,p,m,S,x,b,k,null,a))}h.push(b+v-s)}}return d(e,n,i,r,0),(l||a)(f,h,o)}class zi{constructor(e,n,i,r,s=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let r=[new zi(0,e.length,e,0,!1,i)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,i=128){if(!n.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let l=0,a=0,c=0;;l++){let u=l<n.length?n[l]:null,f=u?u.fromA:1e9;if(f-a>=i)for(;o&&o.from<f;){let h=o;if(a>=h.from||f<=h.to||c){let d=Math.max(h.from,a)-c,p=Math.min(h.to,f)-c;h=d>=p?null:new zi(d,p,h.tree,h.offset+c,l>0,!!u)}if(h&&r.push(h),o.to>f)break;o=s<e.length?e[s++]:null}if(!u)break;a=u.toA,c=u.toA-u.toB}return r}}class wb{startParse(e,n,i){return typeof e=="string"&&(e=new TD(e)),i=i?i.length?i.map(r=>new gc(r.from,r.to)):[new gc(0,0)]:[new gc(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let r=this.startParse(e,n,i);for(;;){let s=r.advance();if(s)return s}}}class TD{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new ue({perNode:!0});let ED=0,Hn=class Wu{constructor(e,n,i,r){this.name=e,this.set=n,this.base=i,this.modified=r,this.id=ED++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let i=typeof e=="string"?e:"?";if(e instanceof Wu&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let r=new Wu(i,[],null,[]);if(r.set.push(r),n)for(let s of n.set)r.set.push(s);return r}static defineModifier(e){let n=new Ul(e);return i=>i.modified.indexOf(n)>-1?i:Ul.get(i.base||i,i.modified.concat(n).sort((r,s)=>r.id-s.id))}},PD=0;class Ul{constructor(e){this.name=e,this.instances=[],this.id=PD++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(l=>l.base==e&&MD(n,l.modified));if(i)return i;let r=[],s=new Hn(e.name,r,e,n);for(let l of n)l.instances.push(s);let o=RD(n);for(let l of e.set)if(!l.modified.length)for(let a of o)r.push(Ul.get(l,a));return s}}function MD(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function RD(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function lh(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],o=2,l=r;for(let f=0;;){if(l=="..."&&f>0&&f+3==r.length){o=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!h)throw new RangeError("Invalid path: "+r);if(s.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),f+=h[0].length,f==r.length)break;let d=r[f++];if(f==r.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+r);l=r.slice(f)}let a=s.length-1,c=s[a];if(!c)throw new RangeError("Invalid path: "+r);let u=new Ql(i,o,a>0?s.slice(0,a):null);e[c]=u.sort(e[c])}}return xb.add(e)}const xb=new ue;class Ql{constructor(e,n,i,r){this.tags=e,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Ql.empty=new Ql([],2,null);function Sb(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let l of s)for(let a of l.set){let c=n[a.id];if(c){o=o?o+" "+c:c;break}}return o},scope:i}}function DD(t,e){let n=null;for(let i of t){let r=i.style(e);r&&(n=n?n+" "+r:r)}return n}function LD(t,e,n,i=0,r=t.length){let s=new BD(i,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),i,r,"",s.highlighters),s.flush(r)}class BD{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,r,s){let{type:o,from:l,to:a}=e;if(l>=i||a<=n)return;o.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(o)));let c=r,u=ID(e)||Ql.empty,f=DD(s,u.tags);if(f&&(c&&(c+=" "),c+=f,u.mode==1&&(r+=(r?" ":"")+f)),this.startSpan(Math.max(n,l),c),u.opaque)return;let h=e.tree&&e.tree.prop(ue.mounted);if(h&&h.overlay){let d=e.node.enter(h.overlay[0].from+l,1),p=this.highlighters.filter(y=>!y.scope||y.scope(h.tree.type)),m=e.firstChild();for(let y=0,g=l;;y++){let v=y<h.overlay.length?h.overlay[y]:null,x=v?v.from+l:a,S=Math.max(n,g),b=Math.min(i,x);if(S<b&&m)for(;e.from<b&&(this.highlightRange(e,S,b,r,s),this.startSpan(Math.min(b,e.to),c),!(e.to>=x||!e.nextSibling())););if(!v||x>i)break;g=v.to+l,g>n&&(this.highlightRange(d.cursor(),Math.max(n,v.from+l),Math.min(i,g),"",p),this.startSpan(Math.min(i,g),c))}m&&e.parent()}else if(e.firstChild()){h&&(r="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,r,s),this.startSpan(Math.min(i,e.to),c)}while(e.nextSibling());e.parent()}}}function ID(t){let e=t.type.prop(xb);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const _=Hn.define,tl=_(),ti=_(),em=_(ti),tm=_(ti),ni=_(),nl=_(ni),yc=_(ni),Sn=_(),Ei=_(Sn),wn=_(),xn=_(),ju=_(),ps=_(ju),il=_(),C={comment:tl,lineComment:_(tl),blockComment:_(tl),docComment:_(tl),name:ti,variableName:_(ti),typeName:em,tagName:_(em),propertyName:tm,attributeName:_(tm),className:_(ti),labelName:_(ti),namespace:_(ti),macroName:_(ti),literal:ni,string:nl,docString:_(nl),character:_(nl),attributeValue:_(nl),number:yc,integer:_(yc),float:_(yc),bool:_(ni),regexp:_(ni),escape:_(ni),color:_(ni),url:_(ni),keyword:wn,self:_(wn),null:_(wn),atom:_(wn),unit:_(wn),modifier:_(wn),operatorKeyword:_(wn),controlKeyword:_(wn),definitionKeyword:_(wn),moduleKeyword:_(wn),operator:xn,derefOperator:_(xn),arithmeticOperator:_(xn),logicOperator:_(xn),bitwiseOperator:_(xn),compareOperator:_(xn),updateOperator:_(xn),definitionOperator:_(xn),typeOperator:_(xn),controlOperator:_(xn),punctuation:ju,separator:_(ju),bracket:ps,angleBracket:_(ps),squareBracket:_(ps),paren:_(ps),brace:_(ps),content:Sn,heading:Ei,heading1:_(Ei),heading2:_(Ei),heading3:_(Ei),heading4:_(Ei),heading5:_(Ei),heading6:_(Ei),contentSeparator:_(Sn),list:_(Sn),quote:_(Sn),emphasis:_(Sn),strong:_(Sn),link:_(Sn),monospace:_(Sn),strikethrough:_(Sn),inserted:_(),deleted:_(),changed:_(),invalid:_(),meta:il,documentMeta:_(il),annotation:_(il),processingInstruction:_(il),definition:Hn.defineModifier("definition"),constant:Hn.defineModifier("constant"),function:Hn.defineModifier("function"),standard:Hn.defineModifier("standard"),local:Hn.defineModifier("local"),special:Hn.defineModifier("special")};for(let t in C){let e=C[t];e instanceof Hn&&(e.name=t)}Sb([{tag:C.link,class:"tok-link"},{tag:C.heading,class:"tok-heading"},{tag:C.emphasis,class:"tok-emphasis"},{tag:C.strong,class:"tok-strong"},{tag:C.keyword,class:"tok-keyword"},{tag:C.atom,class:"tok-atom"},{tag:C.bool,class:"tok-bool"},{tag:C.url,class:"tok-url"},{tag:C.labelName,class:"tok-labelName"},{tag:C.inserted,class:"tok-inserted"},{tag:C.deleted,class:"tok-deleted"},{tag:C.literal,class:"tok-literal"},{tag:C.string,class:"tok-string"},{tag:C.number,class:"tok-number"},{tag:[C.regexp,C.escape,C.special(C.string)],class:"tok-string2"},{tag:C.variableName,class:"tok-variableName"},{tag:C.local(C.variableName),class:"tok-variableName tok-local"},{tag:C.definition(C.variableName),class:"tok-variableName tok-definition"},{tag:C.special(C.variableName),class:"tok-variableName2"},{tag:C.definition(C.propertyName),class:"tok-propertyName tok-definition"},{tag:C.typeName,class:"tok-typeName"},{tag:C.namespace,class:"tok-namespace"},{tag:C.className,class:"tok-className"},{tag:C.macroName,class:"tok-macroName"},{tag:C.propertyName,class:"tok-propertyName"},{tag:C.operator,class:"tok-operator"},{tag:C.comment,class:"tok-comment"},{tag:C.meta,class:"tok-meta"},{tag:C.invalid,class:"tok-invalid"},{tag:C.punctuation,class:"tok-punctuation"}]);var bc;const vr=new ue;function ND(t){return U.define({combine:t?e=>e.concat(t):void 0})}const FD=new ue;class cn{constructor(e,n,i=[],r=""){this.data=e,this.name=r,de.prototype.hasOwnProperty("tree")||Object.defineProperty(de.prototype,"tree",{get(){return dt(this)}}),this.parser=n,this.extension=[wi.of(this),de.languageData.of((s,o,l)=>{let a=nm(s,o,l),c=a.type.prop(vr);if(!c)return[];let u=s.facet(c),f=a.type.prop(FD);if(f){let h=a.resolve(o-a.from,l);for(let d of f)if(d.test(h,s)){let p=s.facet(d.facet);return d.type=="replace"?p:p.concat(u)}}return u})].concat(i)}isActiveAt(e,n,i=-1){return nm(e,n,i).type.prop(vr)==this.data}findRegions(e){let n=e.facet(wi);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(vr)==this.data){i.push({from:o,to:o+s.length});return}let l=s.prop(ue.mounted);if(l){if(l.tree.prop(vr)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+s.length});return}else if(l.overlay){let a=i.length;if(r(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<s.children.length;a++){let c=s.children[a];c instanceof qe&&r(c,s.positions[a]+o)}};return r(dt(e),0),i}get allowsNesting(){return!0}}cn.setState=le.define();function nm(t,e,n){let i=t.facet(wi),r=dt(t).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,n,et.ExcludeBuffers))s.type.isTop&&(r=s);return r}class Js extends cn{constructor(e,n,i){super(e,n,[],i),this.parser=n}static define(e){let n=ND(e.languageData);return new Js(n,e.parser.configure({props:[vr.add(i=>i.isTop?n:void 0)]}),e.name)}configure(e,n){return new Js(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function dt(t){let e=t.field(cn.state,!1);return e?e.tree:qe.empty}class _D{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let ms=null;class Kl{constructor(e,n,i=[],r,s,o,l,a){this.parser=e,this.state=n,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new Kl(e,n,[],qe.empty,0,i,[],null)}startParse(){return this.parser.startParse(new _D(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=qe.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(zi.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(zi.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=ms;ms=this;try{return e()}finally{ms=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=im(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((c,u,f,h)=>a.push({fromA:c,toA:u,fromB:f,toB:h})),i=zi.applyChanges(i,a),r=qe.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),f=e.mapPos(c.to,-1);u<f&&l.push({from:u,to:f})}}}return new Kl(this.parser,n,i,r,s,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=im(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends wb{createParse(n,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let a=ms;if(a){for(let c of r)a.tempSkipped.push(c);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new qe(It.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return ms}}function im(t,e,n){return zi.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class jr{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new jr(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=Kl.create(e.facet(wi).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new jr(i)}}cn.state=ct.define({create:jr.init,update(t,e){for(let n of e.effects)if(n.is(cn.setState))return n.value;return e.startState.facet(wi)!=e.state.facet(wi)?jr.init(e.state):t.apply(e)}});let Ob=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Ob=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const vc=typeof navigator<"u"&&(!((bc=navigator.scheduling)===null||bc===void 0)&&bc.isInputPending)?()=>navigator.scheduling.isInputPending():null,$D=Ve.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(cn.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(cn.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=Ob(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(cn.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!vc?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<r&&i.doc.length>r+1e3,a=s.context.work(()=>vc&&vc()||Date.now()>o,r+(l?0:1e5));this.chunkBudget-=Date.now()-n,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:cn.setState.of(new jr(s.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Pt(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),wi=U.define({combine(t){return t.length?t[0]:null},enables:t=>[cn.state,$D,z.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class VD{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const HD=U.define(),Ia=U.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Xl(t){let e=t.facet(Ia);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Zs(t,e){let n="",i=t.tabSize,r=t.facet(Ia)[0];if(r=="	"){for(;e>=i;)n+="	",e-=i;r=" "}for(let s=0;s<e;s++)n+=r;return n}function ah(t,e){t instanceof de&&(t=new Na(t));for(let i of t.state.facet(HD)){let r=i(t,e);if(r!==void 0)return r}let n=dt(t.state);return n.length>=e?WD(t,n,e):null}class Na{constructor(e,n={}){this.state=e,this.options=n,this.unit=Xl(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,n);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,n=e.length){return Zr(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const kb=new ue;function WD(t,e,n){let i=e.resolveStack(n),r=i.node.enterUnfinishedNodesBefore(n);if(r!=i.node){let s=[];for(let o=r;o!=i.node;o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)i={node:s[o],next:i}}return Cb(i,t,n)}function Cb(t,e,n){for(let i=t;i;i=i.next){let r=zD(i.node);if(r)return r(ch.create(e,n,i))}return 0}function jD(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function zD(t){let e=t.type.prop(kb);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(ue.closedBy))){let r=t.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>Ab(o,!0,1,void 0,s&&!jD(o)?r.from:void 0)}return t.parent==null?qD:null}function qD(){return 0}class ch extends Na{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.context=i}get node(){return this.context.node}static create(e,n,i){return new ch(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(UD(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){return Cb(this.context.next,this.base,this.pos)}}function UD(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function QD(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let l=n.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped){if(a.from>=o)return null;let c=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+c}}l=a.to}}function rm({closing:t,align:e=!0,units:n=1}){return i=>Ab(i,e,n,t)}function Ab(t,e,n,i,r){let s=t.textAfter,o=s.match(/^\s*/)[0].length,l=i&&s.slice(o,o+i.length)==i||r==t.pos+o,a=e?QD(t):null;return a?l?t.column(a.from):t.column(a.to):t.baseIndent+(l?0:t.unit*n)}const KD=200;function XD(){return de.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:i}=t.newSelection.main,r=n.lineAt(i);if(i>r.from+KD)return t;let s=n.sliceString(r.from,i);if(!e.some(c=>c.test(s)))return t;let{state:o}=t,l=-1,a=[];for(let{head:c}of o.selection.ranges){let u=o.doc.lineAt(c);if(u.from==l)continue;l=u.from;let f=ah(o,u.from);if(f==null)continue;let h=/^\s*/.exec(u.text)[0],d=Zs(o,f);h!=d&&a.push({from:u.from,to:u.from+h.length,insert:d})}return a.length?[t,{changes:a,sequential:!0}]:t})}const GD=U.define(),Tb=new ue;function YD(t){let e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}function JD(t,e,n){let i=dt(t);if(i.length<n)return null;let r=i.resolveStack(n,1),s=null;for(let o=r;o;o=o.next){let l=o.node;if(l.to<=n||l.from>n)continue;if(s&&l.from<e)break;let a=l.type.prop(Tb);if(a&&(l.to<i.length-50||i.length==t.doc.length||!ZD(l))){let c=a(l,t);c&&c.from<=n&&c.from>=e&&c.to>n&&(s=c)}}return s}function ZD(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function Gl(t,e,n){for(let i of t.facet(GD)){let r=i(t,e,n);if(r)return r}return JD(t,e,n)}function Eb(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const Fa=le.define({map:Eb}),Co=le.define({map:Eb});function Pb(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const er=ct.define({create(){return G.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)if(n.is(Fa)&&!eL(t,n.value.from,n.value.to)){let{preparePlaceholder:i}=e.state.facet(Db),r=i?G.replace({widget:new lL(i(e.state,n.value))}):sm;t=t.update({add:[r.range(n.value.from,n.value.to)]})}else n.is(Co)&&(t=t.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:i}=e.selection.main;t.between(i,i,(r,s)=>{r<i&&s>i&&(n=!0)}),n&&(t=t.update({filterFrom:i,filterTo:i,filter:(r,s)=>s<=i||r>=i}))}return t},provide:t=>z.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(sm.range(i,r))}return G.set(e,!0)}});function Yl(t,e,n){var i;let r=null;return(i=t.field(er,!1))===null||i===void 0||i.between(e,n,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function eL(t,e,n){let i=!1;return t.between(e,e,(r,s)=>{r==e&&s==n&&(i=!0)}),i}function Mb(t,e){return t.field(er,!1)?e:e.concat(le.appendConfig.of(Lb()))}const tL=t=>{for(let e of Pb(t)){let n=Gl(t.state,e.from,e.to);if(n)return t.dispatch({effects:Mb(t.state,[Fa.of(n),Rb(t,n)])}),!0}return!1},nL=t=>{if(!t.state.field(er,!1))return!1;let e=[];for(let n of Pb(t)){let i=Yl(t.state,n.from,n.to);i&&e.push(Co.of(i),Rb(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function Rb(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return z.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const iL=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),s=Gl(e,r.from,r.to);s&&n.push(Fa.of(s)),i=(s?t.lineBlockAt(s.to):r).to+1}return n.length&&t.dispatch({effects:Mb(t.state,n)}),!!n.length},rL=t=>{let e=t.state.field(er,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,r)=>{n.push(Co.of({from:i,to:r}))}),t.dispatch({effects:n}),!0},sL=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:tL},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:nL},{key:"Ctrl-Alt-[",run:iL},{key:"Ctrl-Alt-]",run:rL}],oL={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},Db=U.define({combine(t){return Fn(t,oL)}});function Lb(t){return[er,uL]}function Bb(t,e){let{state:n}=t,i=n.facet(Db),r=o=>{let l=t.lineBlockAt(t.posAtDOM(o.target)),a=Yl(t.state,l.from,l.to);a&&t.dispatch({effects:Co.of(a)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,r,e);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const sm=G.replace({widget:new class extends Jn{toDOM(t){return Bb(t,null)}}});class lL extends Jn{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Bb(e,this.value)}}const aL={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class wc extends Kn{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function cL(t={}){let e=Object.assign(Object.assign({},aL),t),n=new wc(e,!0),i=new wc(e,!1),r=Ve.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(wi)!=o.state.facet(wi)||o.startState.field(er,!1)!=o.state.field(er,!1)||dt(o.startState)!=dt(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new mi;for(let a of o.viewportLineBlocks){let c=Yl(o.state,a.from,a.to)?i:Gl(o.state,a.from,a.to)?n:null;c&&l.add(a.from,a.from,c)}return l.finish()}}),{domEventHandlers:s}=e;return[r,uD({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(r))===null||l===void 0?void 0:l.markers)||ge.empty},initialSpacer(){return new wc(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(o,l,a)=>{if(s.click&&s.click(o,l,a))return!0;let c=Yl(o.state,l.from,l.to);if(c)return o.dispatch({effects:Co.of(c)}),!0;let u=Gl(o.state,l.from,l.to);return u?(o.dispatch({effects:Fa.of(u)}),!0):!1}})}),Lb()]}const uL=z.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Ao{constructor(e,n){this.specs=e;let i;function r(l){let a=gi.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,o=n.scope;this.scope=o instanceof cn?l=>l.prop(vr)==o.data:o?l=>l==o:void 0,this.style=Sb(e.map(l=>({tag:l.tag,class:l.class||r(Object.assign({},l,{tag:null}))})),{all:s}).style,this.module=i?new gi(i):null,this.themeType=n.themeType}static define(e,n){return new Ao(e,n||{})}}const zu=U.define(),Ib=U.define({combine(t){return t.length?[t[0]]:null}});function xc(t){let e=t.facet(zu);return e.length?e:t.facet(Ib)}function Nb(t,e){let n=[hL],i;return t instanceof Ao&&(t.module&&n.push(z.styleModule.of(t.module)),i=t.themeType),e!=null&&e.fallback?n.push(Ib.of(t)):i?n.push(zu.computeN([z.darkTheme],r=>r.facet(z.darkTheme)==(i=="dark")?[t]:[])):n.push(zu.of(t)),n}class fL{constructor(e){this.markCache=Object.create(null),this.tree=dt(e.state),this.decorations=this.buildDeco(e,xc(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=dt(e.state),i=xc(e.state),r=i!=xc(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!r&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return G.none;let i=new mi;for(let{from:r,to:s}of e.visibleRanges)LD(this.tree,n,(o,l,a)=>{i.add(o,l,this.markCache[a]||(this.markCache[a]=G.mark({class:a})))},r,s);return i.finish()}}const hL=ir.high(Ve.fromClass(fL,{decorations:t=>t.decorations})),dL=Ao.define([{tag:C.meta,color:"#404740"},{tag:C.link,textDecoration:"underline"},{tag:C.heading,textDecoration:"underline",fontWeight:"bold"},{tag:C.emphasis,fontStyle:"italic"},{tag:C.strong,fontWeight:"bold"},{tag:C.strikethrough,textDecoration:"line-through"},{tag:C.keyword,color:"#708"},{tag:[C.atom,C.bool,C.url,C.contentSeparator,C.labelName],color:"#219"},{tag:[C.literal,C.inserted],color:"#164"},{tag:[C.string,C.deleted],color:"#a11"},{tag:[C.regexp,C.escape,C.special(C.string)],color:"#e40"},{tag:C.definition(C.variableName),color:"#00f"},{tag:C.local(C.variableName),color:"#30a"},{tag:[C.typeName,C.namespace],color:"#085"},{tag:C.className,color:"#167"},{tag:[C.special(C.variableName),C.macroName],color:"#256"},{tag:C.definition(C.propertyName),color:"#00c"},{tag:C.comment,color:"#940"},{tag:C.invalid,color:"#f00"}]),pL=z.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Fb=1e4,_b="()[]{}",$b=U.define({combine(t){return Fn(t,{afterCursor:!0,brackets:_b,maxScanDistance:Fb,renderMatch:yL})}}),mL=G.mark({class:"cm-matchingBracket"}),gL=G.mark({class:"cm-nonmatchingBracket"});function yL(t){let e=[],n=t.matched?mL:gL;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const bL=ct.define({create(){return G.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],i=e.state.facet($b);for(let r of e.state.selection.ranges){if(!r.empty)continue;let s=An(e.state,r.head,-1,i)||r.head>0&&An(e.state,r.head-1,1,i)||i.afterCursor&&(An(e.state,r.head,1,i)||r.head<e.state.doc.length&&An(e.state,r.head+1,-1,i));s&&(n=n.concat(i.renderMatch(s,e.state)))}return G.set(n,!0)},provide:t=>z.decorations.from(t)}),vL=[bL,pL];function wL(t={}){return[$b.of(t),vL]}const xL=new ue;function qu(t,e,n){let i=t.prop(e<0?ue.openedBy:ue.closedBy);if(i)return i;if(t.name.length==1){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function Uu(t){let e=t.type.prop(xL);return e?e(t.node):t}function An(t,e,n,i={}){let r=i.maxScanDistance||Fb,s=i.brackets||_b,o=dt(t),l=o.resolveInner(e,n);for(let a=l;a;a=a.parent){let c=qu(a.type,n,s);if(c&&a.from<a.to){let u=Uu(a);if(u&&(n>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return SL(t,e,n,a,u,c,s)}}return OL(t,e,n,o,l.type,r,s)}function SL(t,e,n,i,r,s,o){let l=i.parent,a={from:r.from,to:r.to},c=0,u=l==null?void 0:l.cursor();if(u&&(n<0?u.childBefore(i.from):u.childAfter(i.to)))do if(n<0?u.to<=i.from:u.from>=i.to){if(c==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let f=Uu(u);return{start:a,end:f?{from:f.from,to:f.to}:void 0,matched:!0}}else if(qu(u.type,n,o))c++;else if(qu(u.type,-n,o)){if(c==0){let f=Uu(u);return{start:a,end:f&&f.from<f.to?{from:f.from,to:f.to}:void 0,matched:!1}}c--}}while(n<0?u.prevSibling():u.nextSibling());return{start:a,matched:!1}}function OL(t,e,n,i,r,s,o){let l=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),f=0;for(let h=0;!u.next().done&&h<=s;){let d=u.value;n<0&&(h+=d.length);let p=e+h*n;for(let m=n>0?0:d.length-1,y=n>0?d.length:-1;m!=y;m+=n){let g=o.indexOf(d[m]);if(!(g<0||i.resolveInner(p+m,1).type!=r))if(g%2==0==n>0)f++;else{if(f==1)return{start:c,end:{from:p+m,to:p+m+1},matched:g>>1==a>>1};f--}}n>0&&(h+=d.length)}return u.done?{start:c,matched:!1}:null}const kL=Object.create(null),om=[It.none],lm=[],am=Object.create(null),CL=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])CL[t]=AL(kL,e);function Sc(t,e){lm.indexOf(t)>-1||(lm.push(t),console.warn(e))}function AL(t,e){let n=[];for(let l of e.split(" ")){let a=[];for(let c of l.split(".")){let u=t[c]||C[c];u?typeof u=="function"?a.length?a=a.map(u):Sc(c,`Modifier ${c} used at start of tag`):a.length?Sc(c,`Tag ${c} used as modifier`):a=Array.isArray(u)?u:[u]:Sc(c,`Unknown highlighting tag ${c}`)}for(let c of a)n.push(c)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+n.map(l=>l.id),s=am[r];if(s)return s.id;let o=am[r]=It.define({id:om.length,name:i,props:[lh({[i]:n})]});return om.push(o),o.id}De.RTL,De.LTR;const TL=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=fh(t.state,n.from);return i.line?EL(t):i.block?ML(t):!1};function uh(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return r?(i(n.update(r)),!0):!1}}const EL=uh(LL,0),PL=uh(Vb,0),ML=uh((t,e)=>Vb(t,e,DL(e)),0);function fh(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const gs=50;function RL(t,{open:e,close:n},i,r){let s=t.sliceDoc(i-gs,i),o=t.sliceDoc(r,r+gs),l=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(o)[0].length,c=s.length-l;if(s.slice(c-e.length,c)==e&&o.slice(a,a+n.length)==n)return{open:{pos:i-l,margin:l&&1},close:{pos:r+a,margin:a&&1}};let u,f;r-i<=2*gs?u=f=t.sliceDoc(i,r):(u=t.sliceDoc(i,i+gs),f=t.sliceDoc(r-gs,r));let h=/^\s*/.exec(u)[0].length,d=/\s*$/.exec(f)[0].length,p=f.length-d-n.length;return u.slice(h,h+e.length)==e&&f.slice(p,p+n.length)==n?{open:{pos:i+h+e.length,margin:/\s/.test(u.charAt(h+e.length))?1:0},close:{pos:r-d-n.length,margin:/\s/.test(f.charAt(p-1))?1:0}}:null}function DL(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to);r.from>i.from&&r.from==n.to&&(r=n.to==i.to+1?i:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function Vb(t,e,n=e.selection.ranges){let i=n.map(s=>fh(e,s.from).block);if(!i.every(s=>s))return null;let r=n.map((s,o)=>RL(e,i[o],s.from,s.to));if(t!=2&&!r.every(s=>s))return{changes:e.changes(n.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(t!=1&&r.some(s=>s)){let s=[];for(let o=0,l;o<r.length;o++)if(l=r[o]){let a=i[o],{open:c,close:u}=l;s.push({from:c.pos-a.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+a.close.length})}return{changes:s}}return null}function LL(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of n){let l=i.length,a=1e9,c=fh(e,s).line;if(c){for(let u=s;u<=o;){let f=e.doc.lineAt(u);if(f.from>r&&(s==o||o>f.from)){r=f.from;let h=/^\s*/.exec(f.text)[0].length,d=h==f.length,p=f.text.slice(h,h+c.length)==c?h:-1;h<f.text.length&&h<a&&(a=h),i.push({line:f,comment:p,token:c,indent:h,empty:d,single:!1})}u=f.to+1}if(a<1e9)for(let u=l;u<i.length;u++)i[u].indent<i[u].line.text.length&&(i[u].indent=a);i.length==l+1&&(i[l].single=!0)}}if(t!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:l,token:a,indent:c,empty:u,single:f}of i)(f||!u)&&s.push({from:l.from+c,insert:a+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:l,token:a}of i)if(l>=0){let c=o.from+l,u=c+a.length;o.text[u-o.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}const Qu=Yn.define(),BL=Yn.define(),IL=U.define(),Hb=U.define({combine(t){return Fn(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,r)=>e(i,r)||n(i,r)})}}),Wb=ct.define({create(){return Tn.empty},update(t,e){let n=e.state.facet(Hb),i=e.annotation(Qu);if(i){let a=Mt.fromTransaction(e,i.selection),c=i.side,u=c==0?t.undone:t.done;return a?u=Jl(u,u.length,n.minDepth,a):u=qb(u,e.startState.selection),new Tn(c==0?i.rest:u,c==0?u:i.rest)}let r=e.annotation(BL);if((r=="full"||r=="before")&&(t=t.isolate()),e.annotation(Ye.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Mt.fromTransaction(e),o=e.annotation(Ye.time),l=e.annotation(Ye.userEvent);return s?t=t.addChanges(s,o,l,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,l,n.newGroupDelay)),(r=="full"||r=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Tn(t.done.map(Mt.fromJSON),t.undone.map(Mt.fromJSON))}});function NL(t={}){return[Wb,Hb.of(t),z.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?jb:e.inputType=="historyRedo"?Ku:null;return i?(e.preventDefault(),i(n)):!1}})]}function _a(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(Wb,!1);if(!r)return!1;let s=r.pop(t,n,e);return s?(i(s),!0):!1}}const jb=_a(0,!1),Ku=_a(1,!1),FL=_a(0,!0),_L=_a(1,!0);class Mt{constructor(e,n,i,r,s){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new Mt(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new Mt(e.changes&&Xe.fromJSON(e.changes),[],e.mapped&&Dn.fromJSON(e.mapped),e.startSelection&&D.fromJSON(e.startSelection),e.selectionsAfter.map(D.fromJSON))}static fromTransaction(e,n){let i=Qt;for(let r of e.startState.facet(IL)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new Mt(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,Qt)}static selection(e){return new Mt(void 0,Qt,void 0,void 0,e)}}function Jl(t,e,n,i){let r=e+1>n+20?e-n-1:0,s=t.slice(r,e);return s.push(i),s}function $L(t,e){let n=[],i=!1;return t.iterChangedRanges((r,s)=>n.push(r,s)),e.iterChangedRanges((r,s,o,l)=>{for(let a=0;a<n.length;){let c=n[a++],u=n[a++];l>=c&&o<=u&&(i=!0)}}),i}function VL(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function zb(t,e){return t.length?e.length?t.concat(e):t:e}const Qt=[],HL=200;function qb(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-HL));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),Jl(t,t.length-1,1e9,n.setSelAfter(i)))}else return[Mt.selection([e])]}function WL(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function Oc(t,e){if(!t.length)return t;let n=t.length,i=Qt;for(;n;){let r=jL(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=t.slice(0,n);return s[n-1]=r,s}else e=r.mapped,n--,i=r.selectionsAfter}return i.length?[Mt.selection(i)]:Qt}function jL(t,e,n){let i=zb(t.selectionsAfter.length?t.selectionsAfter.map(l=>l.map(e)):Qt,n);if(!t.changes)return Mt.selection(i);let r=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Mt(r,le.mapEffects(t.effects,e),o,t.startSelection.map(s),i)}const zL=/^(input\.type|delete)($|\.)/;class Tn{constructor(e,n,i=0,r=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new Tn(this.done,this.undone):this}addChanges(e,n,i,r,s){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||zL.test(i))&&(!l.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,$L(l.changes,e.changes))||i=="input.type.compose")?o=Jl(o,o.length-1,r.minDepth,new Mt(e.changes.compose(l.changes),zb(le.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,Qt)):o=Jl(o,o.length,r.minDepth,e),new Tn(o,Qt,n,i)}addSelection(e,n,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Qt;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&VL(s[s.length-1],e)?this:new Tn(qb(this.done,e),this.undone,n,i)}addMapping(e){return new Tn(Oc(this.done,e),Oc(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1],o=s.selectionsAfter[0]||n.selection;if(i&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:Qu.of({side:e,rest:WL(r),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let l=r.length==1?Qt:r.slice(0,r.length-1);return s.mapped&&(l=Oc(l,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:Qu.of({side:e,rest:l,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Tn.empty=new Tn(Qt,Qt);const qL=[{key:"Mod-z",run:jb,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Ku,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Ku,preventDefault:!0},{key:"Mod-u",run:FL,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:_L,preventDefault:!0}];function es(t,e){return D.create(t.ranges.map(e),t.mainIndex)}function _n(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function gn({state:t,dispatch:e},n){let i=es(t.selection,n);return i.eq(t.selection,!0)?!1:(e(_n(t,i)),!0)}function $a(t,e){return D.cursor(e?t.to:t.from)}function Ub(t,e){return gn(t,n=>n.empty?t.moveByChar(n,e):$a(n,e))}function mt(t){return t.textDirectionAt(t.state.selection.main.head)==De.LTR}const Qb=t=>Ub(t,!mt(t)),Kb=t=>Ub(t,mt(t));function Xb(t,e){return gn(t,n=>n.empty?t.moveByGroup(n,e):$a(n,e))}const UL=t=>Xb(t,!mt(t)),QL=t=>Xb(t,mt(t));function KL(t,e,n){if(e.type.prop(n))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function Va(t,e,n){let i=dt(t).resolveInner(e.head),r=n?ue.closedBy:ue.openedBy;for(let a=e.head;;){let c=n?i.childAfter(a):i.childBefore(a);if(!c)break;KL(t,c,r)?i=c:a=n?c.to:c.from}let s=i.type.prop(r),o,l;return s&&(o=n?An(t,i.from,1):An(t,i.to,-1))&&o.matched?l=n?o.end.to:o.end.from:l=n?i.to:i.from,D.cursor(l,n?-1:1)}const XL=t=>gn(t,e=>Va(t.state,e,!mt(t))),GL=t=>gn(t,e=>Va(t.state,e,mt(t)));function Gb(t,e){return gn(t,n=>{if(!n.empty)return $a(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const Yb=t=>Gb(t,!1),Jb=t=>Gb(t,!0);function Zb(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,r;if(e){for(let s of t.state.facet(z.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=t.scrollDOM.clientHeight-n-i}else r=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,r-5)}}function ev(t,e){let n=Zb(t),{state:i}=t,r=es(i.selection,o=>o.empty?t.moveVertically(o,e,n.height):$a(o,e));if(r.eq(i.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(i.selection.main.head),l=t.scrollDOM.getBoundingClientRect(),a=l.top+n.marginTop,c=l.bottom-n.marginBottom;o&&o.top>a&&o.bottom<c&&(s=z.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-a}))}return t.dispatch(_n(i,r),{effects:s}),!0}const cm=t=>ev(t,!1),Xu=t=>ev(t,!0);function ki(t,e,n){let i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){let s=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=D.cursor(i.from+s))}return r}const YL=t=>gn(t,e=>ki(t,e,!0)),JL=t=>gn(t,e=>ki(t,e,!1)),ZL=t=>gn(t,e=>ki(t,e,!mt(t))),eB=t=>gn(t,e=>ki(t,e,mt(t))),tB=t=>gn(t,e=>D.cursor(t.lineBlockAt(e.head).from,1)),nB=t=>gn(t,e=>D.cursor(t.lineBlockAt(e.head).to,-1));function iB(t,e,n){let i=!1,r=es(t.selection,s=>{let o=An(t,s.head,-1)||An(t,s.head,1)||s.head>0&&An(t,s.head-1,1)||s.head<t.doc.length&&An(t,s.head+1,-1);if(!o||!o.end)return s;i=!0;let l=o.start.from==s.head?o.end.to:o.end.from;return D.cursor(l)});return i?(e(_n(t,r)),!0):!1}const rB=({state:t,dispatch:e})=>iB(t,e);function rn(t,e){let n=es(t.state.selection,i=>{let r=e(i);return D.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(_n(t.state,n)),!0)}function tv(t,e){return rn(t,n=>t.moveByChar(n,e))}const nv=t=>tv(t,!mt(t)),iv=t=>tv(t,mt(t));function rv(t,e){return rn(t,n=>t.moveByGroup(n,e))}const sB=t=>rv(t,!mt(t)),oB=t=>rv(t,mt(t)),lB=t=>rn(t,e=>Va(t.state,e,!mt(t))),aB=t=>rn(t,e=>Va(t.state,e,mt(t)));function sv(t,e){return rn(t,n=>t.moveVertically(n,e))}const ov=t=>sv(t,!1),lv=t=>sv(t,!0);function av(t,e){return rn(t,n=>t.moveVertically(n,e,Zb(t).height))}const um=t=>av(t,!1),fm=t=>av(t,!0),cB=t=>rn(t,e=>ki(t,e,!0)),uB=t=>rn(t,e=>ki(t,e,!1)),fB=t=>rn(t,e=>ki(t,e,!mt(t))),hB=t=>rn(t,e=>ki(t,e,mt(t))),dB=t=>rn(t,e=>D.cursor(t.lineBlockAt(e.head).from)),pB=t=>rn(t,e=>D.cursor(t.lineBlockAt(e.head).to)),hm=({state:t,dispatch:e})=>(e(_n(t,{anchor:0})),!0),dm=({state:t,dispatch:e})=>(e(_n(t,{anchor:t.doc.length})),!0),pm=({state:t,dispatch:e})=>(e(_n(t,{anchor:t.selection.main.anchor,head:0})),!0),mm=({state:t,dispatch:e})=>(e(_n(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),mB=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),gB=({state:t,dispatch:e})=>{let n=Ha(t).map(({from:i,to:r})=>D.range(i,Math.min(r+1,t.doc.length)));return e(t.update({selection:D.create(n),userEvent:"select"})),!0},yB=({state:t,dispatch:e})=>{let n=es(t.selection,i=>{let r=dt(t),s=r.resolveStack(i.from,1);if(i.empty){let o=r.resolveStack(i.from,-1);o.node.from>=s.node.from&&o.node.to<=s.node.to&&(s=o)}for(let o=s;o;o=o.next){let{node:l}=o;if((l.from<i.from&&l.to>=i.to||l.to>i.to&&l.from<=i.from)&&o.next)return D.range(l.to,l.from)}return i});return n.eq(t.selection)?!1:(e(_n(t,n)),!0)},bB=({state:t,dispatch:e})=>{let n=t.selection,i=null;return n.ranges.length>1?i=D.create([n.main]):n.main.empty||(i=D.create([D.cursor(n.main.head)])),i?(e(_n(t,i)),!0):!1};function To(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,r=i.changeByRange(s=>{let{from:o,to:l}=s;if(o==l){let a=e(s);a<o?(n="delete.backward",a=rl(t,a,!1)):a>o&&(n="delete.forward",a=rl(t,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=rl(t,o,!1),l=rl(t,l,!0);return o==l?{range:s}:{changes:{from:o,to:l},range:D.cursor(o,o<s.head?-1:1)}});return r.changes.empty?!1:(t.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?z.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function rl(t,e,n){if(t instanceof z)for(let i of t.state.facet(z.atomicRanges).map(r=>r(t)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=n?s:r)});return e}const cv=(t,e,n)=>To(t,i=>{let r=i.from,{state:s}=t,o=s.doc.lineAt(r),l,a;if(n&&!e&&r>o.from&&r<o.from+200&&!/[^ \t]/.test(l=o.text.slice(0,r-o.from))){if(l[l.length-1]=="	")return r-1;let c=Zr(l,s.tabSize),u=c%Xl(s)||Xl(s);for(let f=0;f<u&&l[l.length-1-f]==" ";f++)r--;a=r}else a=ot(o.text,r-o.from,e,e)+o.from,a==r&&o.number!=(e?s.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(a-o.from,r-o.from))&&(a=ot(o.text,a-o.from,!1,!1)+o.from);return a}),Gu=t=>cv(t,!1,!0),uv=t=>cv(t,!0,!1),fv=(t,e)=>To(t,n=>{let i=n.head,{state:r}=t,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let l=null;;){if(i==(e?s.to:s.from)){i==n.head&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let a=ot(s.text,i-s.from,e)+s.from,c=s.text.slice(Math.min(i,a)-s.from,Math.max(i,a)-s.from),u=o(c);if(l!=null&&u!=l)break;(c!=" "||i!=n.head)&&(l=u),i=a}return i}),hv=t=>fv(t,!1),vB=t=>fv(t,!0),wB=t=>To(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),xB=t=>To(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),SB=t=>To(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),OB=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:ve.of(["",""])},range:D.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},kB=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let r=i.from,s=t.doc.lineAt(r),o=r==s.from?r-1:ot(s.text,r-s.from,!1)+s.from,l=r==s.to?r+1:ot(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:l,insert:t.doc.slice(r,l).append(t.doc.slice(o,r))},range:D.cursor(l)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Ha(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),s=t.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=t.doc.lineAt(i.to-1)),n>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return e}function dv(t,e,n){if(t.readOnly)return!1;let i=[],r=[];for(let s of Ha(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),l=o.length+1;if(n){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let a of s.ranges)r.push(D.range(Math.min(t.doc.length,a.anchor+l),Math.min(t.doc.length,a.head+l)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let a of s.ranges)r.push(D.range(a.anchor-l,a.head-l))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:D.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const CB=({state:t,dispatch:e})=>dv(t,e,!1),AB=({state:t,dispatch:e})=>dv(t,e,!0);function pv(t,e,n){if(t.readOnly)return!1;let i=[];for(let r of Ha(t))n?i.push({from:r.from,insert:t.doc.slice(r.from,r.to)+t.lineBreak}):i.push({from:r.to,insert:t.lineBreak+t.doc.slice(r.from,r.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const TB=({state:t,dispatch:e})=>pv(t,e,!1),EB=({state:t,dispatch:e})=>pv(t,e,!0),PB=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Ha(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=es(e.selection,r=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(r.head),l=t.coordsAtPos(r.head,r.assoc||1);l&&(s=o.bottom+t.documentTop-l.bottom+t.defaultLineHeight/2)}return t.moveVertically(r,!0,s)}).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function MB(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=dt(t).resolveInner(e),i=n.childBefore(e),r=n.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(ue.closedBy))&&s.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from&&!/\S/.test(t.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const gm=mv(!1),RB=mv(!0);function mv(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,l=e.doc.lineAt(s),a=!t&&s==o&&MB(e,s);t&&(s=o=(o<=l.to?l:e.doc.lineAt(o)).to);let c=new Na(e,{simulateBreak:s,simulateDoubleBreak:!!a}),u=ah(c,s);for(u==null&&(u=Zr(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:s,to:o}=a:s>l.from&&s<l.from+100&&!/\S/.test(l.text.slice(0,s))&&(s=l.from);let f=["",Zs(e,u)];return a&&f.push(Zs(e,c.lineIndent(l.from,-1))),{changes:{from:s,to:o,insert:ve.of(f)},range:D.cursor(s+1+f[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function hh(t,e){let n=-1;return t.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let l=t.doc.lineAt(o);l.number>n&&(i.empty||i.to>l.from)&&(e(l,r,i),n=l.number),o=l.to+1}let s=t.changes(r);return{changes:r,range:D.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const DB=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),i=new Na(t,{overrideIndentation:s=>{let o=n[s];return o??-1}}),r=hh(t,(s,o,l)=>{let a=ah(i,s.from);if(a==null)return;/\S/.test(s.text)||(a=0);let c=/^\s*/.exec(s.text)[0],u=Zs(t,a);(c!=u||l.from<s.from+c.length)&&(n[s.from]=a,o.push({from:s.from,to:s.from+c.length,insert:u}))});return r.changes.empty||e(t.update(r,{userEvent:"indent"})),!0},gv=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(hh(t,(n,i)=>{i.push({from:n.from,insert:t.facet(Ia)})}),{userEvent:"input.indent"})),!0),yv=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(hh(t,(n,i)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let s=Zr(r,t.tabSize),o=0,l=Zs(t,Math.max(0,s-Xl(t)));for(;o<r.length&&o<l.length&&r.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+r.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),LB=t=>(t.setTabFocusMode(),!0),BB=[{key:"Ctrl-b",run:Qb,shift:nv,preventDefault:!0},{key:"Ctrl-f",run:Kb,shift:iv},{key:"Ctrl-p",run:Yb,shift:ov},{key:"Ctrl-n",run:Jb,shift:lv},{key:"Ctrl-a",run:tB,shift:dB},{key:"Ctrl-e",run:nB,shift:pB},{key:"Ctrl-d",run:uv},{key:"Ctrl-h",run:Gu},{key:"Ctrl-k",run:wB},{key:"Ctrl-Alt-h",run:hv},{key:"Ctrl-o",run:OB},{key:"Ctrl-t",run:kB},{key:"Ctrl-v",run:Xu}],IB=[{key:"ArrowLeft",run:Qb,shift:nv,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:UL,shift:sB,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:ZL,shift:fB,preventDefault:!0},{key:"ArrowRight",run:Kb,shift:iv,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:QL,shift:oB,preventDefault:!0},{mac:"Cmd-ArrowRight",run:eB,shift:hB,preventDefault:!0},{key:"ArrowUp",run:Yb,shift:ov,preventDefault:!0},{mac:"Cmd-ArrowUp",run:hm,shift:pm},{mac:"Ctrl-ArrowUp",run:cm,shift:um},{key:"ArrowDown",run:Jb,shift:lv,preventDefault:!0},{mac:"Cmd-ArrowDown",run:dm,shift:mm},{mac:"Ctrl-ArrowDown",run:Xu,shift:fm},{key:"PageUp",run:cm,shift:um},{key:"PageDown",run:Xu,shift:fm},{key:"Home",run:JL,shift:uB,preventDefault:!0},{key:"Mod-Home",run:hm,shift:pm},{key:"End",run:YL,shift:cB,preventDefault:!0},{key:"Mod-End",run:dm,shift:mm},{key:"Enter",run:gm,shift:gm},{key:"Mod-a",run:mB},{key:"Backspace",run:Gu,shift:Gu},{key:"Delete",run:uv},{key:"Mod-Backspace",mac:"Alt-Backspace",run:hv},{key:"Mod-Delete",mac:"Alt-Delete",run:vB},{mac:"Mod-Backspace",run:xB},{mac:"Mod-Delete",run:SB}].concat(BB.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),NB=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:XL,shift:lB},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:GL,shift:aB},{key:"Alt-ArrowUp",run:CB},{key:"Shift-Alt-ArrowUp",run:TB},{key:"Alt-ArrowDown",run:AB},{key:"Shift-Alt-ArrowDown",run:EB},{key:"Escape",run:bB},{key:"Mod-Enter",run:RB},{key:"Alt-l",mac:"Ctrl-l",run:gB},{key:"Mod-i",run:yB,preventDefault:!0},{key:"Mod-[",run:yv},{key:"Mod-]",run:gv},{key:"Mod-Alt-\\",run:DB},{key:"Shift-Mod-k",run:PB},{key:"Shift-Mod-\\",run:rB},{key:"Mod-/",run:TL},{key:"Alt-A",run:PL},{key:"Ctrl-m",mac:"Shift-Alt-m",run:LB}].concat(IB),FB={key:"Tab",run:gv,shift:yv};function Ae(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?t.setAttribute(i,r):r!=null&&(t[i]=r)}e++}for(;e<arguments.length;e++)bv(t,arguments[e]);return t}function bv(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)bv(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const ym=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class zr{constructor(e,n,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?l=>s(ym(l)):ym,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return rt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=Wf(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=qt(e);let r=this.normalize(n);if(r.length)for(let s=0,o=i;;s++){let l=r.charCodeAt(s),a=this.match(l,o,this.bufferPos+this.bufferStart);if(s==r.length-1){if(a)return this.value=a,this;break}o==i&&s<n.length&&n.charCodeAt(s)==l&&o++}}}match(e,n,i){let r=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],l=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[s+1],to:i}:(this.matches[s]++,l=!0)),l||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:i}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(zr.prototype[Symbol.iterator]=function(){return this});const vv={from:-1,to:-1,match:/.*/.exec("")},dh="gm"+(/x/.unicode==null?"":"u");class wv{constructor(e,n,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=vv,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new xv(e,n,i,r,s);this.re=new RegExp(n,dh+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=Zl(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,r=i+n[0].length;if(this.matchPos=Zl(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const kc=new WeakMap;class Er{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let r=kc.get(e);if(!r||r.from>=i||r.to<=n){let l=new Er(n,e.sliceString(n,i));return kc.set(e,l),l}if(r.from==n&&r.to==i)return r;let{text:s,from:o}=r;return o>n&&(s=e.sliceString(n,o)+s,o=n),r.to<i&&(s+=e.sliceString(r.to,i)),kc.set(e,new Er(o,s)),new Er(n,s.slice(n-o,i-o))}}class xv{constructor(e,n,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=vv,this.matchPos=Zl(e,r),this.re=new RegExp(n,dh+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=Er.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,r=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this.matchPos=Zl(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Er.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(wv.prototype[Symbol.iterator]=xv.prototype[Symbol.iterator]=function(){return this});function _B(t){try{return new RegExp(t,dh),!0}catch{return!1}}function Zl(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function Yu(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=Ae("input",{class:"cm-textfield",name:"line",value:e}),i=Ae("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:ea.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),r())},onsubmit:s=>{s.preventDefault(),r()}},Ae("label",t.state.phrase("Go to line"),": ",n)," ",Ae("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function r(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,l=o.doc.lineAt(o.selection.main.head),[,a,c,u,f]=s,h=u?+u.slice(1):0,d=c?+c:l.number;if(c&&f){let y=d/100;a&&(y=y*(a=="-"?-1:1)+l.number/o.doc.lines),d=Math.round(o.doc.lines*y)}else c&&a&&(d=d*(a=="-"?-1:1)+l.number);let p=o.doc.line(Math.max(1,Math.min(o.doc.lines,d))),m=D.cursor(p.from+Math.max(0,Math.min(h,p.length)));t.dispatch({effects:[ea.of(!1),z.scrollIntoView(m.from,{y:"center"})],selection:m}),t.focus()}return{dom:i}}const ea=le.define(),bm=ct.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(ea)&&(t=n.value);return t},provide:t=>Gs.from(t,e=>e?Yu:null)}),$B=t=>{let e=Xs(t,Yu);if(!e){let n=[ea.of(!0)];t.state.field(bm,!1)==null&&n.push(le.appendConfig.of([bm,VB])),t.dispatch({effects:n}),e=Xs(t,Yu)}return e&&e.dom.querySelector("input").select(),!0},VB=z.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),HB={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},WB=U.define({combine(t){return Fn(t,HB,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function jB(t){return[KB,QB]}const zB=G.mark({class:"cm-selectionMatch"}),qB=G.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function vm(t,e,n,i){return(n==0||t(e.sliceDoc(n-1,n))!=Be.Word)&&(i==e.doc.length||t(e.sliceDoc(i,i+1))!=Be.Word)}function UB(t,e,n,i){return t(e.sliceDoc(n,n+1))==Be.Word&&t(e.sliceDoc(i-1,i))==Be.Word}const QB=Ve.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(WB),{state:n}=t,i=n.selection;if(i.ranges.length>1)return G.none;let r=i.main,s,o=null;if(r.empty){if(!e.highlightWordAroundCursor)return G.none;let a=n.wordAt(r.head);if(!a)return G.none;o=n.charCategorizer(r.head),s=n.sliceDoc(a.from,a.to)}else{let a=r.to-r.from;if(a<e.minSelectionLength||a>200)return G.none;if(e.wholeWords){if(s=n.sliceDoc(r.from,r.to),o=n.charCategorizer(r.head),!(vm(o,n,r.from,r.to)&&UB(o,n,r.from,r.to)))return G.none}else if(s=n.sliceDoc(r.from,r.to),!s)return G.none}let l=[];for(let a of t.visibleRanges){let c=new zr(n.doc,s,a.from,a.to);for(;!c.next().done;){let{from:u,to:f}=c.value;if((!o||vm(o,n,u,f))&&(r.empty&&u<=r.from&&f>=r.to?l.push(qB.range(u,f)):(u>=r.to||f<=r.from)&&l.push(zB.range(u,f)),l.length>e.maxMatches))return G.none}}return G.set(l)}},{decorations:t=>t.decorations}),KB=z.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),XB=({state:t,dispatch:e})=>{let{selection:n}=t,i=D.create(n.ranges.map(r=>t.wordAt(r.head)||D.cursor(r.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function GB(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let o=!1,l=new zr(t.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new zr(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(a=>a.from==l.value.from))continue;if(s){let a=t.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const YB=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return XB({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=i))return!1;let r=GB(t,i);return r?(e(t.update({selection:t.selection.addRange(D.range(r.from,r.to),!1),effects:z.scrollIntoView(r.to)})),!0):!1},ts=U.define({combine(t){return Fn(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new cI(e),scrollToMatch:e=>z.scrollIntoView(e)})}});class Sv{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||_B(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new tI(this):new ZB(this)}getCursor(e,n=0,i){let r=e.doc?e:de.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?dr(this,r,n,i):hr(this,r,n,i)}}class Ov{constructor(e){this.spec=e}}function hr(t,e,n,i){return new zr(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:r=>r.toLowerCase(),t.wholeWord?JB(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function JB(t,e){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=t.sliceString(s,Math.min(t.length,i+2))),(e(ta(r,n-s))!=Be.Word||e(na(r,n-s))!=Be.Word)&&(e(na(r,i-s))!=Be.Word||e(ta(r,i-s))!=Be.Word))}class ZB extends Ov{constructor(e){super(e)}nextMatch(e,n,i){let r=hr(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);r=hr(this.spec,e,0,s).nextOverlapping()}return r.done||r.value.from==n&&r.value.to==i?null:r.value}prevMatchInRange(e,n,i){for(let r=i;;){let s=Math.max(n,r-1e4-this.spec.unquoted.length),o=hr(this.spec,e,s,r),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(s==n)return null;r-=1e4}}prevMatch(e,n,i){let r=this.prevMatchInRange(e,0,n);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=n||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=hr(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=hr(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function dr(t,e,n,i){return new wv(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?eI(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function ta(t,e){return t.slice(ot(t,e,!1),e)}function na(t,e){return t.slice(e,ot(t,e))}function eI(t){return(e,n,i)=>!i[0].length||(t(ta(i.input,i.index))!=Be.Word||t(na(i.input,i.index))!=Be.Word)&&(t(na(i.input,i.index+i[0].length))!=Be.Word||t(ta(i.input,i.index+i[0].length))!=Be.Word)}class tI extends Ov{nextMatch(e,n,i){let r=dr(this.spec,e,i,e.doc.length).next();return r.done&&(r=dr(this.spec,e,0,n).next()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=1;;r++){let s=Math.max(n,i-r*1e4),o=dr(this.spec,e,s,i),l=null;for(;!o.next().done;)l=o.value;if(l&&(s==n||l.from>s+10))return l;if(s==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(n,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:n)}matchAll(e,n){let i=dr(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=dr(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const eo=le.define(),ph=le.define(),hi=ct.define({create(t){return new Cc(Ju(t).create(),null)},update(t,e){for(let n of e.effects)n.is(eo)?t=new Cc(n.value.create(),t.panel):n.is(ph)&&(t=new Cc(t.query,n.value?mh:null));return t},provide:t=>Gs.from(t,e=>e.panel)});class Cc{constructor(e,n){this.query=e,this.panel=n}}const nI=G.mark({class:"cm-searchMatch"}),iI=G.mark({class:"cm-searchMatch cm-searchMatch-selected"}),rI=Ve.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(hi))}update(t){let e=t.state.field(hi);(e!=t.startState.field(hi)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return G.none;let{view:n}=this,i=new mi;for(let r=0,s=n.visibleRanges,o=s.length;r<o;r++){let{from:l,to:a}=s[r];for(;r<o-1&&a>s[r+1].from-2*250;)a=s[++r].to;t.highlight(n.state,l,a,(c,u)=>{let f=n.state.selection.ranges.some(h=>h.from==c&&h.to==u);i.add(c,u,f?iI:nI)})}return i.finish()}},{decorations:t=>t.decorations});function Eo(t){return e=>{let n=e.state.field(hi,!1);return n&&n.query.spec.valid?t(e,n):Av(e)}}const ia=Eo((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let r=D.single(i.from,i.to),s=t.state.facet(ts);return t.dispatch({selection:r,effects:[gh(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),Cv(t),!0}),ra=Eo((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,r=e.prevMatch(n,i,i);if(!r)return!1;let s=D.single(r.from,r.to),o=t.state.facet(ts);return t.dispatch({selection:s,effects:[gh(t,r),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),Cv(t),!0}),sI=Eo((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:D.create(n.map(i=>D.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),oI=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,s=[],o=0;for(let l=new zr(t.doc,t.sliceDoc(i,r));!l.next().done;){if(s.length>1e3)return!1;l.value.from==i&&(o=s.length),s.push(D.range(l.value.from,l.value.to))}return e(t.update({selection:D.create(s,o),userEvent:"select.search.matches"})),!0},wm=Eo((t,{query:e})=>{let{state:n}=t,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,i,i);if(!s)return!1;let o=[],l,a,c=[];if(s.from==i&&s.to==r&&(a=n.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:a}),s=e.nextMatch(n,s.from,s.to),c.push(z.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+"."))),s){let u=o.length==0||o[0].from>=s.to?0:s.to-s.from-a.length;l=D.single(s.from-u,s.to-u),c.push(gh(t,s)),c.push(n.facet(ts).scrollToMatch(l.main,t))}return t.dispatch({changes:o,selection:l,effects:c,userEvent:"input.replace"}),!0}),lI=Eo((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:z.announce.of(i),userEvent:"input.replace.all"}),!0});function mh(t){return t.state.facet(ts).createPanel(t)}function Ju(t,e){var n,i,r,s,o;let l=t.selection.main,a=l.empty||l.to>l.from+100?"":t.sliceDoc(l.from,l.to);if(e&&!a)return e;let c=t.facet(ts);return new Sv({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:c.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:c.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:c.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function kv(t){let e=Xs(t,mh);return e&&e.dom.querySelector("[main-field]")}function Cv(t){let e=kv(t);e&&e==t.root.activeElement&&e.select()}const Av=t=>{let e=t.state.field(hi,!1);if(e&&e.panel){let n=kv(t);if(n&&n!=t.root.activeElement){let i=Ju(t.state,e.query.spec);i.valid&&t.dispatch({effects:eo.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[ph.of(!0),e?eo.of(Ju(t.state,e.query.spec)):le.appendConfig.of(fI)]});return!0},Tv=t=>{let e=t.state.field(hi,!1);if(!e||!e.panel)return!1;let n=Xs(t,mh);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:ph.of(!1)}),!0},aI=[{key:"Mod-f",run:Av,scope:"editor search-panel"},{key:"F3",run:ia,shift:ra,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:ia,shift:ra,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Tv,scope:"editor search-panel"},{key:"Mod-Shift-l",run:oI},{key:"Mod-Alt-g",run:$B},{key:"Mod-d",run:YB,preventDefault:!0}];class cI{constructor(e){this.view=e;let n=this.query=e.state.field(hi).query.spec;this.commit=this.commit.bind(this),this.searchField=Ae("input",{value:n.search,placeholder:Nt(e,"Find"),"aria-label":Nt(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Ae("input",{value:n.replace,placeholder:Nt(e,"Replace"),"aria-label":Nt(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Ae("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Ae("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Ae("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(r,s,o){return Ae("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=Ae("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>ia(e),[Nt(e,"next")]),i("prev",()=>ra(e),[Nt(e,"previous")]),i("select",()=>sI(e),[Nt(e,"all")]),Ae("label",null,[this.caseField,Nt(e,"match case")]),Ae("label",null,[this.reField,Nt(e,"regexp")]),Ae("label",null,[this.wordField,Nt(e,"by word")]),...e.state.readOnly?[]:[Ae("br"),this.replaceField,i("replace",()=>wm(e),[Nt(e,"replace")]),i("replaceAll",()=>lI(e),[Nt(e,"replace all")])],Ae("button",{name:"close",onclick:()=>Tv(e),"aria-label":Nt(e,"close"),type:"button"},["×"])])}commit(){let e=new Sv({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:eo.of(e)}))}keydown(e){bR(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?ra:ia)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),wm(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(eo)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(ts).top}}function Nt(t,e){return t.state.phrase(e)}const sl=30,ol=/[\s\.,:;?!]/;function gh(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),r=t.state.doc.lineAt(n).to,s=Math.max(i.from,e-sl),o=Math.min(r,n+sl),l=t.state.sliceDoc(s,o);if(s!=i.from){for(let a=0;a<sl;a++)if(!ol.test(l[a+1])&&ol.test(l[a])){l=l.slice(a);break}}if(o!=r){for(let a=l.length-1;a>l.length-sl;a--)if(!ol.test(l[a-1])&&ol.test(l[a])){l=l.slice(0,a);break}}return z.announce.of(`${t.state.phrase("current match")}. ${l} ${t.state.phrase("on line")} ${i.number}.`)}const uI=z.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),fI=[hi,ir.low(rI),uI];class Ev{constructor(e,n,i,r){this.state=e,this.pos=n,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=dt(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),r=n.text.slice(i-n.from,this.pos-n.from),s=r.search(Pv(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function xm(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function hI(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let s=1;s<r.length;s++)n[r[s]]=!0}let i=xm(e)+xm(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function dI(t){let e=t.map(r=>typeof r=="string"?{label:r}:r),[n,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:hI(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:n}:null}}class Sm{constructor(e,n,i,r){this.completion=e,this.source=n,this.match=i,this.score=r}}function qi(t){return t.selection.main.from}function Pv(t,e){var n;let{source:i}=t,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?t:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const Mv=Yn.define();function pI(t,e,n,i){let{main:r}=t.selection,s=n-r.from,o=i-r.from;return Object.assign(Object.assign({},t.changeByRange(l=>{if(l!=r&&n!=i&&t.sliceDoc(l.from+s,l.from+o)!=t.sliceDoc(n,i))return{range:l};let a=t.toText(e);return{changes:{from:l.from+s,to:i==r.from?l.to:l.from+o,insert:a},range:D.cursor(l.from+s+a.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const Om=new WeakMap;function mI(t){if(!Array.isArray(t))return t;let e=Om.get(t);return e||Om.set(t,e=dI(t)),e}const sa=le.define(),to=le.define();class gI{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=rt(e,n),r=qt(i);this.chars.push(i);let s=e.slice(n,n+r),o=s.toUpperCase();this.folded.push(rt(o==s?s.toLowerCase():o,0)),n+=r}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:i,any:r,precise:s,byWord:o}=this;if(n.length==1){let v=rt(e,0),x=qt(v),S=x==e.length?0:-100;if(v!=n[0])if(v==i[0])S+=-200;else return null;return this.ret(S,[0,x])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=n.length,c=0;if(l<0){for(let v=0,x=Math.min(e.length,200);v<x&&c<a;){let S=rt(e,v);(S==n[c]||S==i[c])&&(r[c++]=v),v+=qt(S)}if(c<a)return null}let u=0,f=0,h=!1,d=0,p=-1,m=-1,y=/[a-z]/.test(e),g=!0;for(let v=0,x=Math.min(e.length,200),S=0;v<x&&f<a;){let b=rt(e,v);l<0&&(u<a&&b==n[u]&&(s[u++]=v),d<a&&(b==n[d]||b==i[d]?(d==0&&(p=v),m=v+1,d++):d=0));let O,k=b<255?b>=48&&b<=57||b>=97&&b<=122?2:b>=65&&b<=90?1:0:(O=Wf(b))!=O.toLowerCase()?1:O!=O.toUpperCase()?2:0;(!v||k==1&&y||S==0&&k!=0)&&(n[f]==b||i[f]==b&&(h=!0)?o[f++]=v:o.length&&(g=!1)),S=k,v+=qt(b)}return f==a&&o[0]==0&&g?this.result(-100+(h?-200:0),o,e):d==a&&p==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):d==a?this.ret(-900-e.length,[p,m]):f==a?this.result(-100+(h?-200:0)+-700+(g?0:-1100),o,e):n.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,n,i){let r=[],s=0;for(let o of n){let l=o+(this.astral?qt(rt(i,o)):1);s&&r[s-1]==o?r[s-1]=l:(r[s++]=o,r[s++]=l)}return this.ret(e-i.length,r)}}class yI{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),i=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,n.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const nt=U.define({combine(t){return Fn(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:bI,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>km(e(i),n(i)),optionClass:(e,n)=>i=>km(e(i),n(i)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function km(t,e){return t?e?t+" "+e:t:e}function bI(t,e,n,i,r,s){let o=t.textDirection==De.RTL,l=o,a=!1,c="top",u,f,h=e.left-r.left,d=r.right-e.right,p=i.right-i.left,m=i.bottom-i.top;if(l&&h<Math.min(p,d)?l=!1:!l&&d<Math.min(p,h)&&(l=!0),p<=(l?h:d))u=Math.max(r.top,Math.min(n.top,r.bottom-m))-e.top,f=Math.min(400,l?h:d);else{a=!0,f=Math.min(400,(o?e.right:r.right-e.left)-30);let v=r.bottom-e.bottom;v>=m||v>e.top?u=n.bottom-e.top:(c="bottom",u=e.bottom-n.top)}let y=(e.bottom-e.top)/s.offsetHeight,g=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${u/y}px; max-width: ${f/g}px`,class:"cm-completionInfo-"+(a?o?"left-narrow":"right-narrow":l?"left":"right")}}function vI(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,r,s){let o=document.createElement("span");o.className="cm-completionLabel";let l=n.displayLabel||n.label,a=0;for(let c=0;c<s.length;){let u=s[c++],f=s[c++];u>a&&o.appendChild(document.createTextNode(l.slice(a,u)));let h=o.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(l.slice(u,f))),h.className="cm-completionMatchedText",a=f}return a<l.length&&o.appendChild(document.createTextNode(l.slice(a))),o},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function Ac(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class wI{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:s,selected:o}=r.open,l=e.state.facet(nt);this.optionContent=vI(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=Ac(s.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:c}=e.state.field(n).open;for(let u=a.target,f;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(f=/-(\d+)$/.exec(u.id))&&+f[1]<c.length){this.applyCompletion(e,c[+f[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(nt).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:to.of(null)})}),this.showOptions(s,r.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:s,selected:o,disabled:l}=i.open;(!r.open||r.open.options!=s)&&(this.range=Ac(s.length,o,e.state.facet(nt).maxRenderedOptions),this.showOptions(s,i.id)),this.updateSel(),l!=((n=r.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=Ac(n.options.length,n.selected,this.view.state.facet(nt).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>Pt(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&SI(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return r.top>Math.min(s.bottom,n.bottom)-10||r.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(nt).positionInfo(this.view,n,r,i,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=i.from;o<i.to;o++){let{completion:l,match:a}=e[o],{section:c}=l;if(c){let h=typeof c=="string"?c:c.name;if(h!=s&&(o>i.from||i.from==0))if(s=h,typeof c!="string"&&c.header)r.appendChild(c.header(c));else{let d=r.appendChild(document.createElement("completion-section"));d.textContent=h}}const u=r.appendChild(document.createElement("li"));u.id=n+"-"+o,u.setAttribute("role","option");let f=this.optionClass(l);f&&(u.className=f);for(let h of this.optionContent){let d=h(l,this.view.state,this.view,a);d&&u.appendChild(d)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function xI(t,e){return n=>new wI(n,t,e)}function SI(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=n.height/t.offsetHeight;i.top<n.top?t.scrollTop-=(n.top-i.top)/r:i.bottom>n.bottom&&(t.scrollTop+=(i.bottom-n.bottom)/r)}function Cm(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function OI(t,e){let n=[],i=null,r=c=>{n.push(c);let{section:u}=c.completion;if(u){i||(i=[]);let f=typeof u=="string"?u:u.name;i.some(h=>h.name==f)||i.push(typeof u=="string"?{name:f}:u)}},s=e.facet(nt);for(let c of t)if(c.hasResult()){let u=c.result.getMatch;if(c.result.filter===!1)for(let f of c.result.options)r(new Sm(f,c.source,u?u(f):[],1e9-n.length));else{let f=e.sliceDoc(c.from,c.to),h,d=s.filterStrict?new yI(f):new gI(f);for(let p of c.result.options)if(h=d.match(p.label)){let m=p.displayLabel?u?u(p,h.matched):[]:h.matched;r(new Sm(p,c.source,m,h.score+(p.boost||0)))}}}if(i){let c=Object.create(null),u=0,f=(h,d)=>{var p,m;return((p=h.rank)!==null&&p!==void 0?p:1e9)-((m=d.rank)!==null&&m!==void 0?m:1e9)||(h.name<d.name?-1:1)};for(let h of i.sort(f))u-=1e5,c[h.name]=u;for(let h of n){let{section:d}=h.completion;d&&(h.score+=c[typeof d=="string"?d:d.name])}}let o=[],l=null,a=s.compareCompletions;for(let c of n.sort((u,f)=>f.score-u.score||a(u.completion,f.completion))){let u=c.completion;!l||l.label!=u.label||l.detail!=u.detail||l.type!=null&&u.type!=null&&l.type!=u.type||l.apply!=u.apply||l.boost!=u.boost?o.push(c):Cm(c.completion)>Cm(l)&&(o[o.length-1]=c),l=c.completion}return o}class wr{constructor(e,n,i,r,s,o){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new wr(this.options,Am(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,r,s,o){if(r&&!o&&e.some(c=>c.isPending))return r.setDisabled();let l=OI(e,n);if(!l.length)return r&&e.some(c=>c.isPending)?r.setDisabled():null;let a=n.facet(nt).selectOnOpen?0:-1;if(r&&r.selected!=a&&r.selected!=-1){let c=r.options[r.selected].completion;for(let u=0;u<l.length;u++)if(l[u].completion==c){a=u;break}}return new wr(l,Am(i,a),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:PI,above:s.aboveCursor},r?r.timestamp:Date.now(),a,!1)}map(e){return new wr(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new wr(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class oa{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new oa(TI,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(nt),s=(i.override||n.languageDataAt("autocomplete",qi(n)).map(mI)).map(a=>(this.active.find(u=>u.source==a)||new Kt(a,this.active.some(u=>u.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((a,c)=>a==this.active[c])&&(s=this.active);let o=this.open,l=e.effects.some(a=>a.is(yh));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!kI(s,this.active)||l?o=wr.build(s,n,this.id,o,i,l):o&&o.disabled&&!s.some(a=>a.isPending)&&(o=null),!o&&s.every(a=>!a.isPending)&&s.some(a=>a.hasResult())&&(s=s.map(a=>a.hasResult()?new Kt(a.source,0):a));for(let a of e.effects)a.is(Dv)&&(o=o&&o.setSelected(a.value,this.id));return s==this.active&&o==this.open?this:new oa(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?CI:AI}}function kI(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;i<e.length&&!e[i].hasResult();)i++;let r=n==t.length,s=i==e.length;if(r||s)return r==s;if(t[n++].result!=e[i++].result)return!1}}const CI={"aria-autocomplete":"list"},AI={};function Am(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const TI=[];function Rv(t,e){if(t.isUserEvent("input.complete")){let i=t.annotation(Mv);if(i&&e.activateOnCompletion(i))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class Kt{constructor(e,n,i=!1){this.source=e,this.state=n,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let i=Rv(e,n),r=this;(i&8||i&16&&this.touches(e))&&(r=new Kt(r.source,0)),i&4&&r.state==0&&(r=new Kt(this.source,1)),r=r.updateFor(e,i);for(let s of e.effects)if(s.is(sa))r=new Kt(r.source,1,s.value);else if(s.is(to))r=new Kt(r.source,0);else if(s.is(yh))for(let o of s.value)o.source==r.source&&(r=o);return r}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(qi(e.state))}}class Pr extends Kt{constructor(e,n,i,r,s,o){super(e,3,n),this.limit=i,this.result=r,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var i;if(!(n&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=qi(e.state);if(l>o||!r||n&2&&(qi(e.startState)==this.from||l<this.limit))return new Kt(this.source,n&4?1:0);let a=e.changes.mapPos(this.limit);return EI(r.validFor,e.state,s,o)?new Pr(this.source,this.explicit,a,r,s,o):r.update&&(r=r.update(r,s,o,new Ev(e.state,l,!1)))?new Pr(this.source,this.explicit,a,r,r.from,(i=r.to)!==null&&i!==void 0?i:qi(e.state)):new Kt(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Pr(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Kt(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function EI(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return typeof t=="function"?t(r,n,i,e):Pv(t,!0).test(r)}const yh=le.define({map(t,e){return t.map(n=>n.map(e))}}),Dv=le.define(),Et=ct.define({create(){return oa.start()},update(t,e){return t.update(e)},provide:t=>[nh.from(t,e=>e.tooltip),z.contentAttributes.from(t,e=>e.attrs)]});function bh(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(Et).active.find(r=>r.source==e.source);return i instanceof Pr?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},pI(t.state,n,i.from,i.to)),{annotations:Mv.of(e.completion)})):n(t,e.completion,i.from,i.to),!0):!1}const PI=xI(Et,bh);function ll(t,e="option"){return n=>{let i=n.state.field(Et,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(nt).interactionDelay)return!1;let r=1,s;e=="page"&&(s=hb(n,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,l=i.open.selected>-1?i.open.selected+r*(t?1:-1):t?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),n.dispatch({effects:Dv.of(l)}),!0}}const MI=t=>{let e=t.state.field(Et,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(nt).interactionDelay?!1:bh(t,e.open.options[e.open.selected])},Tm=t=>t.state.field(Et,!1)?(t.dispatch({effects:sa.of(!0)}),!0):!1,RI=t=>{let e=t.state.field(Et,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:to.of(null)}),!0)};class DI{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const LI=50,BI=1e3,II=Ve.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(Et).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(Et),n=t.state.facet(nt);if(!t.selectionSet&&!t.docChanged&&t.startState.field(Et)==e)return;let i=t.transactions.some(s=>{let o=Rv(s,n);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(i||o.context.abortOnDocChange&&t.docChanged||o.updates.length+t.transactions.length>LI&&Date.now()-o.time>BI){for(let l of o.context.abortListeners)try{l()}catch(a){Pt(this.view.state,a)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(s=>s.effects.some(o=>o.is(sa)))&&(this.pendingStart=!0);let r=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.isPending&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),r):-1,this.composing!=0)for(let s of t.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(Et);for(let n of e.active)n.isPending&&!this.running.some(i=>i.active.source==n.source)&&this.startQuery(n);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(nt).updateSyncTime))}startQuery(t){let{state:e}=this.view,n=qi(e),i=new Ev(e,n,t.explicit,this.view),r=new DI(t,i);this.running.push(r),Promise.resolve(t.source(i)).then(s=>{r.context.aborted||(r.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:to.of(null)}),Pt(this.view.state,s)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(nt).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(nt),i=this.view.state.field(Et);for(let r=0;r<this.running.length;r++){let s=this.running[r];if(s.done===void 0)continue;if(this.running.splice(r--,1),s.done){let l=qi(s.updates.length?s.updates[0].startState:this.view.state),a=Math.min(l,s.done.from+(s.active.explicit?0:1)),c=new Pr(s.active.source,s.active.explicit,a,s.done,s.done.from,(t=s.done.to)!==null&&t!==void 0?t:l);for(let u of s.updates)c=c.update(u,n);if(c.hasResult()){e.push(c);continue}}let o=i.active.find(l=>l.source==s.active.source);if(o&&o.isPending)if(s.done==null){let l=new Kt(s.active.source,0);for(let a of s.updates)l=l.update(a,n);l.isPending||e.push(l)}else this.startQuery(o)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:yh.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(Et,!1);if(e&&e.tooltip&&this.view.state.facet(nt).closeOnBlur){let n=e.open&&hb(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:to.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:sa.of(!1)}),20),this.composing=0}}}),NI=typeof navigator=="object"&&/Win/.test(navigator.platform),FI=ir.highest(z.domEventHandlers({keydown(t,e){let n=e.state.field(Et,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&!(NI&&t.altKey)||t.metaKey)return!1;let i=n.open.options[n.open.selected],r=n.active.find(o=>o.source==i.source),s=i.completion.commitCharacters||r.result.commitCharacters;return s&&s.indexOf(t.key)>-1&&bh(e,i),!1}})),_I=z.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),no={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},_i=le.define({map(t,e){let n=e.mapPos(t,-1,vt.TrackAfter);return n??void 0}}),vh=new class extends Gi{};vh.startSide=1;vh.endSide=-1;const Lv=ct.define({create(){return ge.empty},update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:i=>i>=n.from&&i<=n.to})}for(let n of e.effects)n.is(_i)&&(t=t.update({add:[vh.range(n.value,n.value+1)]}));return t}});function $I(){return[HI,Lv]}const Tc="()[]{}<>";function Bv(t){for(let e=0;e<Tc.length;e+=2)if(Tc.charCodeAt(e)==t)return Tc.charAt(e+1);return Wf(t<128?t:t+1)}function Iv(t,e){return t.languageDataAt("closeBrackets",e)[0]||no}const VI=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),HI=z.inputHandler.of((t,e,n,i)=>{if((VI?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let r=t.state.selection.main;if(i.length>2||i.length==2&&qt(rt(i,0))==1||e!=r.from||n!=r.to)return!1;let s=zI(t.state,i);return s?(t.dispatch(s),!0):!1}),WI=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=Iv(t,t.selection.main.head).brackets||no.brackets,r=null,s=t.changeByRange(o=>{if(o.empty){let l=qI(t.doc,o.head);for(let a of i)if(a==l&&Wa(t.doc,o.head)==Bv(rt(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:D.cursor(o.head-a.length)}}return{range:r=o}});return r||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},jI=[{key:"Backspace",run:WI}];function zI(t,e){let n=Iv(t,t.selection.main.head),i=n.brackets||no.brackets;for(let r of i){let s=Bv(rt(r,0));if(e==r)return s==r?KI(t,r,i.indexOf(r+r+r)>-1,n):UI(t,r,s,n.before||no.before);if(e==s&&Nv(t,t.selection.main.from))return QI(t,r,s)}return null}function Nv(t,e){let n=!1;return t.field(Lv).between(0,t.doc.length,i=>{i==e&&(n=!0)}),n}function Wa(t,e){let n=t.sliceString(e,e+2);return n.slice(0,qt(rt(n,0)))}function qI(t,e){let n=t.sliceString(e-2,e);return qt(rt(n,0))==n.length?n:n.slice(1)}function UI(t,e,n,i){let r=null,s=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:n,from:o.to}],effects:_i.of(o.to+e.length),range:D.range(o.anchor+e.length,o.head+e.length)};let l=Wa(t.doc,o.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+n,from:o.head},effects:_i.of(o.head+e.length),range:D.cursor(o.head+e.length)}:{range:r=o}});return r?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function QI(t,e,n){let i=null,r=t.changeByRange(s=>s.empty&&Wa(t.doc,s.head)==n?{changes:{from:s.head,to:s.head+n.length,insert:n},range:D.cursor(s.head+n.length)}:i={range:s});return i?null:t.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function KI(t,e,n,i){let r=i.stringPrefixes||no.stringPrefixes,s=null,o=t.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:_i.of(l.to+e.length),range:D.range(l.anchor+e.length,l.head+e.length)};let a=l.head,c=Wa(t.doc,a),u;if(c==e){if(Em(t,a))return{changes:{insert:e+e,from:a},effects:_i.of(a+e.length),range:D.cursor(a+e.length)};if(Nv(t,a)){let h=n&&t.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+h.length,insert:h},range:D.cursor(a+h.length)}}}else{if(n&&t.sliceDoc(a-2*e.length,a)==e+e&&(u=Pm(t,a-2*e.length,r))>-1&&Em(t,u))return{changes:{insert:e+e+e+e,from:a},effects:_i.of(a+e.length),range:D.cursor(a+e.length)};if(t.charCategorizer(a)(c)!=Be.Word&&Pm(t,a,r)>-1&&!XI(t,a,e,r))return{changes:{insert:e+e,from:a},effects:_i.of(a+e.length),range:D.cursor(a+e.length)}}return{range:s=l}});return s?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Em(t,e){let n=dt(t).resolveInner(e+1);return n.parent&&n.from==e}function XI(t,e,n,i){let r=dt(t).resolveInner(e,-1),s=i.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=t.sliceDoc(r.from,Math.min(r.to,r.from+n.length+s)),a=l.indexOf(n);if(!a||a>-1&&i.indexOf(l.slice(0,a))>-1){let u=r.firstChild;for(;u&&u.from==r.from&&u.to-u.from>n.length+a;){if(t.sliceDoc(u.to-n.length,u.to)==n)return!1;u=u.firstChild}return!0}let c=r.to==e&&r.parent;if(!c)break;r=c}return!1}function Pm(t,e,n){let i=t.charCategorizer(e);if(i(t.sliceDoc(e-1,e))!=Be.Word)return e;for(let r of n){let s=e-r.length;if(t.sliceDoc(s,e)==r&&i(t.sliceDoc(s-1,s))!=Be.Word)return s}return-1}function GI(t={}){return[FI,Et,nt.of(t),II,YI,_I]}const Fv=[{key:"Ctrl-Space",run:Tm},{mac:"Alt-`",run:Tm},{key:"Escape",run:RI},{key:"ArrowDown",run:ll(!0)},{key:"ArrowUp",run:ll(!1)},{key:"PageDown",run:ll(!0,"page")},{key:"PageUp",run:ll(!1,"page")},{key:"Enter",run:MI}],YI=ir.highest(La.computeN([nt],t=>t.facet(nt).defaultKeymap?[Fv]:[]));class JI{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class Mi{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let r=e,s=i.facet(io).markerFilter;s&&(r=s(r,i));let o=G.set(r.map(l=>l.from==l.to||l.from==l.to-1&&i.doc.lineAt(l.from).to==l.from?G.widget({widget:new lN(l),diagnostic:l}).range(l.from):G.mark({attributes:{class:"cm-lintRange cm-lintRange-"+l.severity+(l.markClass?" "+l.markClass:"")},diagnostic:l}).range(l.from,l.to)),!0);return new Mi(o,n,qr(o))}}function qr(t,e=null,n=0){let i=null;return t.between(n,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return i=new JI(r,s,o.diagnostic),!1}),i}function ZI(t,e){let n=e.pos,i=e.end||n,r=t.state.facet(io).hideOn(t,n,i);if(r!=null)return r;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(_v))||t.changes.touchesRange(s.from,Math.max(s.to,i)))}function eN(t,e){return t.field(Ht,!1)?e:e.concat(le.appendConfig.of(uN))}const _v=le.define(),wh=le.define(),$v=le.define(),Ht=ct.define({create(){return new Mi(G.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),i=null,r=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);i=qr(n,t.selected.diagnostic,s)||qr(n,null,s)}!n.size&&r&&e.state.facet(io).autoPanel&&(r=null),t=new Mi(n,r,i)}for(let n of e.effects)if(n.is(_v)){let i=e.state.facet(io).autoPanel?n.value.length?ro.open:null:t.panel;t=Mi.init(n.value,i,e.state)}else n.is(wh)?t=new Mi(t.diagnostics,n.value?ro.open:null,t.selected):n.is($v)&&(t=new Mi(t.diagnostics,t.panel,n.value));return t},provide:t=>[Gs.from(t,e=>e.panel),z.decorations.from(t,e=>e.diagnostics)]}),tN=G.mark({class:"cm-lintRange cm-lintRange-active"});function nN(t,e,n){let{diagnostics:i}=t.state.field(Ht),r=[],s=2e8,o=0;i.between(e-(n<0?1:0),e+(n>0?1:0),(a,c,{spec:u})=>{e>=a&&e<=c&&(a==c||(e>a||n>0)&&(e<c||n<0))&&(r.push(u.diagnostic),s=Math.min(a,s),o=Math.max(c,o))});let l=t.state.facet(io).tooltipFilter;return l&&(r=l(r,t.state)),r.length?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:iN(t,r)}}}:null}function iN(t,e){return Ae("ul",{class:"cm-tooltip-lint"},e.map(n=>Hv(t,n,!1)))}const rN=t=>{let e=t.state.field(Ht,!1);(!e||!e.panel)&&t.dispatch({effects:eN(t.state,[wh.of(!0)])});let n=Xs(t,ro.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},Mm=t=>{let e=t.state.field(Ht,!1);return!e||!e.panel?!1:(t.dispatch({effects:wh.of(!1)}),!0)},sN=t=>{let e=t.state.field(Ht,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},oN=[{key:"Mod-Shift-m",run:rN,preventDefault:!0},{key:"F8",run:sN}],io=U.define({combine(t){return Object.assign({sources:t.map(e=>e.source).filter(e=>e!=null)},Fn(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function Vv(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let r=n[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function Hv(t,e,n){var i;let r=n?Vv(e.actions):[];return Ae("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Ae("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let l=!1,a=h=>{if(h.preventDefault(),l)return;l=!0;let d=qr(t.state.field(Ht).diagnostics,e);d&&s.apply(t,d.from,d.to)},{name:c}=s,u=r[o]?c.indexOf(r[o]):-1,f=u<0?c:[c.slice(0,u),Ae("u",c.slice(u,u+1)),c.slice(u+1)];return Ae("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${c}${u<0?"":` (access key "${r[o]})"`}.`},f)}),e.source&&Ae("div",{class:"cm-diagnosticSource"},e.source))}class lN extends Jn{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Ae("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class Rm{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Hv(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class ro{constructor(e){this.view=e,this.items=[];let n=r=>{if(r.keyCode==27)Mm(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=Vv(s.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==r.keyCode){let a=qr(this.view.state.field(Ht).diagnostics,s);a&&s.actions[l].apply(e,a.from,a.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=Ae("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=Ae("div",{class:"cm-panel-lint"},this.list,Ae("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Mm(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(Ht).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(Ht),i=0,r=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,l,{spec:a})=>{let c=-1,u;for(let f=i;f<this.items.length;f++)if(this.items[f].diagnostic==a.diagnostic){c=f;break}c<0?(u=new Rm(this.view,a.diagnostic),this.items.splice(i,0,u),r=!0):(u=this.items[c],c>i&&(this.items.splice(i,c-i),r=!0)),n&&u.diagnostic==n.diagnostic?u.dom.hasAttribute("aria-selected")||(u.dom.setAttribute("aria-selected","true"),s=u):u.dom.hasAttribute("aria-selected")&&u.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new Rm(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:l})=>{let a=l.height/this.list.offsetHeight;o.top<l.top?this.list.scrollTop-=(l.top-o.top)/a:o.bottom>l.bottom&&(this.list.scrollTop+=(o.bottom-l.bottom)/a)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(Ht),i=qr(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:$v.of(i)})}static open(e){return new ro(e)}}function aN(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function al(t){return aN(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const cN=z.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:al("#d11")},".cm-lintRange-warning":{backgroundImage:al("orange")},".cm-lintRange-info":{backgroundImage:al("#999")},".cm-lintRange-hint":{backgroundImage:al("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),uN=[Ht,z.decorations.compute([Ht],t=>{let{selected:e,panel:n}=t.field(Ht);return!e||!n||e.from==e.to?G.none:G.set([tN.range(e.from,e.to)])}),oD(nN,{hideOn:ZI}),cN],fN=[yD(),wD(),IR(),NL(),cL(),kR(),PR(),de.allowMultipleSelections.of(!0),XD(),Nb(dL,{fallback:!0}),wL(),$I(),GI(),XR(),JR(),HR(),jB(),La.of([...jI,...NB,...aI,...qL,...sL,...Fv,...oN])];/*!
* VueCodemirror v6.1.1
* Copyright (c) Surmon. All rights reserved.
* Released under the MIT License.
* Surmon
*/var hN=Object.freeze({autofocus:!1,disabled:!1,indentWithTab:!0,tabSize:2,placeholder:"",autoDestroy:!0,extensions:[fN]}),dN=Symbol("vue-codemirror-global-config"),bt,pN=function(t){var e=t.onUpdate,n=t.onChange,i=t.onFocus,r=t.onBlur,s=function(o,l){var a={};for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&l.indexOf(c)<0&&(a[c]=o[c]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function"){var u=0;for(c=Object.getOwnPropertySymbols(o);u<c.length;u++)l.indexOf(c[u])<0&&Object.prototype.propertyIsEnumerable.call(o,c[u])&&(a[c[u]]=o[c[u]])}return a}(t,["onUpdate","onChange","onFocus","onBlur"]);return de.create({doc:s.doc,selection:s.selection,extensions:(Array.isArray(s.extensions)?s.extensions:[s.extensions]).concat([z.updateListener.of(function(o){e(o),o.docChanged&&n(o.state.doc.toString(),o),o.focusChanged&&(o.view.hasFocus?i(o):r(o))})])})},pr=function(t){var e=new wo;return{compartment:e,run:function(n){e.get(t.state)?t.dispatch({effects:e.reconfigure(n)}):t.dispatch({effects:le.appendConfig.of(e.of(n))})}}},Dm=function(t,e){var n=pr(t),i=n.compartment,r=n.run;return function(s){var o=i.get(t.state);r(s??o!==e?e:[])}},cl={type:Boolean,default:void 0},mN={autofocus:cl,disabled:cl,indentWithTab:cl,tabSize:Number,placeholder:String,style:Object,autoDestroy:cl,phrases:Object,root:Object,extensions:Array,selection:Object},gN={modelValue:{type:String,default:""}},yN=Object.assign(Object.assign({},mN),gN);(function(t){t.Change="change",t.Update="update",t.Focus="focus",t.Blur="blur",t.Ready="ready",t.ModelUpdate="update:modelValue"})(bt||(bt={}));var Ri={};Ri[bt.Change]=function(t,e){return!0},Ri[bt.Update]=function(t){return!0},Ri[bt.Focus]=function(t){return!0},Ri[bt.Blur]=function(t){return!0},Ri[bt.Ready]=function(t){return!0};var Wv={};Wv[bt.ModelUpdate]=Ri[bt.Change];var bN=Object.assign(Object.assign({},Ri),Wv),vN=Z({name:"VueCodemirror",props:Object.assign({},yN),emits:Object.assign({},bN),setup:function(t,e){var n=fl(),i=fl(),r=fl(),s=Object.assign(Object.assign({},hN),Ue(dN,{})),o=M(function(){var l={};return Object.keys(Sg(t)).forEach(function(a){var c;a!=="modelValue"&&(l[a]=(c=t[a])!==null&&c!==void 0?c:s[a])}),l});return pt(function(){var l;i.value=pN({doc:t.modelValue,selection:o.value.selection,extensions:(l=s.extensions)!==null&&l!==void 0?l:[],onFocus:function(c){return e.emit(bt.Focus,c)},onBlur:function(c){return e.emit(bt.Blur,c)},onUpdate:function(c){return e.emit(bt.Update,c)},onChange:function(c,u){c!==t.modelValue&&(e.emit(bt.Change,c,u),e.emit(bt.ModelUpdate,c,u))}}),r.value=function(c){return new z(Object.assign({},c))}({state:i.value,parent:n.value,root:o.value.root});var a=function(c){var u=function(){return c.state.doc.toString()},f=pr(c).run,h=Dm(c,[z.editable.of(!1),de.readOnly.of(!0)]),d=Dm(c,La.of([FB])),p=pr(c).run,m=pr(c).run,y=pr(c).run,g=pr(c).run;return{focus:function(){return c.focus()},getDoc:u,setDoc:function(v){v!==u()&&c.dispatch({changes:{from:0,to:c.state.doc.length,insert:v}})},reExtensions:f,toggleDisabled:h,toggleIndentWithTab:d,setTabSize:function(v){p([de.tabSize.of(v),Ia.of(" ".repeat(v))])},setPhrases:function(v){m([de.phrases.of(v)])},setPlaceholder:function(v){y(qR(v))},setStyle:function(v){v===void 0&&(v={}),g(z.theme({"&":Object.assign({},v)}))}}}(r.value);re(function(){return t.modelValue},function(c){c!==a.getDoc()&&a.setDoc(c)}),re(function(){return t.extensions},function(c){return a.reExtensions(c||[])},{immediate:!0}),re(function(){return o.value.disabled},function(c){return a.toggleDisabled(c)},{immediate:!0}),re(function(){return o.value.indentWithTab},function(c){return a.toggleIndentWithTab(c)},{immediate:!0}),re(function(){return o.value.tabSize},function(c){return a.setTabSize(c)},{immediate:!0}),re(function(){return o.value.phrases},function(c){return a.setPhrases(c||{})},{immediate:!0}),re(function(){return o.value.placeholder},function(c){return a.setPlaceholder(c)},{immediate:!0}),re(function(){return o.value.style},function(c){return a.setStyle(c)},{immediate:!0}),o.value.autofocus&&a.focus(),e.emit(bt.Ready,{state:i.value,view:r.value,container:n.value})}),Nn(function(){o.value.autoDestroy&&r.value&&function(l){l.destroy()}(r.value)}),function(){return Xw("div",{class:"v-codemirror",style:{display:"contents"},ref:n})}}}),wN=vN,Lm={};class la{constructor(e,n,i,r,s,o,l,a,c,u=0,f){this.p=e,this.stack=n,this.state=i,this.reducePos=r,this.pos=s,this.score=o,this.buffer=l,this.bufferBase=a,this.curContext=c,this.lookAhead=u,this.parent=f}toString(){return`[${this.stack.filter((e,n)=>n%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,n,i=0){let r=e.parser.context;return new la(e,[],n,i,i,0,[],0,r?new Bm(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,n){this.stack.push(this.state,n,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var n;let i=e>>19,r=e&65535,{parser:s}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let l=s.dynamicPrecedence(r);if(l&&(this.score+=l),i==0){this.pushState(s.getGoto(this.state,r,!0),this.reducePos),r<s.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(r,this.reducePos);return}let a=this.stack.length-(i-1)*3-(e&262144?6:0),c=a?this.stack[a-2]:this.p.ranges[0].from,u=this.reducePos-c;u>=2e3&&!(!((n=this.p.parser.nodeSet.types[r])===null||n===void 0)&&n.isAnonymous)&&(c==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=u):this.p.lastBigReductionSize<u&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=c,this.p.lastBigReductionSize=u));let f=a?this.stack[a-1]:0,h=this.bufferBase+this.buffer.length-f;if(r<s.minRepeatTerm||e&131072){let d=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,c,d,h+4,!0)}if(e&262144)this.state=this.stack[a];else{let d=this.stack[a-3];this.state=s.getGoto(d,r,!0)}for(;this.stack.length>a;)this.stack.pop();this.reduceContext(r,c)}storeNode(e,n,i,r=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,l=this.buffer.length;if(l==0&&o.parent&&(l=o.bufferBase-o.parent.bufferBase,o=o.parent),l>0&&o.buffer[l-4]==0&&o.buffer[l-1]>-1){if(n==i)return;if(o.buffer[l-2]>=n){o.buffer[l-2]=i;return}}}if(!s||this.pos==i)this.buffer.push(e,n,i,r);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0){let l=!1;for(let a=o;a>0&&this.buffer[a-2]>i;a-=4)if(this.buffer[a-1]>=0){l=!0;break}if(l)for(;o>0&&this.buffer[o-2]>i;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,r>4&&(r-=4)}this.buffer[o]=e,this.buffer[o+1]=n,this.buffer[o+2]=i,this.buffer[o+3]=r}}shift(e,n,i,r){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=r,this.shiftContext(n,i),n<=this.p.parser.maxNode&&this.buffer.push(n,i,r,4);else{let s=e,{parser:o}=this.p;(r>this.pos||n<=o.maxNode)&&(this.pos=r,o.stateFlag(s,1)||(this.reducePos=r)),this.pushState(s,i),this.shiftContext(n,i),n<=o.maxNode&&this.buffer.push(n,i,r,4)}}apply(e,n,i,r){e&65536?this.reduce(e):this.shift(e,n,i,r)}useNode(e,n){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(n,r),this.buffer.push(i,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,n=e.buffer.length;for(;n>0&&e.buffer[n-2]>e.reducePos;)n-=4;let i=e.buffer.slice(n),r=e.bufferBase+n;for(;e&&r==e.bufferBase;)e=e.parent;return new la(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,n){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,n,4),this.storeNode(0,this.pos,n,i?8:4),this.pos=this.reducePos=n,this.score-=190}canShift(e){for(let n=new xN(this);;){let i=this.p.parser.stateSlot(n.state,4)||this.p.parser.hasAction(n.state,e);if(i==0)return!1;if(!(i&65536))return!0;n.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let n=this.p.parser.nextStates(this.state);if(n.length>8||this.stack.length>=120){let r=[];for(let s=0,o;s<n.length;s+=2)(o=n[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&r.push(n[s],o);if(this.stack.length<120)for(let s=0;r.length<8&&s<n.length;s+=2){let o=n[s+1];r.some((l,a)=>a&1&&l==o)||r.push(n[s],o)}n=r}let i=[];for(let r=0;r<n.length&&i.length<4;r+=2){let s=n[r+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(n[r],this.pos),o.reducePos=this.pos,o.score-=200,i.push(o)}return i}forceReduce(){let{parser:e}=this.p,n=e.stateSlot(this.state,5);if(!(n&65536))return!1;if(!e.validAction(this.state,n)){let i=n>>19,r=n&65535,s=this.stack.length-i*3;if(s<0||e.getGoto(this.stack[s],r,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;n=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(n),!0}findForcedReduction(){let{parser:e}=this.p,n=[],i=(r,s)=>{if(!n.includes(r))return n.push(r),e.allActions(r,o=>{if(!(o&393216))if(o&65536){let l=(o>>19)-s;if(l>1){let a=o&65535,c=this.stack.length-l*3;if(c>=0&&e.getGoto(this.stack[c],a,!1)>=0)return l<<19|65536|a}}else{let l=i(o,s+1);if(l!=null)return l}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let n=0;n<this.stack.length;n+=3)if(this.stack[n]!=e.stack[n])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(n)))}reduceContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(n)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let n=new Bm(this.curContext.tracker,e);n.hash!=this.curContext.hash&&this.emitContext(),this.curContext=n}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Bm{constructor(e,n){this.tracker=e,this.context=n,this.hash=e.strict?e.hash(n):0}}class xN{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let n=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],n,!0);this.state=r}}class aa{constructor(e,n,i){this.stack=e,this.pos=n,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,n=e.bufferBase+e.buffer.length){return new aa(e,n,n-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new aa(this.stack,this.pos,this.index)}}function ul(t,e=Uint16Array){if(typeof t!="string")return t;let n=null;for(let i=0,r=0;i<t.length;){let s=0;for(;;){let o=t.charCodeAt(i++),l=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let a=o-32;if(a>=46&&(a-=46,l=!0),s+=a,l)break;s*=46}n?n[r++]=s:n=new e(s)}return n}class Tl{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Im=new Tl;class SN{constructor(e,n){this.input=e,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Im,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}resolveOffset(e,n){let i=this.range,r=this.rangeIndex,s=this.pos+e;for(;s<i.from;){if(!r)return null;let o=this.ranges[--r];s-=i.from-o.to,i=o}for(;n<0?s>i.to:s>=i.to;){if(r==this.ranges.length-1)return null;let o=this.ranges[++r];s+=o.from-i.to,i=o}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let n of this.ranges)if(n.to>e)return Math.max(e,n.from);return this.end}peek(e){let n=this.chunkOff+e,i,r;if(n>=0&&n<this.chunk.length)i=this.pos+e,r=this.chunk.charCodeAt(n);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(i=s,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let o=this.rangeIndex,l=this.range;for(;l.to<=i;)l=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-i)),r=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),r}acceptToken(e,n=0){let i=n?this.resolveOffset(n,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,n){this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:n}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=n,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),n=this.pos+e.length;this.chunk=n>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,n){if(n?(this.token=n,n.start=e,n.lookAhead=e+1,n.value=n.extended=-1):this.token=Im,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,n){if(e>=this.chunkPos&&n<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,n-this.chunkPos);if(e>=this.chunk2Pos&&n<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,n-this.chunk2Pos);if(e>=this.range.from&&n<=this.range.to)return this.input.read(e,n);let i="";for(let r of this.ranges){if(r.from>=n)break;r.to>e&&(i+=this.input.read(Math.max(r.from,e),Math.min(r.to,n)))}return i}}class Mr{constructor(e,n){this.data=e,this.id=n}token(e,n){let{parser:i}=n.p;ON(this.data,e,n,this.id,i.data,i.tokenPrecTable)}}Mr.prototype.contextual=Mr.prototype.fallback=Mr.prototype.extend=!1;Mr.prototype.fallback=Mr.prototype.extend=!1;class ja{constructor(e,n={}){this.token=e,this.contextual=!!n.contextual,this.fallback=!!n.fallback,this.extend=!!n.extend}}function ON(t,e,n,i,r,s){let o=0,l=1<<i,{dialect:a}=n.p.parser;e:for(;l&t[o];){let c=t[o+1];for(let d=o+3;d<c;d+=2)if((t[d+1]&l)>0){let p=t[d];if(a.allows(p)&&(e.token.value==-1||e.token.value==p||kN(p,e.token.value,r,s))){e.acceptToken(p);break}}let u=e.next,f=0,h=t[o+2];if(e.next<0&&h>f&&t[c+h*3-3]==65535){o=t[c+h*3-1];continue e}for(;f<h;){let d=f+h>>1,p=c+d+(d<<1),m=t[p],y=t[p+1]||65536;if(u<m)h=d;else if(u>=y)f=d+1;else{o=t[p+2],e.advance();continue e}}break}}function Nm(t,e,n){for(let i=e,r;(r=t[i])!=65535;i++)if(r==n)return i-e;return-1}function kN(t,e,n,i){let r=Nm(n,i,e);return r<0||Nm(n,i,t)<r}const Ft=typeof process<"u"&&Lm&&/\bparse\b/.test(Lm.LOG);let Ec=null;function Fm(t,e,n){let i=t.cursor(et.IncludeAnonymous);for(i.moveTo(e);;)if(!(n<0?i.childBefore(e):i.childAfter(e)))for(;;){if((n<0?i.to<e:i.from>e)&&!i.type.isError)return n<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(t.length,Math.max(i.from+1,e+25));if(n<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return n<0?0:t.length}}class CN{constructor(e,n){this.fragments=e,this.nodeSet=n,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Fm(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Fm(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let n=this.trees.length-1;if(n<0)return this.nextFragment(),null;let i=this.trees[n],r=this.index[n];if(r==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=i.children[r],o=this.start[n]+i.positions[r];if(o>e)return this.nextStart=o,null;if(s instanceof qe){if(o==e){if(o<this.safeFrom)return null;let l=o+s.length;if(l<=this.safeTo){let a=s.prop(ue.lookAhead);if(!a||l+a<this.fragment.to)return s}}this.index[n]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[n]++,this.nextStart=o+s.length}}}class AN{constructor(e,n){this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new Tl)}getActions(e){let n=0,i=null,{parser:r}=e.p,{tokenizers:s}=r,o=r.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,a=0;for(let c=0;c<s.length;c++){if(!(1<<c&o))continue;let u=s[c],f=this.tokens[c];if(!(i&&!u.fallback)&&((u.contextual||f.start!=e.pos||f.mask!=o||f.context!=l)&&(this.updateCachedToken(f,u,e),f.mask=o,f.context=l),f.lookAhead>f.end+25&&(a=Math.max(f.lookAhead,a)),f.value!=0)){let h=n;if(f.extended>-1&&(n=this.addActions(e,f.extended,f.end,n)),n=this.addActions(e,f.value,f.end,n),!u.extend&&(i=f,n>h))break}}for(;this.actions.length>n;)this.actions.pop();return a&&e.setLookAhead(a),!i&&e.pos==this.stream.end&&(i=new Tl,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,n=this.addActions(e,i.value,i.end,n)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let n=new Tl,{pos:i,p:r}=e;return n.start=i,n.end=Math.min(i+1,r.stream.end),n.value=i==r.stream.end?r.parser.eofTerm:0,n}updateCachedToken(e,n,i){let r=this.stream.clipPos(i.pos);if(n.token(this.stream.reset(r,e),i),e.value>-1){let{parser:s}=i.p;for(let o=0;o<s.specialized.length;o++)if(s.specialized[o]==e.value){let l=s.specializers[o](this.stream.read(e.start,e.end),i);if(l>=0&&i.p.parser.dialect.allows(l>>1)){l&1?e.extended=l>>1:e.value=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,n,i,r){for(let s=0;s<r;s+=3)if(this.actions[s]==e)return r;return this.actions[r++]=e,this.actions[r++]=n,this.actions[r++]=i,r}addActions(e,n,i,r){let{state:s}=e,{parser:o}=e.p,{data:l}=o;for(let a=0;a<2;a++)for(let c=o.stateSlot(s,a?2:1);;c+=3){if(l[c]==65535)if(l[c+1]==1)c=Wn(l,c+2);else{r==0&&l[c+1]==2&&(r=this.putAction(Wn(l,c+2),n,i,r));break}l[c]==n&&(r=this.putAction(Wn(l,c+1),n,i,r))}return r}}class TN{constructor(e,n,i,r){this.parser=e,this.input=n,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new SN(n,r),this.tokens=new AN(e,this.stream),this.topTerm=e.top[1];let{from:s}=r[0];this.stacks=[la.start(this,e.top[0],s)],this.fragments=i.length&&this.stream.end-s>e.bufferLength*4?new CN(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,n=this.minStackPos,i=this.stacks=[],r,s;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let l=e[o];for(;;){if(this.tokens.mainToken=null,l.pos>n)i.push(l);else{if(this.advanceStack(l,i,e))continue;{r||(r=[],s=[]),r.push(l);let a=this.tokens.getMainToken(l);s.push(a.value,a.end)}}break}}if(!i.length){let o=r&&MN(r);if(o)return Ft&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw Ft&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&r){let o=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,s,i);if(o)return Ft&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(i.length>o)for(i.sort((l,a)=>a.score-l.score);i.length>o;)i.pop();i.some(l=>l.reducePos>n)&&this.recovering--}else if(i.length>1){e:for(let o=0;o<i.length-1;o++){let l=i[o];for(let a=o+1;a<i.length;a++){let c=i[a];if(l.sameState(c)||l.buffer.length>500&&c.buffer.length>500)if((l.score-c.score||l.buffer.length-c.buffer.length)>0)i.splice(a--,1);else{i.splice(o--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,n,i){let r=e.pos,{parser:s}=this,o=Ft?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let c=e.curContext&&e.curContext.tracker.strict,u=c?e.curContext.hash:0;for(let f=this.fragments.nodeAt(r);f;){let h=this.parser.nodeSet.types[f.type.id]==f.type?s.getGoto(e.state,f.type.id):-1;if(h>-1&&f.length&&(!c||(f.prop(ue.contextHash)||0)==u))return e.useNode(f,h),Ft&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(f.type.id)})`),!0;if(!(f instanceof qe)||f.children.length==0||f.positions[0]>0)break;let d=f.children[0];if(d instanceof qe&&f.positions[0]==0)f=d;else break}}let l=s.stateSlot(e.state,4);if(l>0)return e.reduce(l),Ft&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(l&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let c=0;c<a.length;){let u=a[c++],f=a[c++],h=a[c++],d=c==a.length||!i,p=d?e:e.split(),m=this.tokens.mainToken;if(p.apply(u,f,m?m.start:p.pos,h),Ft&&console.log(o+this.stackID(p)+` (via ${u&65536?`reduce of ${s.getName(u&65535)}`:"shift"} for ${s.getName(f)} @ ${r}${p==e?"":", split"})`),d)return!0;p.pos>r?n.push(p):i.push(p)}return!1}advanceFully(e,n){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return _m(e,n),!0}}runRecovery(e,n,i){let r=null,s=!1;for(let o=0;o<e.length;o++){let l=e[o],a=n[o<<1],c=n[(o<<1)+1],u=Ft?this.stackID(l)+" -> ":"";if(l.deadEnd&&(s||(s=!0,l.restart(),Ft&&console.log(u+this.stackID(l)+" (restarted)"),this.advanceFully(l,i))))continue;let f=l.split(),h=u;for(let d=0;f.forceReduce()&&d<10&&(Ft&&console.log(h+this.stackID(f)+" (via force-reduce)"),!this.advanceFully(f,i));d++)Ft&&(h=this.stackID(f)+" -> ");for(let d of l.recoverByInsert(a))Ft&&console.log(u+this.stackID(d)+" (via recover-insert)"),this.advanceFully(d,i);this.stream.end>l.pos?(c==l.pos&&(c++,a=0),l.recoverByDelete(a,c),Ft&&console.log(u+this.stackID(l)+` (via recover-delete ${this.parser.getName(a)})`),_m(l,i)):(!r||r.score<l.score)&&(r=l)}return r}stackToTree(e){return e.close(),qe.build({buffer:aa.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let n=(Ec||(Ec=new WeakMap)).get(e);return n||Ec.set(e,n=String.fromCodePoint(this.nextStackID++)),n+e}}function _m(t,e){for(let n=0;n<e.length;n++){let i=e[n];if(i.pos==t.pos&&i.sameState(t)){e[n].score<t.score&&(e[n]=t);return}}e.push(t)}class EN{constructor(e,n,i){this.source=e,this.flags=n,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}const Pc=t=>t;class PN{constructor(e){this.start=e.start,this.shift=e.shift||Pc,this.reduce=e.reduce||Pc,this.reuse=e.reuse||Pc,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class so extends wb{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let n=e.nodeNames.split(" ");this.minRepeatTerm=n.length;for(let l=0;l<e.repeatNodeCount;l++)n.push("");let i=Object.keys(e.topRules).map(l=>e.topRules[l][1]),r=[];for(let l=0;l<n.length;l++)r.push([]);function s(l,a,c){r[l].push([a,a.deserialize(String(c))])}if(e.nodeProps)for(let l of e.nodeProps){let a=l[0];typeof a=="string"&&(a=ue[a]);for(let c=1;c<l.length;){let u=l[c++];if(u>=0)s(u,a,l[c++]);else{let f=l[c+-u];for(let h=-u;h>0;h--)s(l[c++],a,f);c++}}}this.nodeSet=new ih(n.map((l,a)=>It.define({name:a>=this.minRepeatTerm?void 0:l,id:a,props:r[a],top:i.indexOf(a)>-1,error:a==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(a)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=gb;let o=ul(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map($m),this.states=ul(e.states,Uint32Array),this.data=ul(e.stateData),this.goto=ul(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new Mr(o,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,n,i){let r=new TN(this,e,n,i);for(let s of this.wrappers)r=s(r,e,n,i);return r}getGoto(e,n,i=!1){let r=this.goto;if(n>=r[0])return-1;for(let s=r[n+1];;){let o=r[s++],l=o&1,a=r[s++];if(l&&i)return a;for(let c=s+(o>>1);s<c;s++)if(r[s]==e)return a;if(l)return-1}}hasAction(e,n){let i=this.data;for(let r=0;r<2;r++)for(let s=this.stateSlot(e,r?2:1),o;;s+=3){if((o=i[s])==65535)if(i[s+1]==1)o=i[s=Wn(i,s+2)];else{if(i[s+1]==2)return Wn(i,s+2);break}if(o==n||o==0)return Wn(i,s+1)}return 0}stateSlot(e,n){return this.states[e*6+n]}stateFlag(e,n){return(this.stateSlot(e,0)&n)>0}validAction(e,n){return!!this.allActions(e,i=>i==n?!0:null)}allActions(e,n){let i=this.stateSlot(e,4),r=i?n(i):void 0;for(let s=this.stateSlot(e,1);r==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=Wn(this.data,s+2);else break;r=n(Wn(this.data,s+1))}return r}nextStates(e){let n=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=Wn(this.data,i+2);else break;if(!(this.data[i+2]&1)){let r=this.data[i+1];n.some((s,o)=>o&1&&s==r)||n.push(this.data[i],r)}}return n}configure(e){let n=Object.assign(Object.create(so.prototype),this);if(e.props&&(n.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);n.top=i}return e.tokenizers&&(n.tokenizers=this.tokenizers.map(i=>{let r=e.tokenizers.find(s=>s.from==i);return r?r.to:i})),e.specializers&&(n.specializers=this.specializers.slice(),n.specializerSpecs=this.specializerSpecs.map((i,r)=>{let s=e.specializers.find(l=>l.from==i.external);if(!s)return i;let o=Object.assign(Object.assign({},i),{external:s.to});return n.specializers[r]=$m(o),o})),e.contextTracker&&(n.context=e.contextTracker),e.dialect&&(n.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(n.strict=e.strict),e.wrap&&(n.wrappers=n.wrappers.concat(e.wrap)),e.bufferLength!=null&&(n.bufferLength=e.bufferLength),n}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let n=this.dynamicPrecedences;return n==null?0:n[e]||0}parseDialect(e){let n=Object.keys(this.dialects),i=n.map(()=>!1);if(e)for(let s of e.split(" ")){let o=n.indexOf(s);o>=0&&(i[o]=!0)}let r=null;for(let s=0;s<n.length;s++)if(!i[s])for(let o=this.dialects[n[s]],l;(l=this.data[o++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[l]=1;return new EN(e,i,r)}static deserialize(e){return new so(e)}}function Wn(t,e){return t[e]|t[e+1]<<16}function MN(t){let e=null;for(let n of t){let i=n.p.stoppedAt;(n.pos==n.p.stream.end||i!=null&&n.pos>i)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}function $m(t){if(t.external){let e=t.extend?1:0;return(n,i)=>t.external(n,i)<<1|e}return t.get}const mr=63,Vm=64,RN=1,DN=2,jv=3,LN=4,zv=5,BN=6,IN=7,qv=65,NN=66,FN=8,_N=9,$N=10,VN=11,HN=12,Uv=13,WN=19,jN=20,zN=29,qN=33,UN=34,QN=47,KN=0,xh=1,Zu=2,oo=3,ef=4;class Di{constructor(e,n,i){this.parent=e,this.depth=n,this.type=i,this.hash=(e?e.hash+e.hash<<8:0)+n+(n<<4)+i}}Di.top=new Di(null,-1,KN);function Is(t,e){for(let n=0,i=e-t.pos-1;;i--,n++){let r=t.peek(i);if(Xn(r)||r==-1)return n}}function tf(t){return t==32||t==9}function Xn(t){return t==10||t==13}function Qv(t){return tf(t)||Xn(t)}function $i(t){return t<0||Qv(t)}const XN=new PN({start:Di.top,reduce(t,e){return t.type==oo&&(e==jN||e==UN)?t.parent:t},shift(t,e,n,i){if(e==jv)return new Di(t,Is(i,i.pos),xh);if(e==qv||e==zv)return new Di(t,Is(i,i.pos),Zu);if(e==mr)return t.parent;if(e==WN||e==qN)return new Di(t,0,oo);if(e==Uv&&t.type==ef)return t.parent;if(e==QN){let r=/[1-9]/.exec(i.read(i.pos,n.pos));if(r)return new Di(t,t.depth+ +r[0],ef)}return t},hash(t){return t.hash}});function Ur(t,e,n=0){return t.peek(n)==e&&t.peek(n+1)==e&&t.peek(n+2)==e&&$i(t.peek(n+3))}const GN=new ja((t,e)=>{if(t.next==-1&&e.canShift(Vm))return t.acceptToken(Vm);let n=t.peek(-1);if((Xn(n)||n<0)&&e.context.type!=oo){if(Ur(t,45))if(e.canShift(mr))t.acceptToken(mr);else return t.acceptToken(RN,3);if(Ur(t,46))if(e.canShift(mr))t.acceptToken(mr);else return t.acceptToken(DN,3);let i=0;for(;t.next==32;)i++,t.advance();(i<e.context.depth||i==e.context.depth&&e.context.type==xh&&(t.next!=45||!$i(t.peek(1))))&&t.next!=-1&&!Xn(t.next)&&t.next!=35&&t.acceptToken(mr,-i)}},{contextual:!0}),YN=new ja((t,e)=>{if(e.context.type==oo){t.next==63&&(t.advance(),$i(t.next)&&t.acceptToken(IN));return}if(t.next==45)t.advance(),$i(t.next)&&t.acceptToken(e.context.type==xh&&e.context.depth==Is(t,t.pos-1)?LN:jv);else if(t.next==63)t.advance(),$i(t.next)&&t.acceptToken(e.context.type==Zu&&e.context.depth==Is(t,t.pos-1)?BN:zv);else{let n=t.pos;for(;;)if(tf(t.next)){if(t.pos==n)return;t.advance()}else if(t.next==33)Kv(t);else if(t.next==38)nf(t);else if(t.next==42){nf(t);break}else if(t.next==39||t.next==34){if(Sh(t,!0))break;return}else if(t.next==91||t.next==123){if(!ZN(t))return;break}else{Xv(t,!0,!1,0);break}for(;tf(t.next);)t.advance();if(t.next==58){if(t.pos==n&&e.canShift(zN))return;let i=t.peek(1);$i(i)&&t.acceptTokenTo(e.context.type==Zu&&e.context.depth==Is(t,n)?NN:qv,n)}}},{contextual:!0});function JN(t){return t>32&&t<127&&t!=34&&t!=37&&t!=44&&t!=60&&t!=62&&t!=92&&t!=94&&t!=96&&t!=123&&t!=124&&t!=125}function Hm(t){return t>=48&&t<=57||t>=97&&t<=102||t>=65&&t<=70}function Wm(t,e){return t.next==37?(t.advance(),Hm(t.next)&&t.advance(),Hm(t.next)&&t.advance(),!0):JN(t.next)||e&&t.next==44?(t.advance(),!0):!1}function Kv(t){if(t.advance(),t.next==60){for(t.advance();;)if(!Wm(t,!0)){t.next==62&&t.advance();break}}else for(;Wm(t,!1););}function nf(t){for(t.advance();!$i(t.next)&&ca(t.tag)!="f";)t.advance()}function Sh(t,e){let n=t.next,i=!1,r=t.pos;for(t.advance();;){let s=t.next;if(s<0)break;if(t.advance(),s==n)if(s==39)if(t.next==39)t.advance();else break;else break;else if(s==92&&n==34)t.next>=0&&t.advance();else if(Xn(s)){if(e)return!1;i=!0}else if(e&&t.pos>=r+1024)return!1}return!i}function ZN(t){for(let e=[],n=t.pos+1024;;)if(t.next==91||t.next==123)e.push(t.next),t.advance();else if(t.next==39||t.next==34){if(!Sh(t,!0))return!1}else if(t.next==93||t.next==125){if(e[e.length-1]!=t.next-2)return!1;if(e.pop(),t.advance(),!e.length)return!0}else{if(t.next<0||t.pos>n||Xn(t.next))return!1;t.advance()}}const eF="iiisiiissisfissssssssssssisssiiissssssssssssssssssssssssssfsfssissssssssssssssssssssssssssfif";function ca(t){return t<33?"u":t>125?"s":eF[t-33]}function Mc(t,e){let n=ca(t);return n!="u"&&!(e&&n=="f")}function Xv(t,e,n,i){if(ca(t.next)=="s"||(t.next==63||t.next==58||t.next==45)&&Mc(t.peek(1),n))t.advance();else return!1;let r=t.pos;for(;;){let s=t.next,o=0,l=i+1;for(;Qv(s);){if(Xn(s)){if(e)return!1;l=0}else l++;s=t.peek(++o)}if(!(s>=0&&(s==58?Mc(t.peek(o+1),n):s==35?t.peek(o-1)!=32:Mc(s,n)))||!n&&l<=i||l==0&&!n&&(Ur(t,45,o)||Ur(t,46,o)))break;if(e&&ca(s)=="f")return!1;for(let c=o;c>=0;c--)t.advance();if(e&&t.pos>r+1024)return!1}return!0}const tF=new ja((t,e)=>{if(t.next==33)Kv(t),t.acceptToken(HN);else if(t.next==38||t.next==42){let n=t.next==38?$N:VN;nf(t),t.acceptToken(n)}else t.next==39||t.next==34?(Sh(t,!1),t.acceptToken(_N)):Xv(t,!1,e.context.type==oo,e.context.depth)&&t.acceptToken(FN)}),nF=new ja((t,e)=>{let n=e.context.type==ef?e.context.depth:-1,i=t.pos;e:for(;;){let r=0,s=t.next;for(;s==32;)s=t.peek(++r);if(!r&&(Ur(t,45,r)||Ur(t,46,r))||!Xn(s)&&(n<0&&(n=Math.max(e.context.depth+1,r)),r<n))break;for(;;){if(t.next<0)break e;let o=Xn(t.next);if(t.advance(),o)continue e;i=t.pos}}t.acceptTokenTo(Uv,i)}),iF=lh({DirectiveName:C.keyword,DirectiveContent:C.attributeValue,"DirectiveEnd DocEnd":C.meta,QuotedLiteral:C.string,BlockLiteralHeader:C.special(C.string),BlockLiteralContent:C.content,Literal:C.content,"Key/Literal Key/QuotedLiteral":C.definition(C.propertyName),"Anchor Alias":C.labelName,Tag:C.typeName,Comment:C.lineComment,": , -":C.separator,"?":C.punctuation,"[ ]":C.squareBracket,"{ }":C.brace}),rF=so.deserialize({version:14,states:"5lQ!ZQgOOO#PQfO'#CpO#uQfO'#DOOOQR'#Dv'#DvO$qQgO'#DRO%gQdO'#DUO%nQgO'#DUO&ROaO'#D[OOQR'#Du'#DuO&{QgO'#D^O'rQgO'#D`OOQR'#Dt'#DtO(iOqO'#DbOOQP'#Dj'#DjO(zQaO'#CmO)YQgO'#CmOOQP'#Cm'#CmQ)jQaOOQ)uQgOOQ]QgOOO*PQdO'#CrO*nQdO'#CtOOQO'#Dw'#DwO+]Q`O'#CxO+hQdO'#CwO+rQ`O'#CwOOQO'#Cv'#CvO+wQdO'#CvOOQO'#Cq'#CqO,UQ`O,59[O,^QfO,59[OOQR,59[,59[OOQO'#Cx'#CxO,eQ`O'#DPO,pQdO'#DPOOQO'#Dx'#DxO,zQdO'#DxO-XQ`O,59jO-aQfO,59jOOQR,59j,59jOOQR'#DS'#DSO-hQcO,59mO-sQgO'#DVO.TQ`O'#DVO.YQcO,59pOOQR'#DX'#DXO#|QfO'#DWO.hQcO'#DWOOQR,59v,59vO.yOWO,59vO/OOaO,59vO/WOaO,59vO/cQgO'#D_OOQR,59x,59xO0VQgO'#DaOOQR,59z,59zOOQP,59|,59|O0yOaO,59|O1ROaO,59|O1aOqO,59|OOQP-E7h-E7hO1oQgO,59XOOQP,59X,59XO2PQaO'#DeO2_QgO'#DeO2oQgO'#DkOOQP'#Dk'#DkQ)jQaOOO3PQdO'#CsOOQO,59^,59^O3kQdO'#CuOOQO,59`,59`OOQO,59c,59cO4VQdO,59cO4aQdO'#CzO4kQ`O'#CzOOQO,59b,59bOOQU,5:Q,5:QOOQR1G.v1G.vO4pQ`O1G.vOOQU-E7d-E7dO4xQdO,59kOOQO,59k,59kO5SQdO'#DQO5^Q`O'#DQOOQO,5:d,5:dOOQU,5:R,5:ROOQR1G/U1G/UO5cQ`O1G/UOOQU-E7e-E7eO5kQgO'#DhO5xQcO1G/XOOQR1G/X1G/XOOQR,59q,59qO6TQgO,59qO6eQdO'#DiO6lQgO'#DiO7PQcO1G/[OOQR1G/[1G/[OOQR,59r,59rO#|QfO,59rOOQR1G/b1G/bO7_OWO1G/bO7dOaO1G/bOOQR,59y,59yOOQR,59{,59{OOQP1G/h1G/hO7lOaO1G/hO7tOaO1G/hO8POaO1G/hOOQP1G.s1G.sO8_QgO,5:POOQP,5:P,5:POOQP,5:V,5:VOOQP-E7i-E7iOOQO,59_,59_OOQO,59a,59aOOQO1G.}1G.}OOQO,59f,59fO8oQdO,59fOOQR7+$b7+$bP,XQ`O'#DfOOQO1G/V1G/VOOQO,59l,59lO8yQdO,59lOOQR7+$p7+$pP9TQ`O'#DgOOQR'#DT'#DTOOQR,5:S,5:SOOQR-E7f-E7fOOQR7+$s7+$sOOQR1G/]1G/]O9YQgO'#DYO9jQ`O'#DYOOQR,5:T,5:TO#|QfO'#DZO9oQcO'#DZOOQR-E7g-E7gOOQR7+$v7+$vOOQR1G/^1G/^OOQR7+$|7+$|O:QOWO7+$|OOQP7+%S7+%SO:VOaO7+%SO:_OaO7+%SOOQP1G/k1G/kOOQO1G/Q1G/QOOQO1G/W1G/WOOQR,59t,59tO:jQgO,59tOOQR,59u,59uO#|QfO,59uOOQR<<Hh<<HhOOQP<<Hn<<HnO:zOaO<<HnOOQR1G/`1G/`OOQR1G/a1G/aOOQPAN>YAN>Y",stateData:";S~O!fOS!gOS^OS~OP_OQbORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!V[O!cTO~O`cO~P]OVkOWROXROYeOZfO[dOcPOmhOqQO~OboO~P!bOVtOWROXROYeOZfO[dOcPOmrOqQO~OpwO~P#WORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!cTO~OSvP!avP!bvP~P#|OWROXROYeOZfO[dOcPOqQO~OmzO~P%OOm!OOUzP!azP!bzP!dzP~P#|O^!SO!b!QO!f!TO!g!RO~ORSOTUOWROXROcPOqQO!PVO!cTO~OY!UOP!QXQ!QX!V!QX!`!QXS!QX!a!QX!b!QXU!QXm!QX!d!QX~P&aO[!WOP!SXQ!SX!V!SX!`!SXS!SX!a!SX!b!SXU!SXm!SX!d!SX~P&aO^!ZO!W![O!b!YO!f!]O!g!YO~OP!_O!V[OQaX!`aX~OPaXQaX!VaX!`aX~P#|OP!bOQ!cO!V[O~OP_O!V[O~P#|OWROXROY!fOcPOqQObfXmfXofXpfX~OWROXRO[!hOcPOqQObhXmhXohXphX~ObeXmlXoeX~ObkXokX~P%OOm!kO~Om!lObnPonP~P%OOb!pOo!oO~Ob!pO~P!bOm!sOosXpsX~OosXpsX~P%OOm!uOotPptP~P%OOo!xOp!yO~Op!yO~P#WOS!|O!a#OO!b#OO~OUyX!ayX!byX!dyX~P#|Om#QO~OU#SO!a#UO!b#UO!d#RO~Om#WOUzX!azX!bzX!dzX~O]#XO~O!b#XO!g#YO~O^#ZO!b#XO!g#YO~OP!RXQ!RX!V!RX!`!RXS!RX!a!RX!b!RXU!RXm!RX!d!RX~P&aOP!TXQ!TX!V!TX!`!TXS!TX!a!TX!b!TXU!TXm!TX!d!TX~P&aO!b#^O!g#^O~O^#_O!b#^O!f#`O!g#^O~O^#_O!W#aO!b#^O!g#^O~OPaaQaa!Vaa!`aa~P#|OP#cO!V[OQ!XX!`!XX~OP!XXQ!XX!V!XX!`!XX~P#|OP_O!V[OQ!_X!`!_X~P#|OWROXROcPOqQObgXmgXogXpgX~OWROXROcPOqQObiXmiXoiXpiX~Obkaoka~P%OObnXonX~P%OOm#kO~Ob#lOo!oO~Oosapsa~P%OOotXptX~P%OOm#pO~Oo!xOp#qO~OSwP!awP!bwP~P#|OS!|O!a#vO!b#vO~OUya!aya!bya!dya~P#|Om#xO~P%OOm#{OU}P!a}P!b}P!d}P~P#|OU#SO!a$OO!b$OO!d#RO~O]$QO~O!b$QO!g$RO~O!b$SO!g$SO~O^$TO!b$SO!g$SO~O^$TO!b$SO!f$UO!g$SO~OP!XaQ!Xa!V!Xa!`!Xa~P#|Obnaona~P%OOotapta~P%OOo!xO~OU|X!a|X!b|X!d|X~P#|Om$ZO~Om$]OU}X!a}X!b}X!d}X~O]$^O~O!b$_O!g$_O~O^$`O!b$_O!g$_O~OU|a!a|a!b|a!d|a~P#|O!b$cO!g$cO~O",goto:",]!mPPPPPPPPPPPPPPPPP!nPP!v#v#|$`#|$c$f$j$nP%VPPP!v%Y%^%a%{&O%a&R&U&X&_&b%aP&e&{&e'O'RPP']'a'g'm's'y(XPPPPPPPP(_)e*X+c,VUaObcR#e!c!{ROPQSTUXY_bcdehknrtvz!O!U!W!_!b!c!f!h!k!l!s!u!|#Q#R#S#W#c#k#p#x#{$Z$]QmPR!qnqfPQThknrtv!k!l!s!u#R#k#pR!gdR!ieTlPnTjPnSiPnSqQvQ{TQ!mkQ!trQ!vtR#y#RR!nkTsQvR!wt!RWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]RySR#t!|R|TR|UQ!PUR#|#SR#z#RR#z#SyZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]R!VXR!XYa]O^abc!a!c!eT!da!eQnPR!rnQvQR!{vQ!}yR#u!}Q#T|R#}#TW^Obc!cS!^^!aT!aa!eQ!eaR#f!eW`Obc!cQxSS}U#SQ!`_Q#PzQ#V!OQ#b!_Q#d!bQ#s!|Q#w#QQ$P#WQ$V#cQ$Y#xQ$[#{Q$a$ZR$b$]xZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]Q!VXQ!XYQ#[!UR#]!W!QWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]pfPQThknrtv!k!l!s!u#R#k#pQ!gdQ!ieQ#g!fR#h!hSgPn^pQTkrtv#RQ!jhQ#i!kQ#j!lQ#n!sQ#o!uQ$W#kR$X#pQuQR!zv",nodeNames:"⚠ DirectiveEnd DocEnd - - ? ? ? Literal QuotedLiteral Anchor Alias Tag BlockLiteralContent Comment Stream BOM Document ] [ FlowSequence Item Tagged Anchored Anchored Tagged FlowMapping Pair Key : Pair , } { FlowMapping Pair Pair BlockSequence Item Item BlockMapping Pair Pair Key Pair Pair BlockLiteral BlockLiteralHeader Tagged Anchored Anchored Tagged Directive DirectiveName DirectiveContent Document",maxTerm:74,context:XN,nodeProps:[["isolate",-3,8,9,14,""],["openedBy",18,"[",32,"{"],["closedBy",19,"]",33,"}"]],propSources:[iF],skippedNodes:[0],repeatNodeCount:6,tokenData:"-Y~RnOX#PXY$QYZ$]Z]#P]^$]^p#Ppq$Qqs#Pst$btu#Puv$yv|#P|}&e}![#P![!]'O!]!`#P!`!a'i!a!}#P!}#O*g#O#P#P#P#Q+Q#Q#o#P#o#p+k#p#q'i#q#r,U#r;'S#P;'S;=`#z<%l?HT#P?HT?HU,o?HUO#PQ#UU!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PQ#kTOY#PZs#Pt;'S#P;'S;=`#z<%lO#PQ#}P;=`<%l#P~$VQ!f~XY$Qpq$Q~$bO!g~~$gS^~OY$bZ;'S$b;'S;=`$s<%lO$b~$vP;=`<%l$bR%OX!WQOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR%rX!WQ!VPOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR&bP;=`<%l%kR&lUoP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'VUmP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'p[!PP!WQOY#PZp#Ppq#hq{#P{|(f|}#P}!O(f!O!R#P!R![)p![;'S#P;'S;=`#z<%lO#PR(mW!PP!WQOY#PZp#Ppq#hq!R#P!R![)V![;'S#P;'S;=`#z<%lO#PR)^U!PP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR)wY!PP!WQOY#PZp#Ppq#hq{#P{|)V|}#P}!O)V!O;'S#P;'S;=`#z<%lO#PR*nUcP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+XUbP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+rUqP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,]UpP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,vU`P!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#P",tokenizers:[GN,YN,tF,nF,0,1],topRules:{Stream:[0,15]},tokenPrec:0}),sF=so.deserialize({version:14,states:"!vOQOPOOO]OPO'#C_OhOPO'#C^OOOO'#Cc'#CcOpOPO'#CaQOOOOOO{OPOOOOOO'#Cb'#CbO!WOPO'#C`O!`OPO,58xOOOO-E6a-E6aOOOO-E6`-E6`OOOO'#C_'#C_OOOO1G.d1G.d",stateData:"!h~OXPOYROWTP~OWVXXRXYRX~OYVOXSP~OXROYROWTX~OXROYROWTP~OYVOXSX~OX[O~OXY~",goto:"vWPPX[beioRUOQQOR]XRXQTTOUQWQRZWSSOURYS",nodeNames:"⚠ Document Frontmatter DashLine FrontmatterContent Body",maxTerm:10,skippedNodes:[0],repeatNodeCount:2,tokenData:"$z~RXOYnYZ!^Z]n]^!^^}n}!O!i!O;'Sn;'S;=`!c<%lOn~qXOYnYZ!^Z]n]^!^^;'Sn;'S;=`!c<%l~n~On~~!^~!cOY~~!fP;=`<%ln~!lZOYnYZ!^Z]n]^!^^}n}!O#_!O;'Sn;'S;=`!c<%l~n~On~~!^~#bZOYnYZ!^Z]n]^!^^}n}!O$T!O;'Sn;'S;=`!c<%l~n~On~~!^~$WXOYnYZ$sZ]n]^$s^;'Sn;'S;=`!c<%l~n~On~~$s~$zOX~Y~",tokenizers:[0],topRules:{Document:[0,1]},tokenPrec:67}),oF=Js.define({name:"yaml",parser:rF.configure({props:[kb.add({Stream:t=>{for(let e=t.node.resolve(t.pos,-1);e&&e.to>=t.pos;e=e.parent){if(e.name=="BlockLiteralContent"&&e.from<e.to)return t.baseIndentFor(e);if(e.name=="BlockLiteral")return t.baseIndentFor(e)+t.unit;if(e.name=="BlockSequence"||e.name=="BlockMapping")return t.column(e.from,1);if(e.name=="QuotedLiteral")return null;if(e.name=="Literal"){let n=t.column(e.from,1);if(n==t.lineIndent(e.from,1))return n;if(e.to>t.pos)return null}}return null},FlowMapping:rm({closing:"}"}),FlowSequence:rm({closing:"]"})}),Tb.add({"FlowMapping FlowSequence":YD,"BlockSequence Pair BlockLiteral":(t,e)=>({from:e.doc.lineAt(t.from).to,to:t.to})})]}),languageData:{commentTokens:{line:"#"},indentOnInput:/^\s*[\]\}]$/}});function lF(){return new VD(oF)}C.meta;const aF="#e5c07b",jm="#e06c75",cF="#56b6c2",uF="#ffffff",El="#abb2bf",rf="#7d8799",fF="#61afef",hF="#98c379",zm="#d19a66",dF="#c678dd",pF="#21252b",qm="#2c313a",Um="#282c34",Rc="#353a42",mF="#3E4451",Qm="#528bff",gF=z.theme({"&":{color:El,backgroundColor:Um},".cm-content":{caretColor:Qm},".cm-cursor, .cm-dropCursor":{borderLeftColor:Qm},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:mF},".cm-panels":{backgroundColor:pF,color:El},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Um,color:rf,border:"none"},".cm-activeLineGutter":{backgroundColor:qm},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Rc},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Rc,borderBottomColor:Rc},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:qm,color:El}}},{dark:!0}),yF=Ao.define([{tag:C.keyword,color:dF},{tag:[C.name,C.deleted,C.character,C.propertyName,C.macroName],color:jm},{tag:[C.function(C.variableName),C.labelName],color:fF},{tag:[C.color,C.constant(C.name),C.standard(C.name)],color:zm},{tag:[C.definition(C.name),C.separator],color:El},{tag:[C.typeName,C.className,C.number,C.changed,C.annotation,C.modifier,C.self,C.namespace],color:aF},{tag:[C.operator,C.operatorKeyword,C.url,C.escape,C.regexp,C.link,C.special(C.string)],color:cF},{tag:[C.meta,C.comment],color:rf},{tag:C.strong,fontWeight:"bold"},{tag:C.emphasis,fontStyle:"italic"},{tag:C.strikethrough,textDecoration:"line-through"},{tag:C.link,color:rf,textDecoration:"underline"},{tag:C.heading,fontWeight:"bold",color:jm},{tag:[C.atom,C.bool,C.special(C.variableName)],color:zm},{tag:[C.processingInstruction,C.string,C.inserted],color:hF},{tag:C.invalid,color:uF}]),bF=[gF,Nb(yF)],vF=Z({__name:"yaml",props:{modelValue:{type:String||Object,default:""}},emits:["update:modelValue","update:textVal"],setup(t,{emit:e}){const n=t,i=e,r=j(""),s=[lF(),bF],o=l=>{r.value=l,i("update:modelValue",r.value)};return re(()=>n.modelValue,(l,a)=>{r.value=l},{immediate:!0}),(l,a)=>(B(),ne(w(wN),{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=c=>r.value=c),ref:"mycodemirror",autofocus:!0,extensions:s,"indent-with-tab":!0,onChange:o,"tab-size":2,style:{"margin-top":"10px",height:"calc(100% - 60px)"}},null,8,["modelValue"]))}});/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function Gv(t){return typeof t>"u"||t===null}function wF(t){return typeof t=="object"&&t!==null}function xF(t){return Array.isArray(t)?t:Gv(t)?[]:[t]}function SF(t,e){var n,i,r,s;if(e)for(s=Object.keys(e),n=0,i=s.length;n<i;n+=1)r=s[n],t[r]=e[r];return t}function OF(t,e){var n="",i;for(i=0;i<e;i+=1)n+=t;return n}function kF(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var CF=Gv,AF=wF,TF=xF,EF=OF,PF=kF,MF=SF,Ge={isNothing:CF,isObject:AF,toArray:TF,repeat:EF,isNegativeZero:PF,extend:MF};function Yv(t,e){var n="",i=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+=`

`+t.mark.snippet),i+" "+n):i}function lo(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Yv(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}lo.prototype=Object.create(Error.prototype);lo.prototype.constructor=lo;lo.prototype.toString=function(e){return this.name+": "+Yv(this,e)};var wt=lo;function Dc(t,e,n,i,r){var s="",o="",l=Math.floor(r/2)-1;return i-e>l&&(s=" ... ",e=i-l+s.length),n-i>l&&(o=" ...",n=i+l-o.length),{str:s+t.slice(e,n).replace(/\t/g,"→")+o,pos:i-e+s.length}}function Lc(t,e){return Ge.repeat(" ",e-t.length)+t}function RF(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var n=/\r?\n|\r|\0/g,i=[0],r=[],s,o=-1;s=n.exec(t.buffer);)r.push(s.index),i.push(s.index+s[0].length),t.position<=s.index&&o<0&&(o=i.length-2);o<0&&(o=i.length-1);var l="",a,c,u=Math.min(t.line+e.linesAfter,r.length).toString().length,f=e.maxLength-(e.indent+u+3);for(a=1;a<=e.linesBefore&&!(o-a<0);a++)c=Dc(t.buffer,i[o-a],r[o-a],t.position-(i[o]-i[o-a]),f),l=Ge.repeat(" ",e.indent)+Lc((t.line-a+1).toString(),u)+" | "+c.str+`
`+l;for(c=Dc(t.buffer,i[o],r[o],t.position,f),l+=Ge.repeat(" ",e.indent)+Lc((t.line+1).toString(),u)+" | "+c.str+`
`,l+=Ge.repeat("-",e.indent+u+3+c.pos)+`^
`,a=1;a<=e.linesAfter&&!(o+a>=r.length);a++)c=Dc(t.buffer,i[o+a],r[o+a],t.position-(i[o]-i[o+a]),f),l+=Ge.repeat(" ",e.indent)+Lc((t.line+a+1).toString(),u)+" | "+c.str+`
`;return l.replace(/\n$/,"")}var DF=RF,LF=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],BF=["scalar","sequence","mapping"];function IF(t){var e={};return t!==null&&Object.keys(t).forEach(function(n){t[n].forEach(function(i){e[String(i)]=n})}),e}function NF(t,e){if(e=e||{},Object.keys(e).forEach(function(n){if(LF.indexOf(n)===-1)throw new wt('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(n){return n},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=IF(e.styleAliases||null),BF.indexOf(this.kind)===-1)throw new wt('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var at=NF;function Km(t,e){var n=[];return t[e].forEach(function(i){var r=n.length;n.forEach(function(s,o){s.tag===i.tag&&s.kind===i.kind&&s.multi===i.multi&&(r=o)}),n[r]=i}),n}function FF(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,n;function i(r){r.multi?(t.multi[r.kind].push(r),t.multi.fallback.push(r)):t[r.kind][r.tag]=t.fallback[r.tag]=r}for(e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(i);return t}function sf(t){return this.extend(t)}sf.prototype.extend=function(e){var n=[],i=[];if(e instanceof at)i.push(e);else if(Array.isArray(e))i=i.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(i=i.concat(e.explicit));else throw new wt("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(s){if(!(s instanceof at))throw new wt("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new wt("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new wt("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(s){if(!(s instanceof at))throw new wt("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var r=Object.create(sf.prototype);return r.implicit=(this.implicit||[]).concat(n),r.explicit=(this.explicit||[]).concat(i),r.compiledImplicit=Km(r,"implicit"),r.compiledExplicit=Km(r,"explicit"),r.compiledTypeMap=FF(r.compiledImplicit,r.compiledExplicit),r};var Jv=sf,Zv=new at("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),e1=new at("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),t1=new at("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),n1=new Jv({explicit:[Zv,e1,t1]});function _F(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function $F(){return null}function VF(t){return t===null}var i1=new at("tag:yaml.org,2002:null",{kind:"scalar",resolve:_F,construct:$F,predicate:VF,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function HF(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function WF(t){return t==="true"||t==="True"||t==="TRUE"}function jF(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var r1=new at("tag:yaml.org,2002:bool",{kind:"scalar",resolve:HF,construct:WF,predicate:jF,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function zF(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function qF(t){return 48<=t&&t<=55}function UF(t){return 48<=t&&t<=57}function QF(t){if(t===null)return!1;var e=t.length,n=0,i=!1,r;if(!e)return!1;if(r=t[n],(r==="-"||r==="+")&&(r=t[++n]),r==="0"){if(n+1===e)return!0;if(r=t[++n],r==="b"){for(n++;n<e;n++)if(r=t[n],r!=="_"){if(r!=="0"&&r!=="1")return!1;i=!0}return i&&r!=="_"}if(r==="x"){for(n++;n<e;n++)if(r=t[n],r!=="_"){if(!zF(t.charCodeAt(n)))return!1;i=!0}return i&&r!=="_"}if(r==="o"){for(n++;n<e;n++)if(r=t[n],r!=="_"){if(!qF(t.charCodeAt(n)))return!1;i=!0}return i&&r!=="_"}}if(r==="_")return!1;for(;n<e;n++)if(r=t[n],r!=="_"){if(!UF(t.charCodeAt(n)))return!1;i=!0}return!(!i||r==="_")}function KF(t){var e=t,n=1,i;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),i=e[0],(i==="-"||i==="+")&&(i==="-"&&(n=-1),e=e.slice(1),i=e[0]),e==="0")return 0;if(i==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}function XF(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Ge.isNegativeZero(t)}var s1=new at("tag:yaml.org,2002:int",{kind:"scalar",resolve:QF,construct:KF,predicate:XF,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),GF=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function YF(t){return!(t===null||!GF.test(t)||t[t.length-1]==="_")}function JF(t){var e,n;return e=t.replace(/_/g,"").toLowerCase(),n=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:n*parseFloat(e,10)}var ZF=/^[-+]?[0-9]+e/;function e_(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ge.isNegativeZero(t))return"-0.0";return n=t.toString(10),ZF.test(n)?n.replace("e",".e"):n}function t_(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Ge.isNegativeZero(t))}var o1=new at("tag:yaml.org,2002:float",{kind:"scalar",resolve:YF,construct:JF,predicate:t_,represent:e_,defaultStyle:"lowercase"}),l1=n1.extend({implicit:[i1,r1,s1,o1]}),a1=l1,c1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),u1=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function n_(t){return t===null?!1:c1.exec(t)!==null||u1.exec(t)!==null}function i_(t){var e,n,i,r,s,o,l,a=0,c=null,u,f,h;if(e=c1.exec(t),e===null&&(e=u1.exec(t)),e===null)throw new Error("Date resolve error");if(n=+e[1],i=+e[2]-1,r=+e[3],!e[4])return new Date(Date.UTC(n,i,r));if(s=+e[4],o=+e[5],l=+e[6],e[7]){for(a=e[7].slice(0,3);a.length<3;)a+="0";a=+a}return e[9]&&(u=+e[10],f=+(e[11]||0),c=(u*60+f)*6e4,e[9]==="-"&&(c=-c)),h=new Date(Date.UTC(n,i,r,s,o,l,a)),c&&h.setTime(h.getTime()-c),h}function r_(t){return t.toISOString()}var f1=new at("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:n_,construct:i_,instanceOf:Date,represent:r_});function s_(t){return t==="<<"||t===null}var h1=new at("tag:yaml.org,2002:merge",{kind:"scalar",resolve:s_}),Oh=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function o_(t){if(t===null)return!1;var e,n,i=0,r=t.length,s=Oh;for(n=0;n<r;n++)if(e=s.indexOf(t.charAt(n)),!(e>64)){if(e<0)return!1;i+=6}return i%8===0}function l_(t){var e,n,i=t.replace(/[\r\n=]/g,""),r=i.length,s=Oh,o=0,l=[];for(e=0;e<r;e++)e%4===0&&e&&(l.push(o>>16&255),l.push(o>>8&255),l.push(o&255)),o=o<<6|s.indexOf(i.charAt(e));return n=r%4*6,n===0?(l.push(o>>16&255),l.push(o>>8&255),l.push(o&255)):n===18?(l.push(o>>10&255),l.push(o>>2&255)):n===12&&l.push(o>>4&255),new Uint8Array(l)}function a_(t){var e="",n=0,i,r,s=t.length,o=Oh;for(i=0;i<s;i++)i%3===0&&i&&(e+=o[n>>18&63],e+=o[n>>12&63],e+=o[n>>6&63],e+=o[n&63]),n=(n<<8)+t[i];return r=s%3,r===0?(e+=o[n>>18&63],e+=o[n>>12&63],e+=o[n>>6&63],e+=o[n&63]):r===2?(e+=o[n>>10&63],e+=o[n>>4&63],e+=o[n<<2&63],e+=o[64]):r===1&&(e+=o[n>>2&63],e+=o[n<<4&63],e+=o[64],e+=o[64]),e}function c_(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var d1=new at("tag:yaml.org,2002:binary",{kind:"scalar",resolve:o_,construct:l_,predicate:c_,represent:a_}),u_=Object.prototype.hasOwnProperty,f_=Object.prototype.toString;function h_(t){if(t===null)return!0;var e=[],n,i,r,s,o,l=t;for(n=0,i=l.length;n<i;n+=1){if(r=l[n],o=!1,f_.call(r)!=="[object Object]")return!1;for(s in r)if(u_.call(r,s))if(!o)o=!0;else return!1;if(!o)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}function d_(t){return t!==null?t:[]}var p1=new at("tag:yaml.org,2002:omap",{kind:"sequence",resolve:h_,construct:d_}),p_=Object.prototype.toString;function m_(t){if(t===null)return!0;var e,n,i,r,s,o=t;for(s=new Array(o.length),e=0,n=o.length;e<n;e+=1){if(i=o[e],p_.call(i)!=="[object Object]"||(r=Object.keys(i),r.length!==1))return!1;s[e]=[r[0],i[r[0]]]}return!0}function g_(t){if(t===null)return[];var e,n,i,r,s,o=t;for(s=new Array(o.length),e=0,n=o.length;e<n;e+=1)i=o[e],r=Object.keys(i),s[e]=[r[0],i[r[0]]];return s}var m1=new at("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:m_,construct:g_}),y_=Object.prototype.hasOwnProperty;function b_(t){if(t===null)return!0;var e,n=t;for(e in n)if(y_.call(n,e)&&n[e]!==null)return!1;return!0}function v_(t){return t!==null?t:{}}var g1=new at("tag:yaml.org,2002:set",{kind:"mapping",resolve:b_,construct:v_}),kh=a1.extend({implicit:[f1,h1],explicit:[d1,p1,m1,g1]}),xi=Object.prototype.hasOwnProperty,ua=1,y1=2,b1=3,fa=4,Bc=1,w_=2,Xm=3,x_=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,S_=/[\x85\u2028\u2029]/,O_=/[,\[\]\{\}]/,v1=/^(?:!|!!|![a-z\-]+!)$/i,w1=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Gm(t){return Object.prototype.toString.call(t)}function Ln(t){return t===10||t===13}function Ui(t){return t===9||t===32}function Rt(t){return t===9||t===32||t===10||t===13}function xr(t){return t===44||t===91||t===93||t===123||t===125}function k_(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function C_(t){return t===120?2:t===117?4:t===85?8:0}function A_(t){return 48<=t&&t<=57?t-48:-1}function Ym(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?" ":t===76?"\u2028":t===80?"\u2029":""}function T_(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var x1=new Array(256),S1=new Array(256);for(var fr=0;fr<256;fr++)x1[fr]=Ym(fr)?1:0,S1[fr]=Ym(fr);function E_(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||kh,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function O1(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=DF(n),new wt(e,n)}function X(t,e){throw O1(t,e)}function ha(t,e){t.onWarning&&t.onWarning.call(null,O1(t,e))}var Jm={YAML:function(e,n,i){var r,s,o;e.version!==null&&X(e,"duplication of %YAML directive"),i.length!==1&&X(e,"YAML directive accepts exactly one argument"),r=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),r===null&&X(e,"ill-formed argument of the YAML directive"),s=parseInt(r[1],10),o=parseInt(r[2],10),s!==1&&X(e,"unacceptable YAML version of the document"),e.version=i[0],e.checkLineBreaks=o<2,o!==1&&o!==2&&ha(e,"unsupported YAML version of the document")},TAG:function(e,n,i){var r,s;i.length!==2&&X(e,"TAG directive accepts exactly two arguments"),r=i[0],s=i[1],v1.test(r)||X(e,"ill-formed tag handle (first argument) of the TAG directive"),xi.call(e.tagMap,r)&&X(e,'there is a previously declared suffix for "'+r+'" tag handle'),w1.test(s)||X(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{X(e,"tag prefix is malformed: "+s)}e.tagMap[r]=s}};function di(t,e,n,i){var r,s,o,l;if(e<n){if(l=t.input.slice(e,n),i)for(r=0,s=l.length;r<s;r+=1)o=l.charCodeAt(r),o===9||32<=o&&o<=1114111||X(t,"expected valid JSON character");else x_.test(l)&&X(t,"the stream contains non-printable characters");t.result+=l}}function Zm(t,e,n,i){var r,s,o,l;for(Ge.isObject(n)||X(t,"cannot merge mappings; the provided source object is unacceptable"),r=Object.keys(n),o=0,l=r.length;o<l;o+=1)s=r[o],xi.call(e,s)||(e[s]=n[s],i[s]=!0)}function Sr(t,e,n,i,r,s,o,l,a){var c,u;if(Array.isArray(r))for(r=Array.prototype.slice.call(r),c=0,u=r.length;c<u;c+=1)Array.isArray(r[c])&&X(t,"nested arrays are not supported inside keys"),typeof r=="object"&&Gm(r[c])==="[object Object]"&&(r[c]="[object Object]");if(typeof r=="object"&&Gm(r)==="[object Object]"&&(r="[object Object]"),r=String(r),e===null&&(e={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(c=0,u=s.length;c<u;c+=1)Zm(t,e,s[c],n);else Zm(t,e,s,n);else!t.json&&!xi.call(n,r)&&xi.call(e,r)&&(t.line=o||t.line,t.lineStart=l||t.lineStart,t.position=a||t.position,X(t,"duplicated mapping key")),r==="__proto__"?Object.defineProperty(e,r,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[r]=s,delete n[r];return e}function Ch(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):X(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function ze(t,e,n){for(var i=0,r=t.input.charCodeAt(t.position);r!==0;){for(;Ui(r);)r===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),r=t.input.charCodeAt(++t.position);if(e&&r===35)do r=t.input.charCodeAt(++t.position);while(r!==10&&r!==13&&r!==0);if(Ln(r))for(Ch(t),r=t.input.charCodeAt(t.position),i++,t.lineIndent=0;r===32;)t.lineIndent++,r=t.input.charCodeAt(++t.position);else break}return n!==-1&&i!==0&&t.lineIndent<n&&ha(t,"deficient indentation"),i}function za(t){var e=t.position,n;return n=t.input.charCodeAt(e),!!((n===45||n===46)&&n===t.input.charCodeAt(e+1)&&n===t.input.charCodeAt(e+2)&&(e+=3,n=t.input.charCodeAt(e),n===0||Rt(n)))}function Ah(t,e){e===1?t.result+=" ":e>1&&(t.result+=Ge.repeat(`
`,e-1))}function P_(t,e,n){var i,r,s,o,l,a,c,u,f=t.kind,h=t.result,d;if(d=t.input.charCodeAt(t.position),Rt(d)||xr(d)||d===35||d===38||d===42||d===33||d===124||d===62||d===39||d===34||d===37||d===64||d===96||(d===63||d===45)&&(r=t.input.charCodeAt(t.position+1),Rt(r)||n&&xr(r)))return!1;for(t.kind="scalar",t.result="",s=o=t.position,l=!1;d!==0;){if(d===58){if(r=t.input.charCodeAt(t.position+1),Rt(r)||n&&xr(r))break}else if(d===35){if(i=t.input.charCodeAt(t.position-1),Rt(i))break}else{if(t.position===t.lineStart&&za(t)||n&&xr(d))break;if(Ln(d))if(a=t.line,c=t.lineStart,u=t.lineIndent,ze(t,!1,-1),t.lineIndent>=e){l=!0,d=t.input.charCodeAt(t.position);continue}else{t.position=o,t.line=a,t.lineStart=c,t.lineIndent=u;break}}l&&(di(t,s,o,!1),Ah(t,t.line-a),s=o=t.position,l=!1),Ui(d)||(o=t.position+1),d=t.input.charCodeAt(++t.position)}return di(t,s,o,!1),t.result?!0:(t.kind=f,t.result=h,!1)}function M_(t,e){var n,i,r;if(n=t.input.charCodeAt(t.position),n!==39)return!1;for(t.kind="scalar",t.result="",t.position++,i=r=t.position;(n=t.input.charCodeAt(t.position))!==0;)if(n===39)if(di(t,i,t.position,!0),n=t.input.charCodeAt(++t.position),n===39)i=t.position,t.position++,r=t.position;else return!0;else Ln(n)?(di(t,i,r,!0),Ah(t,ze(t,!1,e)),i=r=t.position):t.position===t.lineStart&&za(t)?X(t,"unexpected end of the document within a single quoted scalar"):(t.position++,r=t.position);X(t,"unexpected end of the stream within a single quoted scalar")}function R_(t,e){var n,i,r,s,o,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return di(t,n,t.position,!0),t.position++,!0;if(l===92){if(di(t,n,t.position,!0),l=t.input.charCodeAt(++t.position),Ln(l))ze(t,!1,e);else if(l<256&&x1[l])t.result+=S1[l],t.position++;else if((o=C_(l))>0){for(r=o,s=0;r>0;r--)l=t.input.charCodeAt(++t.position),(o=k_(l))>=0?s=(s<<4)+o:X(t,"expected hexadecimal character");t.result+=T_(s),t.position++}else X(t,"unknown escape sequence");n=i=t.position}else Ln(l)?(di(t,n,i,!0),Ah(t,ze(t,!1,e)),n=i=t.position):t.position===t.lineStart&&za(t)?X(t,"unexpected end of the document within a double quoted scalar"):(t.position++,i=t.position)}X(t,"unexpected end of the stream within a double quoted scalar")}function D_(t,e){var n=!0,i,r,s,o=t.tag,l,a=t.anchor,c,u,f,h,d,p=Object.create(null),m,y,g,v;if(v=t.input.charCodeAt(t.position),v===91)u=93,d=!1,l=[];else if(v===123)u=125,d=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),v=t.input.charCodeAt(++t.position);v!==0;){if(ze(t,!0,e),v=t.input.charCodeAt(t.position),v===u)return t.position++,t.tag=o,t.anchor=a,t.kind=d?"mapping":"sequence",t.result=l,!0;n?v===44&&X(t,"expected the node content, but found ','"):X(t,"missed comma between flow collection entries"),y=m=g=null,f=h=!1,v===63&&(c=t.input.charCodeAt(t.position+1),Rt(c)&&(f=h=!0,t.position++,ze(t,!0,e))),i=t.line,r=t.lineStart,s=t.position,Qr(t,e,ua,!1,!0),y=t.tag,m=t.result,ze(t,!0,e),v=t.input.charCodeAt(t.position),(h||t.line===i)&&v===58&&(f=!0,v=t.input.charCodeAt(++t.position),ze(t,!0,e),Qr(t,e,ua,!1,!0),g=t.result),d?Sr(t,l,p,y,m,g,i,r,s):f?l.push(Sr(t,null,p,y,m,g,i,r,s)):l.push(m),ze(t,!0,e),v=t.input.charCodeAt(t.position),v===44?(n=!0,v=t.input.charCodeAt(++t.position)):n=!1}X(t,"unexpected end of the stream within a flow collection")}function L_(t,e){var n,i,r=Bc,s=!1,o=!1,l=e,a=0,c=!1,u,f;if(f=t.input.charCodeAt(t.position),f===124)i=!1;else if(f===62)i=!0;else return!1;for(t.kind="scalar",t.result="";f!==0;)if(f=t.input.charCodeAt(++t.position),f===43||f===45)Bc===r?r=f===43?Xm:w_:X(t,"repeat of a chomping mode identifier");else if((u=A_(f))>=0)u===0?X(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?X(t,"repeat of an indentation width identifier"):(l=e+u-1,o=!0);else break;if(Ui(f)){do f=t.input.charCodeAt(++t.position);while(Ui(f));if(f===35)do f=t.input.charCodeAt(++t.position);while(!Ln(f)&&f!==0)}for(;f!==0;){for(Ch(t),t.lineIndent=0,f=t.input.charCodeAt(t.position);(!o||t.lineIndent<l)&&f===32;)t.lineIndent++,f=t.input.charCodeAt(++t.position);if(!o&&t.lineIndent>l&&(l=t.lineIndent),Ln(f)){a++;continue}if(t.lineIndent<l){r===Xm?t.result+=Ge.repeat(`
`,s?1+a:a):r===Bc&&s&&(t.result+=`
`);break}for(i?Ui(f)?(c=!0,t.result+=Ge.repeat(`
`,s?1+a:a)):c?(c=!1,t.result+=Ge.repeat(`
`,a+1)):a===0?s&&(t.result+=" "):t.result+=Ge.repeat(`
`,a):t.result+=Ge.repeat(`
`,s?1+a:a),s=!0,o=!0,a=0,n=t.position;!Ln(f)&&f!==0;)f=t.input.charCodeAt(++t.position);di(t,n,t.position,!1)}return!0}function eg(t,e){var n,i=t.tag,r=t.anchor,s=[],o,l=!1,a;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),a=t.input.charCodeAt(t.position);a!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,X(t,"tab characters must not be used in indentation")),!(a!==45||(o=t.input.charCodeAt(t.position+1),!Rt(o))));){if(l=!0,t.position++,ze(t,!0,-1)&&t.lineIndent<=e){s.push(null),a=t.input.charCodeAt(t.position);continue}if(n=t.line,Qr(t,e,b1,!1,!0),s.push(t.result),ze(t,!0,-1),a=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&a!==0)X(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=i,t.anchor=r,t.kind="sequence",t.result=s,!0):!1}function B_(t,e,n){var i,r,s,o,l,a,c=t.tag,u=t.anchor,f={},h=Object.create(null),d=null,p=null,m=null,y=!1,g=!1,v;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=f),v=t.input.charCodeAt(t.position);v!==0;){if(!y&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,X(t,"tab characters must not be used in indentation")),i=t.input.charCodeAt(t.position+1),s=t.line,(v===63||v===58)&&Rt(i))v===63?(y&&(Sr(t,f,h,d,p,null,o,l,a),d=p=m=null),g=!0,y=!0,r=!0):y?(y=!1,r=!0):X(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,v=i;else{if(o=t.line,l=t.lineStart,a=t.position,!Qr(t,n,y1,!1,!0))break;if(t.line===s){for(v=t.input.charCodeAt(t.position);Ui(v);)v=t.input.charCodeAt(++t.position);if(v===58)v=t.input.charCodeAt(++t.position),Rt(v)||X(t,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(Sr(t,f,h,d,p,null,o,l,a),d=p=m=null),g=!0,y=!1,r=!1,d=t.tag,p=t.result;else if(g)X(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=c,t.anchor=u,!0}else if(g)X(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=c,t.anchor=u,!0}if((t.line===s||t.lineIndent>e)&&(y&&(o=t.line,l=t.lineStart,a=t.position),Qr(t,e,fa,!0,r)&&(y?p=t.result:m=t.result),y||(Sr(t,f,h,d,p,m,o,l,a),d=p=m=null),ze(t,!0,-1),v=t.input.charCodeAt(t.position)),(t.line===s||t.lineIndent>e)&&v!==0)X(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return y&&Sr(t,f,h,d,p,null,o,l,a),g&&(t.tag=c,t.anchor=u,t.kind="mapping",t.result=f),g}function I_(t){var e,n=!1,i=!1,r,s,o;if(o=t.input.charCodeAt(t.position),o!==33)return!1;if(t.tag!==null&&X(t,"duplication of a tag property"),o=t.input.charCodeAt(++t.position),o===60?(n=!0,o=t.input.charCodeAt(++t.position)):o===33?(i=!0,r="!!",o=t.input.charCodeAt(++t.position)):r="!",e=t.position,n){do o=t.input.charCodeAt(++t.position);while(o!==0&&o!==62);t.position<t.length?(s=t.input.slice(e,t.position),o=t.input.charCodeAt(++t.position)):X(t,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!Rt(o);)o===33&&(i?X(t,"tag suffix cannot contain exclamation marks"):(r=t.input.slice(e-1,t.position+1),v1.test(r)||X(t,"named tag handle cannot contain such characters"),i=!0,e=t.position+1)),o=t.input.charCodeAt(++t.position);s=t.input.slice(e,t.position),O_.test(s)&&X(t,"tag suffix cannot contain flow indicator characters")}s&&!w1.test(s)&&X(t,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{X(t,"tag name is malformed: "+s)}return n?t.tag=s:xi.call(t.tagMap,r)?t.tag=t.tagMap[r]+s:r==="!"?t.tag="!"+s:r==="!!"?t.tag="tag:yaml.org,2002:"+s:X(t,'undeclared tag handle "'+r+'"'),!0}function N_(t){var e,n;if(n=t.input.charCodeAt(t.position),n!==38)return!1;for(t.anchor!==null&&X(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Rt(n)&&!xr(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&X(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function F_(t){var e,n,i;if(i=t.input.charCodeAt(t.position),i!==42)return!1;for(i=t.input.charCodeAt(++t.position),e=t.position;i!==0&&!Rt(i)&&!xr(i);)i=t.input.charCodeAt(++t.position);return t.position===e&&X(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),xi.call(t.anchorMap,n)||X(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],ze(t,!0,-1),!0}function Qr(t,e,n,i,r){var s,o,l,a=1,c=!1,u=!1,f,h,d,p,m,y;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,s=o=l=fa===n||b1===n,i&&ze(t,!0,-1)&&(c=!0,t.lineIndent>e?a=1:t.lineIndent===e?a=0:t.lineIndent<e&&(a=-1)),a===1)for(;I_(t)||N_(t);)ze(t,!0,-1)?(c=!0,l=s,t.lineIndent>e?a=1:t.lineIndent===e?a=0:t.lineIndent<e&&(a=-1)):l=!1;if(l&&(l=c||r),(a===1||fa===n)&&(ua===n||y1===n?m=e:m=e+1,y=t.position-t.lineStart,a===1?l&&(eg(t,y)||B_(t,y,m))||D_(t,m)?u=!0:(o&&L_(t,m)||M_(t,m)||R_(t,m)?u=!0:F_(t)?(u=!0,(t.tag!==null||t.anchor!==null)&&X(t,"alias node should not have any properties")):P_(t,m,ua===n)&&(u=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):a===0&&(u=l&&eg(t,y))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&X(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),f=0,h=t.implicitTypes.length;f<h;f+=1)if(p=t.implicitTypes[f],p.resolve(t.result)){t.result=p.construct(t.result),t.tag=p.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(xi.call(t.typeMap[t.kind||"fallback"],t.tag))p=t.typeMap[t.kind||"fallback"][t.tag];else for(p=null,d=t.typeMap.multi[t.kind||"fallback"],f=0,h=d.length;f<h;f+=1)if(t.tag.slice(0,d[f].tag.length)===d[f].tag){p=d[f];break}p||X(t,"unknown tag !<"+t.tag+">"),t.result!==null&&p.kind!==t.kind&&X(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+p.kind+'", not "'+t.kind+'"'),p.resolve(t.result,t.tag)?(t.result=p.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):X(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||u}function __(t){var e=t.position,n,i,r,s=!1,o;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(o=t.input.charCodeAt(t.position))!==0&&(ze(t,!0,-1),o=t.input.charCodeAt(t.position),!(t.lineIndent>0||o!==37));){for(s=!0,o=t.input.charCodeAt(++t.position),n=t.position;o!==0&&!Rt(o);)o=t.input.charCodeAt(++t.position);for(i=t.input.slice(n,t.position),r=[],i.length<1&&X(t,"directive name must not be less than one character in length");o!==0;){for(;Ui(o);)o=t.input.charCodeAt(++t.position);if(o===35){do o=t.input.charCodeAt(++t.position);while(o!==0&&!Ln(o));break}if(Ln(o))break;for(n=t.position;o!==0&&!Rt(o);)o=t.input.charCodeAt(++t.position);r.push(t.input.slice(n,t.position))}o!==0&&Ch(t),xi.call(Jm,i)?Jm[i](t,i,r):ha(t,'unknown document directive "'+i+'"')}if(ze(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,ze(t,!0,-1)):s&&X(t,"directives end mark is expected"),Qr(t,t.lineIndent-1,fa,!1,!0),ze(t,!0,-1),t.checkLineBreaks&&S_.test(t.input.slice(e,t.position))&&ha(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&za(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,ze(t,!0,-1));return}if(t.position<t.length-1)X(t,"end of the stream or a document separator is expected");else return}function k1(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var n=new E_(t,e),i=t.indexOf("\0");for(i!==-1&&(n.position=i,X(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)__(n);return n.documents}function $_(t,e,n){e!==null&&typeof e=="object"&&typeof n>"u"&&(n=e,e=null);var i=k1(t,n);if(typeof e!="function")return i;for(var r=0,s=i.length;r<s;r+=1)e(i[r])}function V_(t,e){var n=k1(t,e);if(n.length!==0){if(n.length===1)return n[0];throw new wt("expected a single document in the stream, but found more")}}var H_=$_,W_=V_,C1={loadAll:H_,load:W_},A1=Object.prototype.toString,T1=Object.prototype.hasOwnProperty,Th=65279,j_=9,ao=10,z_=13,q_=32,U_=33,Q_=34,of=35,K_=37,X_=38,G_=39,Y_=42,E1=44,J_=45,da=58,Z_=61,e$=62,t$=63,n$=64,P1=91,M1=93,i$=96,R1=123,r$=124,D1=125,gt={};gt[0]="\\0";gt[7]="\\a";gt[8]="\\b";gt[9]="\\t";gt[10]="\\n";gt[11]="\\v";gt[12]="\\f";gt[13]="\\r";gt[27]="\\e";gt[34]='\\"';gt[92]="\\\\";gt[133]="\\N";gt[160]="\\_";gt[8232]="\\L";gt[8233]="\\P";var s$=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],o$=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function l$(t,e){var n,i,r,s,o,l,a;if(e===null)return{};for(n={},i=Object.keys(e),r=0,s=i.length;r<s;r+=1)o=i[r],l=String(e[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),a=t.compiledTypeMap.fallback[o],a&&T1.call(a.styleAliases,l)&&(l=a.styleAliases[l]),n[o]=l;return n}function a$(t){var e,n,i;if(e=t.toString(16).toUpperCase(),t<=255)n="x",i=2;else if(t<=65535)n="u",i=4;else if(t<=4294967295)n="U",i=8;else throw new wt("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+Ge.repeat("0",i-e.length)+e}var c$=1,co=2;function u$(t){this.schema=t.schema||kh,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Ge.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=l$(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?co:c$,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function tg(t,e){for(var n=Ge.repeat(" ",e),i=0,r=-1,s="",o,l=t.length;i<l;)r=t.indexOf(`
`,i),r===-1?(o=t.slice(i),i=l):(o=t.slice(i,r+1),i=r+1),o.length&&o!==`
`&&(s+=n),s+=o;return s}function lf(t,e){return`
`+Ge.repeat(" ",t.indent*e)}function f$(t,e){var n,i,r;for(n=0,i=t.implicitTypes.length;n<i;n+=1)if(r=t.implicitTypes[n],r.resolve(e))return!0;return!1}function pa(t){return t===q_||t===j_}function uo(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==Th||65536<=t&&t<=1114111}function ng(t){return uo(t)&&t!==Th&&t!==z_&&t!==ao}function ig(t,e,n){var i=ng(t),r=i&&!pa(t);return(n?i:i&&t!==E1&&t!==P1&&t!==M1&&t!==R1&&t!==D1)&&t!==of&&!(e===da&&!r)||ng(e)&&!pa(e)&&t===of||e===da&&r}function h$(t){return uo(t)&&t!==Th&&!pa(t)&&t!==J_&&t!==t$&&t!==da&&t!==E1&&t!==P1&&t!==M1&&t!==R1&&t!==D1&&t!==of&&t!==X_&&t!==Y_&&t!==U_&&t!==r$&&t!==Z_&&t!==e$&&t!==G_&&t!==Q_&&t!==K_&&t!==n$&&t!==i$}function d$(t){return!pa(t)&&t!==da}function Os(t,e){var n=t.charCodeAt(e),i;return n>=55296&&n<=56319&&e+1<t.length&&(i=t.charCodeAt(e+1),i>=56320&&i<=57343)?(n-55296)*1024+i-56320+65536:n}function L1(t){var e=/^\n* /;return e.test(t)}var B1=1,af=2,I1=3,N1=4,gr=5;function p$(t,e,n,i,r,s,o,l){var a,c=0,u=null,f=!1,h=!1,d=i!==-1,p=-1,m=h$(Os(t,0))&&d$(Os(t,t.length-1));if(e||o)for(a=0;a<t.length;c>=65536?a+=2:a++){if(c=Os(t,a),!uo(c))return gr;m=m&&ig(c,u,l),u=c}else{for(a=0;a<t.length;c>=65536?a+=2:a++){if(c=Os(t,a),c===ao)f=!0,d&&(h=h||a-p-1>i&&t[p+1]!==" ",p=a);else if(!uo(c))return gr;m=m&&ig(c,u,l),u=c}h=h||d&&a-p-1>i&&t[p+1]!==" "}return!f&&!h?m&&!o&&!r(t)?B1:s===co?gr:af:n>9&&L1(t)?gr:o?s===co?gr:af:h?N1:I1}function m$(t,e,n,i,r){t.dump=function(){if(e.length===0)return t.quotingType===co?'""':"''";if(!t.noCompatMode&&(s$.indexOf(e)!==-1||o$.test(e)))return t.quotingType===co?'"'+e+'"':"'"+e+"'";var s=t.indent*Math.max(1,n),o=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-s),l=i||t.flowLevel>-1&&n>=t.flowLevel;function a(c){return f$(t,c)}switch(p$(e,l,t.indent,o,a,t.quotingType,t.forceQuotes&&!i,r)){case B1:return e;case af:return"'"+e.replace(/'/g,"''")+"'";case I1:return"|"+rg(e,t.indent)+sg(tg(e,s));case N1:return">"+rg(e,t.indent)+sg(tg(g$(e,o),s));case gr:return'"'+y$(e)+'"';default:throw new wt("impossible error: invalid scalar style")}}()}function rg(t,e){var n=L1(t)?String(e):"",i=t[t.length-1]===`
`,r=i&&(t[t.length-2]===`
`||t===`
`),s=r?"+":i?"":"-";return n+s+`
`}function sg(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function g$(t,e){for(var n=/(\n+)([^\n]*)/g,i=function(){var c=t.indexOf(`
`);return c=c!==-1?c:t.length,n.lastIndex=c,og(t.slice(0,c),e)}(),r=t[0]===`
`||t[0]===" ",s,o;o=n.exec(t);){var l=o[1],a=o[2];s=a[0]===" ",i+=l+(!r&&!s&&a!==""?`
`:"")+og(a,e),r=s}return i}function og(t,e){if(t===""||t[0]===" ")return t;for(var n=/ [^ ]/g,i,r=0,s,o=0,l=0,a="";i=n.exec(t);)l=i.index,l-r>e&&(s=o>r?o:l,a+=`
`+t.slice(r,s),r=s+1),o=l;return a+=`
`,t.length-r>e&&o>r?a+=t.slice(r,o)+`
`+t.slice(o+1):a+=t.slice(r),a.slice(1)}function y$(t){for(var e="",n=0,i,r=0;r<t.length;n>=65536?r+=2:r++)n=Os(t,r),i=gt[n],!i&&uo(n)?(e+=t[r],n>=65536&&(e+=t[r+1])):e+=i||a$(n);return e}function b$(t,e,n){var i="",r=t.tag,s,o,l;for(s=0,o=n.length;s<o;s+=1)l=n[s],t.replacer&&(l=t.replacer.call(n,String(s),l)),(Gn(t,e,l,!1,!1)||typeof l>"u"&&Gn(t,e,null,!1,!1))&&(i!==""&&(i+=","+(t.condenseFlow?"":" ")),i+=t.dump);t.tag=r,t.dump="["+i+"]"}function lg(t,e,n,i){var r="",s=t.tag,o,l,a;for(o=0,l=n.length;o<l;o+=1)a=n[o],t.replacer&&(a=t.replacer.call(n,String(o),a)),(Gn(t,e+1,a,!0,!0,!1,!0)||typeof a>"u"&&Gn(t,e+1,null,!0,!0,!1,!0))&&((!i||r!=="")&&(r+=lf(t,e)),t.dump&&ao===t.dump.charCodeAt(0)?r+="-":r+="- ",r+=t.dump);t.tag=s,t.dump=r||"[]"}function v$(t,e,n){var i="",r=t.tag,s=Object.keys(n),o,l,a,c,u;for(o=0,l=s.length;o<l;o+=1)u="",i!==""&&(u+=", "),t.condenseFlow&&(u+='"'),a=s[o],c=n[a],t.replacer&&(c=t.replacer.call(n,a,c)),Gn(t,e,a,!1,!1)&&(t.dump.length>1024&&(u+="? "),u+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Gn(t,e,c,!1,!1)&&(u+=t.dump,i+=u));t.tag=r,t.dump="{"+i+"}"}function w$(t,e,n,i){var r="",s=t.tag,o=Object.keys(n),l,a,c,u,f,h;if(t.sortKeys===!0)o.sort();else if(typeof t.sortKeys=="function")o.sort(t.sortKeys);else if(t.sortKeys)throw new wt("sortKeys must be a boolean or a function");for(l=0,a=o.length;l<a;l+=1)h="",(!i||r!=="")&&(h+=lf(t,e)),c=o[l],u=n[c],t.replacer&&(u=t.replacer.call(n,c,u)),Gn(t,e+1,c,!0,!0,!0)&&(f=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,f&&(t.dump&&ao===t.dump.charCodeAt(0)?h+="?":h+="? "),h+=t.dump,f&&(h+=lf(t,e)),Gn(t,e+1,u,!0,f)&&(t.dump&&ao===t.dump.charCodeAt(0)?h+=":":h+=": ",h+=t.dump,r+=h));t.tag=s,t.dump=r||"{}"}function ag(t,e,n){var i,r,s,o,l,a;for(r=n?t.explicitTypes:t.implicitTypes,s=0,o=r.length;s<o;s+=1)if(l=r[s],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(n?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(a=t.styleMap[l.tag]||l.defaultStyle,A1.call(l.represent)==="[object Function]")i=l.represent(e,a);else if(T1.call(l.represent,a))i=l.represent[a](e,a);else throw new wt("!<"+l.tag+'> tag resolver accepts not "'+a+'" style');t.dump=i}return!0}return!1}function Gn(t,e,n,i,r,s,o){t.tag=null,t.dump=n,ag(t,n,!1)||ag(t,n,!0);var l=A1.call(t.dump),a=i,c;i&&(i=t.flowLevel<0||t.flowLevel>e);var u=l==="[object Object]"||l==="[object Array]",f,h;if(u&&(f=t.duplicates.indexOf(n),h=f!==-1),(t.tag!==null&&t.tag!=="?"||h||t.indent!==2&&e>0)&&(r=!1),h&&t.usedDuplicates[f])t.dump="*ref_"+f;else{if(u&&h&&!t.usedDuplicates[f]&&(t.usedDuplicates[f]=!0),l==="[object Object]")i&&Object.keys(t.dump).length!==0?(w$(t,e,t.dump,r),h&&(t.dump="&ref_"+f+t.dump)):(v$(t,e,t.dump),h&&(t.dump="&ref_"+f+" "+t.dump));else if(l==="[object Array]")i&&t.dump.length!==0?(t.noArrayIndent&&!o&&e>0?lg(t,e-1,t.dump,r):lg(t,e,t.dump,r),h&&(t.dump="&ref_"+f+t.dump)):(b$(t,e,t.dump),h&&(t.dump="&ref_"+f+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&m$(t,t.dump,e,s,a);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new wt("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(c=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?c="!"+c:c.slice(0,18)==="tag:yaml.org,2002:"?c="!!"+c.slice(18):c="!<"+c+">",t.dump=c+" "+t.dump)}return!0}function x$(t,e){var n=[],i=[],r,s;for(cf(t,n,i),r=0,s=i.length;r<s;r+=1)e.duplicates.push(n[i[r]]);e.usedDuplicates=new Array(s)}function cf(t,e,n){var i,r,s;if(t!==null&&typeof t=="object")if(r=e.indexOf(t),r!==-1)n.indexOf(r)===-1&&n.push(r);else if(e.push(t),Array.isArray(t))for(r=0,s=t.length;r<s;r+=1)cf(t[r],e,n);else for(i=Object.keys(t),r=0,s=i.length;r<s;r+=1)cf(t[i[r]],e,n)}function S$(t,e){e=e||{};var n=new u$(e);n.noRefs||x$(t,n);var i=t;return n.replacer&&(i=n.replacer.call({"":i},"",i)),Gn(n,0,i,!0,!0)?n.dump+`
`:""}var O$=S$,k$={dump:O$};function Eh(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var C$=at,A$=Jv,T$=n1,E$=l1,P$=a1,M$=kh,R$=C1.load,D$=C1.loadAll,L$=k$.dump,B$=wt,I$={binary:d1,float:o1,map:t1,null:i1,pairs:m1,set:g1,timestamp:f1,bool:r1,int:s1,merge:h1,omap:p1,seq:e1,str:Zv},N$=Eh("safeLoad","load"),F$=Eh("safeLoadAll","loadAll"),_$=Eh("safeDump","dump"),ks={Type:C$,Schema:A$,FAILSAFE_SCHEMA:T$,JSON_SCHEMA:E$,CORE_SCHEMA:P$,DEFAULT_SCHEMA:M$,load:R$,loadAll:D$,dump:L$,YAMLException:B$,types:I$,safeLoad:N$,safeLoadAll:F$,safeDump:_$};const F1=(t,e)=>{const n=t.__vccOpts||t;for(const[i,r]of e)n[i]=r;return n},$$=t=>(Yw("data-v-52cb710b"),t=t(),Jw(),t),V$={style:{width:"100%",height:"100%","box-sizing":"border-box"}},H$={style:{height:"50px"}},W$={style:{height:"calc(100% - 60px)"}},j$=$$(()=>ce("br",null,null,-1)),z$={style:{height:"32px"}},q$={class:"input-help"},U$={key:1,class:"formcontext"},Q$={__name:"sysform",props:{tableData:{type:Array,default:()=>[]},theanswer:{}},emits:["update:updatesave"],setup(t,{emit:e}){const n=j(),i=j("base"),r=j(),s=j(),o=e;let l=j();const a=t;re(()=>a.tableData,d=>{}),re(()=>a.theanswer,d=>{l.value=a.theanswer,n.value=ks.dump(a.theanswer)});async function c(){const d=await CP();r.value=d.data}pt(()=>{c()});const u=()=>{},f=async()=>{try{(await Qd(ks.dump(l.value))).code===200&&Ze({message:"保存成功",type:"success"}),o("update:updatesave",!0)}catch(d){Ze({message:d.message,type:"error"})}},h=async()=>{try{(await Qd(ks.dump(ks.load(n.value)))).code===200&&Ze({message:"保存成功",type:"success"}),o("update:updatesave",!0)}catch(d){Ze({message:d.message,type:"error"})}};return(d,p)=>{const m=w2,y=JT,g=YT,v=m2,x=A2,S=xg,b=X2,O=j2,k=W2,R=EA,N=Gw,I=TA,$=u2;return B(),ee("div",V$,[ce("div",H$,[ce("div",null,"配置"+Le(`——设备序列号:${r.value?r.value:"--"}`),1),he(m)]),ce("div",W$,[he(g,{modelValue:i.value,"onUpdate:modelValue":p[0]||(p[0]=L=>i.value=L),onChange:u},{default:Y(()=>[he(y,{value:"base"},{default:Y(()=>[jn(Le("基础配置"))]),_:1}),he(y,{value:"all"},{default:Y(()=>[jn(Le("全部配置"))]),_:1})]),_:1},8,["modelValue"]),i.value==="base"?(B(),ne($,{key:0,class:"formcontext",style:{"margin-top":"20px"}},{default:Y(()=>[he(v,{span:1},{default:Y(()=>[j$]),_:1}),he(v,{xs:24,sm:20,md:20,lg:10,xl:10},{default:Y(()=>[he(I,{model:w(l),"label-position":"right",ref_key:"formRef",ref:s,"label-width":"160px"},{default:Y(()=>[(B(!0),ee(fi,null,Cs(t.tableData,(L,V)=>(B(),ee("div",{key:L.key},[ce("div",z$,Le(L.name),1),(B(!0),ee(fi,null,Cs(L.child,(q,P)=>(B(),ne(R,{label:q.name,prop:q.key,key:q.key},{default:Y(()=>[q.type==="int"?(B(),ne(x,{key:0,modelValue:w(l)[L.key][q.key],"onUpdate:modelValue":E=>w(l)[L.key][q.key]=E},null,8,["modelValue","onUpdate:modelValue"])):ie("",!0),q.type==="string"?(B(),ne(S,{key:1,modelValue:w(l)[L.key][q.key],"onUpdate:modelValue":E=>w(l)[L.key][q.key]=E},null,8,["modelValue","onUpdate:modelValue"])):ie("",!0),q.type==="bool"?(B(),ne(b,{key:2,modelValue:w(l)[L.key][q.key],"onUpdate:modelValue":E=>w(l)[L.key][q.key]=E},null,8,["modelValue","onUpdate:modelValue"])):ie("",!0),q.type==="select"?(B(),ne(k,{key:3,modelValue:w(l)[L.key][q.key],"onUpdate:modelValue":E=>w(l)[L.key][q.key]=E,style:{width:"370px"}},{default:Y(()=>[(B(!0),ee(fi,null,Cs(q.select,E=>(B(),ne(O,{key:E,label:E,value:E},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):ie("",!0),ce("span",q$,Le(q.hint?q.hint:""),1)]),_:2},1032,["label","prop"]))),128))]))),128)),he(R,null,{default:Y(()=>[he(N,{type:"primary",onClick:f,style:{"text-align":"right"}},{default:Y(()=>[jn(Le("保存"))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})):ie("",!0),i.value==="all"?(B(),ee("div",U$,[he(vF,{modelValue:n.value,"onUpdate:modelValue":p[1]||(p[1]=L=>n.value=L)},null,8,["modelValue"]),he(N,{type:"primary",onClick:h,style:{"margin-top":"10px"}},{default:Y(()=>[jn(Le("保存"))]),_:1})])):ie("",!0)])])}}},K$=F1(Q$,[["__scopeId","data-v-52cb710b"]]),X$={class:"servicepage"},G$=Z({__name:"index",setup(t){const e=j([]),n=j();pt(async()=>{await i()});const i=async()=>{const r=await kP();n.value=ks.load(r);const s=await OP();e.value=s.data[0].field};return(r,s)=>(B(),ee("div",X$,[he(K$,{tableData:e.value,theanswer:n.value,"onUpdate:updatesave":s[0]||(s[0]=o=>i())},null,8,["tableData","theanswer"])]))}}),e3=F1(G$,[["__scopeId","data-v-c22c7d91"]]);export{e3 as default};
